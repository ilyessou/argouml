<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>5.16.&nbsp;Explorer</title><link rel="stylesheet" href="look-and-feel.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="index.html" title="Cookbook for Developers of ArgoUML"><link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Inside the subsystems"><link rel="previous" href="ch05s15.html" title="5.15.&nbsp;To do items"><link rel="next" href="ch05s17.html" title="5.17.&nbsp;Module loader"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.16.&nbsp;Explorer</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s15.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Inside the subsystems</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch05s17.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="explorer"></a>5.16.&nbsp;Explorer</h2></div></div><div></div></div><p>
Purpose - to provide tree views of the model elements, 
diagrams and other objects. Note: the Explorer used to be called the Navigator. 
</p><p>
The Explorer is located in 
<tt class="classname">org.argouml.ui.explorer</tt> and subpackages.
</p><p>
The Explorer is a Layer 2 subsystem. See <a href="ch04s06.html" title="4.6.&nbsp;Layer 2 - Description of subsystems">Section&nbsp;4.6, &#8220;Layer 2 - Description of subsystems&#8221;</a>.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6190"></a>5.16.1.&nbsp;Requirements</h3></div></div><div></div></div><p>
The Explorer must react to user and application events.
</p><p>
User events include
</p><div class="itemizedlist"><ul type="disc" compact><li><p>
R1: selection of a node, 
which must notify the other views to make the same selection.
</p></li><li><p>
R2: right click on a node, which brings up a popup menu.
</p></li><li><p>
R3: selection of another perspective in the Combox box,
which must change the explorer to that perspective. A perspective provides a
different view of the model that will focus on one or other part of the model.
</p></li><li><p>
R4: node expansion and collapse.
</p></li><li><p>
R5: It is possible to drag namespace nodes on to other namespace nodes. Dropping
a namespace node onto another, will, if the destination namespace is a valid 
one, update the explorer and model.
</p></li><li><p>
R6: sorting of nodes with a particular Ordering.
[an ordering is a comparator that orders child nodes
in the explorer, eg.by name and/or type].
</p></li><li><p>
R7: copy diagram to clipboad functionality for windows/java 1.4 users.
</p></li><li><p>
R8: tooltip showing node name and type.
</p></li><li><p>
R9: standard multiple discontiguous selection with mouse and keyboard.
</p></li><li><p>
R10: the user can configure the perspectives using a dialog. Perspectives
can be added and deleted. Perspective rules can be added and deleted from
a perspective. The changes are saved to the user properties. If there are
user perspectives when ArogUML starts, it loads these, otherwise it loads a
default set of perspectives.
</p></li></ul></div><p>
</p><p>
Application Events include:
</p><div class="itemizedlist"><ul type="disc" compact><li><p>
R11: change in selection in another view, any relevant rows to be highlighted.
</p></li><li><p>
R12: the uml model changes, 
the tree must update to reflect additions/deletions 
and name changes in the model.
</p></li><li><p>
R13: change of project, the tree must update. the root node should be
     expanded with the default diagram selected.
</p></li></ul></div><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6242"></a>5.16.2.&nbsp;Public API's and SPI's</h3></div></div><div></div></div><p>
The Explorer Subsystem provides/will provide the following APIs:
</p><div class="itemizedlist"><ul type="disc" compact><li><p>
API1: Addition / Removal of a Perspective from the PerspectiveManager.
Status: under development
</p></li><li><p>
API2: Addition / Removal of a Perspective Rule from a Perspective.
Status: under development
</p></li><li><p>
API3: Selection of Perspective to be displayed by the Explorer.
Status: not implemented
</p></li><li><p>
API4: Selection of Ordering for Explorer nodes.
[an Ordering is a comparator that orders child nodes in the Explorer]
Status: not implemented
</p></li></ul></div><p>
</p><p>
The Explorer Subsystem provides/will provide the following SPIs:
</p><div class="itemizedlist"><ul type="disc" compact><li><p>
SPI1: Extra actions for the Node pop-up menu.
Status: not implemented
</p></li><li><p>
SPI2: New PerspectiveRule's can be defined and registered with
the 'library' of available rules.
Status: not implemented
</p></li><li><p>
SPI3: New Orderings can be defined and registered with
the available orderings. [an ordering is a comparator that orders child nodes
in the explorer]
Status: not implemented
</p></li></ul></div><p>
</p><p>
The Explorer subsystem does not currently provide any Facades or Plugin
interfaces as such. If you need to think in terms of Facades and Plugins
then API's collectively represent the facade and the SPI's represent plugins.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6276"></a>5.16.3.&nbsp;Details of the Explorer Implementation</h3></div></div><div></div></div><p>
The Explorer is currently shown in the Explorer Pane 
(<tt class="classname">org.argouml.ui.NavigatorPane</tt>)
- the upper left hand pane of ArgoUML.
</p><p>
Except for the Explorer Pane, The Explorer is located in
 org.argouml.ui.explorer.*. The explorer 
has been refactored since version 0.15.2 so that it has a slightly more 
standard Java Swing implementation. It is still 'under development'.
</p><p>
The explorer perspectives provide the different views of the project. They are
implemented by sets of PerspectiveRules that get the child nodes for any
parent node in the tree.
</p><p>
The Explorer has 3 main subcomponents: a customised JTree,
a customised TreeModel and an interface for generating child nodes
in the tree which forms the tree Perspective.
</p><div class="orderedlist"><ol type="1" compact><li><p>
The JTree (org.argouml.ui.explorer.ExplorerTree) has been
     customised to maintain consistent selection state with the other
     model views. It provides a pop up menu (ExplorerPopup) for
     performing actions on specific model elements. There is specific
     functionality in DnDExplorerTree for Drag and drop, and in
     ExportExplorer for copy diagram to clipboard.
</p></li><li><p>
The TreeModel is a customised DefaultTreeModel that listens to
     changes in the UML model. The JTree builds the treemodel as the
     user expands nodes, this minimises the size of the model to those
     part that the user is interested in. The TreeModel contains custom
     DefaultMutableTreeNodes, ExplorerTreeNodes, that maintain their
     own order on child nodes; this will typically be an alphabetical
     order on the model element names. However, it could be enhanced to
     include more powerful orders like total subtree size.
</p></li><li><p>
The model uses the third part of the Explorer design,
     PerspectiveRule's, to add child nodes to the leaves of the tree.
     The structure of the tree is wholly dependent on the collection of
     PerspectiveRules that together provide a specialised view of the
     UML model. This is very flexible and extensible. The is a default
     set of PerspectiveRules in org.argouml.ui.explorer.rules package.
</p></li></ol></div><p>
</p><p>
Each node is displayed with a name and an Icon, 
representing the type of node it is in the UML model. 
This is done using the 
<tt class="classname">org.argouml.uml.ui.UMLTreeRenderer</tt> (for the Icon),
and the text is produced in 
the <tt class="methodname">convertValueToText(...)</tt> method in 
<tt class="classname">org.argouml.ui.explorer.ExplorerTree</tt>.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6312"></a>5.16.4.&nbsp;How do I ...?</h3></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>...add another perspective?</p><p>
</p><div class="itemizedlist"><ul type="circle"><li><p>
The perspectives can be changed using the 
<tt class="classname">org.argouml.ui.explorer.PerspectiveConfigurator</tt> by the
User. If you want to do this
as part of an extension to ArgoUML then you could use (see above) API's 1,2 and
3, and SPI 2. However, these are under development or not implemented, so should
be used knowing that significant changes may be made in the future.
</p></li><li><p>
Hard code it by modifying the core of ArgoUML.
This is the only option currently.
</p></li></ul></div><p>
</p></li><li><p>...improve the PopUp menu?</p><p>
There is no way of doing this currently without modifying the core of ArgoUML.
You could use SPI1 when it gets implemented.
</p></li><li><p>...extend the Explorer in other ways?</p><p>
The best way is to use the above API's/SPI's; if they are not implemented then
It would be best to implement them and feedback your improvements to the
ArgoUML project so that your code works on a recognised API that will be
maintained in the future.
</p></li></ul></div><p>
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s15.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch05s17.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5.15.&nbsp;To do items&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;5.17.&nbsp;Module loader</td></tr></table></div></body></html>