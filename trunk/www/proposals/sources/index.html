<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>ArgoUML Source Directory Structure</title>
  </head>
  
  <body>
    <table cellpadding=0 cellspacing=0>
      <tr bgcolor="#CCCCCC">
        <td>
Proposed restructuring of ArgoUML sources.
<p/>
The purpose of the restructuring would be
to allow tight component building as a foundation for ArgoUML.
By separating source files into basic components,
we could minimize the possibility
that changes to source files have unexpected impact
on other areas of the application.
<hr align="center"/>
<p/>
The component directories shown below are for discussion only,
the names are decided in other suggestions.
<p/>
<pre>
     /argouml
             /build (Unchanged as part of this.)
             /documentation (Unchanged as part of this.)
             /lib (Unchanged as part of this.)
             /modules (Basically unchanged as part of this.  Some of the
	                   test sources will be moved to the component test
		               directories.)
	         /src_new (all files removed after moving to src.)
             /src
                 /build (shared library location)
	             /component1
	                     /build (not in cvs)
	                     /src/org/argouml/where/ever
	                     /tests/org/argouml/where/ever
	                     /lib/some-implementation.jar

	             /component2
	                     /build (not in cvs)
	                     /src/org/argouml/where/ever2
	                     /tests/org/argouml/where/ever2
	                     /templates/some.template

	             /component3
	                     /build (not in cvs)
	                     /src/org/argouml/where/ever3
	                     /tests/org/argouml/where/ever3

	             ...

             /tests (all files removed after moving to src/?????/tests)
             /tools (unchanged as part of this)
             /www (unchanged as part of this)
</pre>
<p/>
<ul>
  <li>
    Each component directory would contain its own build.xml file.
    The component build.xml would be only responsible for its own
    set of component sources and tests.
  </li>
  <li>
    Each component directory would be built separately,
    starting with the most basic component.
  </li>
  <li>
    Components would compile their classes
    into a <code>build/classes</code> within their component directory.
  </li>
  <li>
    Each component would create one or more jar files within the component
    build directory, and would be copied into the /argouml/src/build directory,
    along with any jars that it depends on and are not already included in
    the /argouml/lib directory.
    Dependent components would reference the jar file
    found in /argouml/src/build in their compile classpaths.
  </li>
  <li>
    The src/appl component would build the argouml.jar file.
    This could either be a jar containing only the component classes,
    or it could be a complete argouml.jar which includes the content
    of all of the lower level components.
    The latter approach would provide a single jar file
    equivalent to the current build process.
  </li>
  <li>
    The src directory would contain a master build.xml
    with a reasonable subset of the current targets.
    The component build.xml files would, for example,
    not contain the <code>dist</code> target,
    as this would not be necessary at a component level.
    The master build.xml would not contain a <code>compile</code> target,
    as the only shared output of the components would be jar files.
    A target such as <code>package</code> in the master build.xml
    would simply execute the ant command <code>package</code>
    in each of the component directories,
    in the necessary sequence to ensure that dependencies are fulfilled.
    The targets <code>test</code> and <code>clean</code>
    would behave similarly.
    The target <code>javadoc</code> would <b>not</b> behave this way -
    it would be more reasonable for the component javadocs to build
    the javadocs for that component, but the master javadocs to
    build a consolidated javadoc directory.
  </li>
  <li>
    The master build.xml could build a consolidated argouml.jar file
    if necessary from the individual component jars.
  </li>
  <li>
    build.properties and default.properties would only exist in src,
    not in the component directories.
    The component build.xml files would refer to the those property files
    found in src.
  </li>
  <li>
     build.properties would not be stored in CVS. 
  </li>
</ul>

<p/>
       </td>
     </tr>
   </table>
   <hr align="CENTER">
   <p>
     <a href="../index.html">Proposals</a>
     |
     <a href="/index.html">ArgoUML Home</a>
     |
     <a href="/dev.html">Developer Zone</a>
   </p>
  </body>
</html>
