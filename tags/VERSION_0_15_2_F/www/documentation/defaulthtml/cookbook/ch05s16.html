<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>5.16.&nbsp;Explorer</title><link rel="stylesheet" href="look-and-feel.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="index.html" title="Cookbook for Developers of ArgoUML"><link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Inside the components"><link rel="previous" href="ch05s15.html" title="5.15.&nbsp;To do items"><link rel="next" href="ch05s17.html" title="5.17.&nbsp;Module loader"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5.16.&nbsp;Explorer</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s15.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Inside the components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch05s17.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="explorer"></a>5.16.&nbsp;Explorer</h2></div></div><div></div></div><p>
Purpose - to provide tree views of the model elements, 
diagrams and other objects.
</p><p>
The Explorer will be located in 
<tt class="classname">org.argouml.ui.navigator ??</tt>.
</p><p>
The Explorer is a Layer 2 component. See <a href="ch04s06.html" title="4.6.&nbsp;Layer 2 - Description of components">Section&nbsp;4.6, &#8220;Layer 2 - Description of components&#8221;</a>.
</p><p>
Several tree views are provided by means of Perspectives.
Objects showin in the trees are 
the model elements, 
diagrams and 
other objects (such as 
profiles, 
groupings of model elements etc.).
</p><p>
The Explorer is currently shown in the Explorer Pane - 
the upper left hand pane of ArgoUML.
(See <a href="ch05s09.html" title="5.9.&nbsp;The GUI Framework">Section&nbsp;5.9, &#8220;The GUI Framework&#8221;</a>.)
</p><p>
There is also a Explorer Configurator dialog, which allows the user
to tailor the existing perspectives and create new perspectives 
to their needs 
(although the settings are not persisted).
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6099"></a>5.16.1.&nbsp;Details of current implementation</h3></div></div><div></div></div><p>
Some of the classes are actually reused by the other tree view, 
i.e. the todo/critics list.
</p><p>
The Explorer provides some 'history' capability 
(although this is disabled presently and should problably be factored out)
to navigate back to previously selected model elements. 
</p><p>
Currently the Explorer Pane is mixed with the GUI framework and actions
in <tt class="classname">org.argouml.ui</tt>.
The Explorer is also dependant on "go rules", 
which are rules that help identify children nodes for and particular parent.
"Go rules" are mixed with Diagrams and Property panels 
under <tt class="classname">org.argouml.uml.diagram.ui</tt> and 
<tt class="classname">org.argouml.uml.diagram.<i class="replaceable"><tt>diagram</tt></i>.ui</tt>.
</p><p>
Explorer was previously called Navigator Tree or Navigator Pane.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6122"></a>5.16.2.&nbsp;Requirements</h3></div></div><div></div></div><p>
The Explorer must react to user and application events.
</p><p>
User events include
</p><div class="orderedlist"><ol type="1" compact><li><p>
selection of a node, 
which must notify the other views to make the same selection.
</p></li><li><p>
right click on a node, which brings up a popup menu.
</p></li><li><p>
selection of another perspective in the Combox box,
which must change the tree model to that perspective.
</p></li><li><p>
node expansion and collapse.
</p></li></ol></div><p>
</p><p>
Application Events include:
</p><div class="orderedlist"><ol type="1" compact><li><p>
change of project, the tree must update
</p></li><li><p>
change in selection in another view, any relevant rows to be highlighted.
</p></li><li><p>
model changed, 
the tree must update to reflect additions/deletions 
and name changes in the model.
</p></li></ol></div><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6156"></a>5.16.3.&nbsp;Key Classes</h3></div></div><div></div></div><p>
The Explorer contains Swing components, and there is currently
no abstraction layer (to help implement a IDE plugin for example.
</p><p>
There is a <tt class="classname">JTree</tt> subclass, 
<tt class="classname">DisplayTextTree</tt>, for the tree, with a
<tt class="classname">TreeModel</tt>, Perspective.
The Perspective is made of several 'Go rules', this enables Argo to
convert the graph-like structure of a uml model into a tree and it is
easily extensible.
</p><div class="mediaobject"><img src="images/cookbook/classes-navigatortree.gif"></div><p>
</p><p>
There are several different ways of implementing a 
<tt class="classname">TreeModel</tt> in Swing.
ArgoUML already has a model (the NSUML MModel instance), 
so we create a class (<tt class="classname">NavPerspective</tt>) 
that encapsulates the MModel instance and 
implements <tt class="classname">TreeModel</tt> 
(contains methods that enable the JTree to calculate the tree structure).
This implementation does not build/load a tree model on instantiation,
rather it provides children nodes for any given parent node 
when the user requests a node expansion.
The <tt class="classname">NavPerspective</tt> delegates
the task of calculating child nodes to the Go rules, 
making the tree model very flexible. 
However, the price for this (at the moment) is 
slow node expansion times for large models.
</p><p>
Each node is displayed with a name and an Icon, 
representing the type of node it is in the UML model. 
This is done using the 
<tt class="classname">org.argouml.uml.ui.UMLTreeRenderer</tt> (for the Icon),
and the text is produced in 
the <tt class="methodname">convertValueToText(...)</tt> method in 
<tt class="classname">DisplayTextTree</tt>.
</p><p>
Event handling is done in 
<tt class="classname">DisplayTextTree</tt> and 
<tt class="classname">NavigatorPane</tt>.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6209"></a>5.16.4.&nbsp;How do I ...?</h3></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>...add another perspective?</p><p>
</p><div class="itemizedlist"><ul type="circle"><li><p>
at runtime perspectives can be changed using the 
<tt class="classname">NavigatorConfigDialog</tt>
</p></li><li><p>
hard code it
</p><p>
Perspectives are build in the 
<tt class="classname">NavigatorPane</tt>, 
so you can add your one there. 
Also create new Go rules that are subclasses of 
<tt class="classname">AbstractGoRule</tt>, 
then register them with the Perspetive instance using 
<tt class="methodname">addSubTreeModel(TreeModel)</tt>.
</p></li></ul></div><p>
</p></li><li><p>...improve the PopUp menu?</p><p>
Look in the <tt class="classname">NavigatorPane</tt> class. 
The menu is built at runtime in reaction to a mouse event.
</p></li></ul></div><p>
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s15.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch05s17.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5.15.&nbsp;To do items&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;5.17.&nbsp;Module loader</td></tr></table></div></body></html>