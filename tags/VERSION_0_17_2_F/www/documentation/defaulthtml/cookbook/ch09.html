<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;9.&nbsp;Standards for coding in ArgoUML</title><link rel="stylesheet" href="look-and-feel.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="index.html" title="Cookbook for Developers of ArgoUML"><link rel="up" href="index.html" title="Cookbook for Developers of ArgoUML"><link rel="previous" href="ch08s04.html" title="8.4.&nbsp;CVS repository contents"><link rel="next" href="ch09s02.html" title="9.2.&nbsp;Rules for the building process"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;9.&nbsp;Standards for coding in ArgoUML</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch08s04.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch09s02.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="standards"></a>Chapter&nbsp;9.&nbsp;Standards for coding in ArgoUML</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>9.1. <a href="ch09.html#d0e8554">Rules for writing Java code</a></dt><dt>9.2. <a href="ch09s02.html">Rules for the building process</a></dt><dt>9.3. <a href="ch09s03.html">Checklist for using subproducts</a></dt><dt>9.4. <a href="ch09s04.html">Settings for Eclipse 2</a></dt><dt>9.5. <a href="ch09s05.html">Settings for NetBeans</a></dt><dt>9.6. <a href="ch09s06.html">Settings for Emacs</a></dt><dt>9.7. <a href="ch09s07.html">How to work with Eclipse 3</a></dt></dl></div><a class="indexterm" name="d0e8546"></a><a class="indexterm" name="d0e8549"></a><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8554"></a>9.1.&nbsp;Rules for writing Java code</h2></div></div><div></div></div><p>
The coding style for ArgoUML is the following
</p><div class="itemizedlist"><ul type="disc"><li><p>
Each file starts with some header info: 
file, 
version info, 
copyright notice.
Like this:
</p><pre class="programlisting">
// $Id$
// Copyright (c) 2004 The Regents of the University of California. All
// Rights Reserved. Permission to use, copy, modify, and distribute this
// software and its documentation without fee, and without a written
// agreement is hereby granted, provided that the above copyright notice
// and this paragraph appear in all copies.  This software program and
// documentation are copyrighted by The Regents of the University of
// California. The software program and documentation are supplied "AS
// IS", without any accompanying services from The Regents. The Regents
// does not warrant that the operation of the program will be
// uninterrupted or error-free. The end-user understands that the program
// was developed for research purposes and is advised not to rely
// exclusively on the program for any reason.  IN NO EVENT SHALL THE
// UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
// SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
// THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF
// SUCH DAMAGE. THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
// PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF
// CALIFORNIA HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT,
// UPDATES, ENHANCEMENTS, OR MODIFICATIONS.

package <i class="replaceable"><tt>whatever</tt></i>;
<i class="replaceable"><tt>...</tt></i>
</pre><p>
</p><p>
The file and version is maintained by cvs using keyword substitution.
The year in the copyright notice is maintained manually.
</p><p>
This differs from the Sun Code Conventions that 
requires the initial comment to be a c-style comment.
</p><p>
This is checked by checkstyle.
</p></li><li><p>
All instance variables are private.
</p><p>
This is not required by the Sun Code Conventions but
an additional requirement for ArgoUML.
</p><p>
This is checked by checkstyle.
</p></li><li><p>
Use javadoc for each class, instance variable, and method. 
In general do not put comments in the body of a method. 
If you are doing something complex enough to need a comment, consider
breaking it out into its own private commented method.
</p><p>
This is not required by the Sun Code Conventions but
an additional requirement for ArgoUML.
</p><p>
This is partly checked by checkstyle.
Checkstyle does currently only warn if a javadoc comment is omitted for
a public, protected or default visibility variable or method.
</p></li><li><p>
Indicate places of future modifications with 
</p><pre class="programlisting">
// TODO: reason
</pre><p>
        </p><p>
This differs from the Sun Code Conventions that 
uses either XXX or FIXME depending on if it works or not.
</p></li><li><p>
Four spaces should be used as the unit of indentation.
Tabs must be set exactly every 8 spaces (not 4) and represent 2 indents.
</p><p>
This is exactly as it is stated in the Sun Code Conventions.
It is here just for the emphasis.
</p><p>
This is checked by checkstyle.
</p></li><li><p>
If possible use lines shorter than 80 characters wide.
</p><p>
This is exactly as it is stated in the Sun Code Conventions.
It is here just for the emphasis.
</p><p>
This is checked by checkstyle.
Checkstyle ignores three kinds of lines in this check because of the
historical use of long class names and package names.
These are lines that contain
"// $Id$",
import statements, and
javadoc comments with @see tags.
</p></li><li><p>
Open brace on same line (at end).
Both for if/while/for and for class and functions definitions.
</p><p>
This is exactly as it is stated in the Sun Code Conventions.
It is here just for the emphasis.
</p></li><li><p>
Use deprecation when removing public and protected
classes, 
methods and
attributes.
</p><p>
Whenever you have a public or protected method or attribute in a class or
a public class 
that you want to 
remove,
change the signature in an incompatible way, or 
make change visibility for
you shall always deprecate it first.
After the next stable release you (or someone else) can remove it.
</p><p>
In the future, when the subsystems are well defined and it is clear
what public or protected 
methods, attributes or classes 
that are part of a certain subsystem's
exported interface 
we can allow an exception to this rule for 
methods, attributes and classes 
that are not.
(See <a href="ch04s02.html" title="4.2.&nbsp;Relationship of the subsystems">Section&nbsp;4.2, &#8220;Relationship of the subsystems&#8221;</a>.)
</p><p>
Write deprecation statements like this:
</p><pre class="programlisting">
     * @deprecated by <i class="replaceable"><tt>your name</tt></i> in <i class="replaceable"><tt>the upcoming release</tt></i>. Use {@link <i class="replaceable"><tt>whatever</tt></i>}
     *             <i class="replaceable"><tt>a complete explanation on what to do instead</tt></i>
</pre><p>
</p><p>
This is not checked by checkstyle.
</p><p>
Rationale:
This is part of the "Do Simple Things"-development approach that we
use in ArgoUML.
ArgoUML is a big project with lots of legacy code that we do not know
exactly how it works.
Deprecation shows the intent between decision to remove a method and
the point where it is actually removed 
and this without breaking anything of the old code.
There are also modules or plugins that we might know nothing about that
could be loaded by some user to run within ArgoUML to add functionality.
It is for the modules and plugins that we always save 
deprecated methods to the next stable release.
It makes it possible for the module developers to do work during the 
unstable releases and release at the same time as ArgoUML releases its
stable release.
</p></li><li><p>
Don't use deprecated methods or classes.
</p><p>
Rationale:
Deprecation is an indication that a class is to be removed.
We always want to build ArgoUML in a way that allows for future updates
of everything.
Using things that are on the way out already when doing the implementation
is for this reason not allowed.
</p><p>
Rationale 2:
If you feel like you really want to use a method that is deprecated instead
of the replacement you should first convince the person responsible
for doing the deprecation that he has made a misstake and upgrade ArgoUML
to a version of that library without that method or class deprecated.
If it is within ArgoUML discuss it with the person who actually did 
the deprecation or in the development team.
</p><p>
Comment:
There is an ongoing work (probably perpetually) to change
the calls to deprecated methods and classes that
has been deprecated after used in ArgoUML.
This is a normal part of improving ArgoUML.
If this work is too slow it makes it impossible to upgrade to new
versions of different subtools. 
This problem is seen by "the person responsible for sourceing of the subtool"
when actually trying to upgrade the subtool.
(See <a href="ch12s08.html" title="12.8.&nbsp;How to relate issues to problems in subproducts">Section&nbsp;12.8, &#8220;How to relate issues to problems in subproducts&#8221;</a>.)
</p></li><li><p>
Don't use very long package and class names.
</p><p>
To make the code readable,
keep class names shorter than 25 chars, and
have at most four levels of packages.
</p><p>
Historically in the ArgoUML design,
a deep package structure has been used.
There are several places in the code where the package structure is
mimicing the UML hierarchy of objects resulting in impossibly long
package names like
<tt class="classname">org.argouml.model.uml.behavioralelements.collaborations.<i class="replaceable"><tt>classname</tt></i></tt>, and
<tt class="classname">org.argouml.uml.ui.behavior.common_behavior.<i class="replaceable"><tt>classname</tt></i></tt>.
</p><p>
While establishing the subsystems we use a two-level approach much
like the rest of the java world.
For the subsystem API we always use:
<tt class="classname">org.argouml.<i class="replaceable"><tt>subsystem package name</tt></i></tt>
i.e. the classes are in the subsystem's directory and all subsystems have
package names that is a single level below <tt class="classname">org.argouml</tt>.
If a subsystem is really complex or will be complex
w.r.t. the amount of classes (meaning more than 50 files with classes),
we create new packages with internal classes on a single level below
the subsystem package.
</p><p>
This is the plan for the subsystems and new classes.
Don't move old classes just yet!
That would create more confusion that it would help.
</p></li><li><p>
For everything else follow
<a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html" target="_top">
Code Conventions for the Java Programming Language
</a>
(called Sun Code Conventions)!
</p></li></ul></div><p>
Some of these rules are marked with a comment that they are 
checked by a checkstyle.
Checkstyle is a tool available with the ArgoUML development environment
preconfigured for these rules.
The current configuration can be found in
<tt class="filename">argouml/tools/checkstyle/checkstyle_argouml.xml</tt>.
</p><p>
To run checkstyle run the command
<b class="command">build checkstyle</b> from the
<tt class="filename">argouml/src_new</tt>
directory.
This requires you to have checked out the directories
<tt class="filename">argouml/tools</tt>,
<tt class="filename">argouml/tests</tt>, and
<tt class="filename">argouml/src_new</tt>.
</p><p>
The last couple of checkstyle result are also available in 
the Xenofarm result.
</p><p>
Checkstyle will also check some of the rules from the
Sun Code Conventions that are not stated here.
Furthermore checkstyle nags about when the order of modifiers does
not conform to the suggestions in the
Java Language Specification, Section 8.1.1, 8.3.1, 8.4.3.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch08s04.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch09s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">8.4.&nbsp;CVS repository contents&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;9.2.&nbsp;Rules for the building process</td></tr></table></div></body></html>