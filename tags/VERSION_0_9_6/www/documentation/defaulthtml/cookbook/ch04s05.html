<html><head><title>4.5. Reverse Engineering</title><link href="look-and-feel.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.37" name="generator"><link href="index.html" rel="home" title="ArgoUML Programmers Cookbook"><link href="ch04.html" rel="up" title="Chapter 4. Inside the components"><link href="ch04s04.html" rel="previous" title="4.4. Diagrams"><link href="ch04s06.html" rel="next" title="4.6. Details Panel"></head><body alink="#0000FF" bgcolor="white" link="#0000FF" text="black" vlink="#840084"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">4.5. Reverse Engineering</th></tr><tr><td align="left" width="20%"><a href="ch04s04.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter 4. Inside the components</th><td align="right" width="20%">&nbsp;<a href="ch04s06.html">Next</a></td></tr></table><hr></div><div class="sect1"><a name="reverse"></a><div class="titlepage"><div><h2 class="title" style="clear: all"><a name="reverse"></a>4.5. Reverse Engineering</h2></div></div><div class="sect2"><a name="howdoi_reverse"></a><div class="titlepage"><div><h3 class="title"><a name="howdoi_reverse"></a>4.5.1. How do I ...?</h3></div></div><p>...</p></div><div class="sect2"><a name="N1592"></a><div class="titlepage"><div><h3 class="title"><a name="N1592"></a>4.5.2. Which sources are involved?</h3></div></div><p>
The package org.argouml.uml.reveng is supposed to hold those classes
that are common to all RE packages. At the moment this is the Import
class which is mainly responsible to recognize directories, get their
content and parse every known source file in them. These are only java
files at them moment, but there might be other languages like C++ in
the future. With this concept you could mix several languages within
a project. The DiagramInterface is used to visualize generated NSUML
metamodel objects then.
</p><p>
The package org.argouml.uml.reveng.java holds the Java specific parts
of the current RE code. C++ RE might go to org.argouml.uml.reveng.cc,
or so...
</p></div><div class="sect2"><a name="N159e"></a><div class="titlepage"><div><h3 class="title"><a name="N159e"></a>4.5.3. How is the grammar of the target language implemented?</h3></div></div><p>
It's a Antlr (<a href="http://www.antlr.org" target="_top">http://www.antlr.org</a>)
grammar, based on the Antlr Java parser
example. The main difference is the missing AST (Abstract Syntax Tree)
generation and treeparser. So the original example generates a AST
(a treelike data structure) and then traverses this tree, while the
ArgoUML code parses the source file and generates NSUML objects
directly from the sources. This was done to avoid the memory usage
of an AST and the frequent GC while parsing many source files.
</p></div><div class="sect2"><a name="N15ac"></a><div class="titlepage"><div><h3 class="title"><a name="N15ac"></a>4.5.4. Which model/diagramm elements are generated?</h3></div></div><p>
The *context classes hold the current context for a package, class
etc. When the required information for a object is available, the
corresponding NSUML object is created and passed to the DiagramInterface
to visualize it.
</p></div><div class="sect2"><a name="N15b5"></a><div class="titlepage"><div><h3 class="title"><a name="N15b5"></a>4.5.5. Which layout algorithm is used?</h3></div></div><p>
The classes in org.argouml.uml.diagram.static_structure.layout.* hold
the Classdiagram layout code. No layout for other diagram types yet.
It's based on a ranking scheme for classes and interfaces. The rank of
a class/interface depends on the total number of (direct or indirect)
superclasses. So if class B extends A (with rank(A)=0), then rank(B)=1.
If C extends B, then rank(C)=2 since it has 2 superclasses A,B. An
implemented interface is treated similar to a extended class. The
objects are placed in rows then, that depend on their rank.
rank(0)=1st row. rank(1) =2nd row (below the 1st one) etc. Example:
</p><div class="mediaobject"><img src="images/examples/example1.gif"></div><p>
In the next diagramm, a link goes to a object that is not in the row
above:
</p><div class="mediaobject"><img src="images/examples/example2.gif"></div><p>
In this case, insert virtual objects which are linked to the actual
target and link to them:
</p><div class="mediaobject"><img src="images/examples/example3.gif"></div><p>
The object are sorted within their row then to minimize crossing links
then. Compute the average value of the vertical positions of all linked
object in the row above. Example: we have 2 ranks 0 and 1 with 3
classes each:
</p><blockquote class="blockquote"><p>
A B C : rank 0
</p><p>
D E F : rank 1
</p></blockquote><p>
We give the superclasses an index in their rank (assuming that they are
already sorted):
</p><blockquote class="blockquote"><p>
A:0, B:1, C:2
</p></blockquote><p>
D, E, F have the following links (A, B, C could be interfaces, so I allow
links to multiple superclasses here):
</p><blockquote class="blockquote"><p>
D -&gt; C
</p><p>
E -&gt; A and C
</p><p>
F -&gt; A and B
</p></blockquote><p>
Compute the average value of the indexes:
</p><blockquote class="blockquote"><p>
D = 2 (C has index 2 / 1 link)
</p><p>
E = 0 + 2 / 2 = 1 (A=0, C=2 divide by 2 links)
</p><p>
F = 0 + 1 / 2 = 0.5 (A=0, B=1, 2 links)
</p></blockquote><p>
Then sort the subclasses by that value:
</p><blockquote class="blockquote"><p>
F(is 0.5), E(is 1), D(is 2)
</p></blockquote><p>
So the placement is:
</p><blockquote class="blockquote"><p>
A B C
</p><p>
(here are the links, but I can't hardly paint them as ASCIIs)
</p><p>
F E D
</p></blockquote></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a href="ch04s04.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a href="index.html">Home</a></td><td align="right" width="40%">&nbsp;<a href="ch04s06.html">Next</a></td></tr><tr><td align="left" width="40%">4.4. Diagrams&nbsp;</td><td align="center" width="20%"><a href="ch04.html">Up</a></td><td align="right" width="40%">&nbsp;4.6. Details Panel</td></tr></table></div></body></html>