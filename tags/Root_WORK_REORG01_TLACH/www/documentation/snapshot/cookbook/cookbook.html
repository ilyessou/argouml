<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Cookbook for Developers of ArgoUML</title><link rel="stylesheet" href="look-and-feel.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><meta name="description" content="&#xA;The purpose of this Cookbook is to help in coordinating &#xA;and documenting the development of ArgoUML.&#xA;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e3"></a>Cookbook for Developers of ArgoUML</h1></div><div><h2 class="subtitle">An introduction to ArgoUML Programming</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Markus</span> <span class="surname">Klink</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Linus</span> <span class="surname">Tolke</span></h3></div></div></div><div><div class="legalnotice"><p>
 Copyright (c) 1996-2003 The Regents of the University of California. All
 Rights Reserved. Permission to use, copy, modify, and distribute this
 software and its documentation without fee, and without a written
 agreement is hereby granted, provided that the above copyright notice
 and this paragraph appear in all copies.  This software program and
 documentation are copyrighted by The Regents of the University of
 California. The software program and documentation are supplied "AS
 IS", without any accompanying services from The Regents. The Regents
 does not warrant that the operation of the program will be
 uninterrupted or error-free. The end-user understands that the program
 was developed for research purposes and is advised not to rely
 exclusively on the program for any reason.  IN NO EVENT SHALL THE
 UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
 SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
 ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
 THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF
 SUCH DAMAGE. THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY
 WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
 PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF
 CALIFORNIA HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT,
 UPDATES, ENHANCEMENTS, OR MODIFICATIONS.
             </p></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>
The purpose of this Cookbook is to help in coordinating 
and documenting the development of ArgoUML.
</p></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>1. <a href="#d0e29">Introduction</a></dt><dd><dl><dt>1.1. <a href="#thanks">Thanks</a></dt><dt>1.2. <a href="#project">About the project</a></dt><dt>1.3. <a href="#d0e45">How to contribute</a></dt><dt>1.4. <a href="#d0e177">About this Cookbook</a></dt><dd><dl><dt>1.4.1. <a href="#d0e182">In this Cookbook, you will find...</a></dt><dt>1.4.2. <a href="#d0e193">In this Cookbook, you will not find...</a></dt></dl></dd><dt>1.5. <a href="#mailing_lists">Mailing Lists</a></dt></dl></dd><dt>2. <a href="#buildingandtools">Building from source</a></dt><dd><dl><dt>2.1. <a href="#starting">Getting started</a></dt><dd><dl><dt>2.1.1. <a href="#d0e256">Which tools do I need to build ArgoUML?</a></dt><dt>2.1.2. <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt><dt>2.1.3. <a href="#d0e340">What libraries are needed and used by ArgoUML?</a></dt></dl></dd><dt>2.2. <a href="#cvs_checkout">Download from the CVS repository</a></dt><dt>2.3. <a href="#Build">Build Process</a></dt><dd><dl><dt>2.3.1. <a href="#d0e512">How ANT is run from the ArgoUML development environment</a></dt><dt>2.3.2. <a href="#d0e743">How documentation is presented</a></dt><dt>2.3.3. <a href="#d0e964">Troubleshooting the development build</a></dt></dl></dd><dt>2.4. <a href="#junittests">The JUnit test cases</a></dt><dd><dl><dt>2.4.1. <a href="#d0e1055">How to write a test case</a></dt></dl></dd><dt>2.5. <a href="#release_process">Making a release</a></dt><dd><dl><dt>2.5.1. <a href="#release_process_test_failed">The release did not work</a></dt></dl></dd></dl></dd><dt>3. <a href="#requirements">ArgoUML requirements</a></dt><dd><dl><dt>3.1. <a href="#d0e1560">Requirements for Look and feel</a></dt><dt>3.2. <a href="#d0e1593">Requirements for UML</a></dt><dt>3.3. <a href="#d0e1606">Requirements on java and jvm</a></dt><dt>3.4. <a href="#d0e1628">Requirements set up for the benefit of the development of ArgoUML</a></dt></dl></dd><dt>4. <a href="#components">ArgoUML Design, The Big Picture</a></dt><dd><dl><dt>4.1. <a href="#d0e1666">Definition of component</a></dt><dt>4.2. <a href="#d0e1730">Relationship of the components</a></dt><dt>4.3. <a href="#d0e1761">Definition of layer</a></dt><dt>4.4. <a href="#layer0">Layer 0 - Description of components</a></dt><dt>4.5. <a href="#layer1">Layer 1 - Description of components</a></dt><dt>4.6. <a href="#layer2">Layer 2 - Description of components</a></dt><dt>4.7. <a href="#layer3">Layer 3 - Description of components</a></dt></dl></dd><dt>5. <a href="#inside_components">Inside the components</a></dt><dd><dl><dt>5.1. <a href="#model">Model</a></dt><dd><dl><dt>5.1.1. <a href="#d0e2119">Factories</a></dt><dt>5.1.2. <a href="#d0e2154">Helpers</a></dt><dt>5.1.3. <a href="#d0e2174">The model event pump</a></dt><dt>5.1.4. <a href="#howdoi_model">How do I...?</a></dt></dl></dd><dt>5.2. <a href="#critics">Critics and other cognitive tools</a></dt><dd><dl><dt>5.2.1. <a href="#d0e2372">Main classes</a></dt><dt>5.2.2. <a href="#howdoi_critics">How do I ...?</a></dt><dt>5.2.3. <a href="#d0e2650">org.argouml.cognitive.critics.* class diagram</a></dt></dl></dd><dt>5.3. <a href="#diagrams">Diagrams</a></dt><dd><dl><dt>5.3.1. <a href="#howdoi_diagrams">How do I add a new element to a diagram?</a></dt><dt>5.3.2. <a href="#d0e2697">Adding the property panel</a></dt><dt>5.3.3. <a href="#d0e4194">How to add a new Fig</a></dt></dl></dd><dt>5.4. <a href="#reverseengineering">Reverse Engineering Component</a></dt><dt>5.5. <a href="#codegeneration">Code Generation Component</a></dt><dt>5.6. <a href="#java">Java - Code generations and Reverse Engineering</a></dt><dd><dl><dt>5.6.1. <a href="#howdoi_reverse">How do I ...?</a></dt><dt>5.6.2. <a href="#d0e4405">Which sources are involved?</a></dt><dt>5.6.3. <a href="#d0e4412">How is the grammar of the target language implemented?</a></dt><dt>5.6.4. <a href="#d0e4420">Which model/diagram elements are generated?</a></dt><dt>5.6.5. <a href="#d0e4425">Which layout algorithm is used?</a></dt></dl></dd><dt>5.7. <a href="#otherlanguages">Other languages</a></dt><dt>5.8. <a href="#guiframework">The GUI Framework</a></dt><dd><dl><dt>5.8.1. <a href="#d0e4556">Multi editor pane</a></dt><dt>5.8.2. <a href="#d0e4591">Details pane</a></dt></dl></dd><dt>5.9. <a href="#help">Help System</a></dt><dt>5.10. <a href="#internationalization">Internationalization</a></dt><dd><dl><dt>5.10.1. <a href="#d0e4700">Organizing translators</a></dt><dt>5.10.2. <a href="#d0e4745">Ambitions for localization</a></dt><dt>5.10.3. <a href="#howdoi_internationalization">How do I ...?</a></dt></dl></dd><dt>5.11. <a href="#logging">Logging</a></dt><dd><dl><dt>5.11.1. <a href="#d0e4984">What to Log in ArgoUML</a></dt><dt>5.11.2. <a href="#d0e5012">How to Create Log Entries...</a></dt><dt>5.11.3. <a href="#d0e5061">How to Enable Logging...</a></dt><dt>5.11.4. <a href="#d0e5176">How to Customize Logging...</a></dt><dt>5.11.5. <a href="#d0e5187">References</a></dt></dl></dd><dt>5.12. <a href="#jre">JRE with utils</a></dt><dt>5.13. <a href="#todoitems">To do items</a></dt><dt>5.14. <a href="#propertypanels">Property panels</a></dt><dt>5.15. <a href="#navigatortree">Navigator tree</a></dt><dd><dl><dt>5.15.1. <a href="#d0e5276">Details of current implementation</a></dt><dt>5.15.2. <a href="#d0e5297">Requirements</a></dt><dt>5.15.3. <a href="#d0e5331">Key Classes</a></dt><dt>5.15.4. <a href="#d0e5384">How do I ...?</a></dt></dl></dd><dt>5.16. <a href="#moduleloader">Module loader</a></dt><dd><dl><dt>5.16.1. <a href="#d0e5456">What the ModuleLoader does</a></dt></dl></dd><dt>5.17. <a href="#ocl">OCL</a></dt></dl></dd><dt>6. <a href="#extending">Extending ArgoUML</a></dt><dd><dl><dt>6.1. <a href="#howdoi_general">How do I ...?</a></dt><dt>6.2. <a href="#modules_and_plugins">Modules and PlugIns</a></dt><dd><dl><dt>6.2.1. <a href="#modules_vs_plugins">Differences between modules and plugins</a></dt><dt>6.2.2. <a href="#modules">Modules</a></dt><dt>6.2.3. <a href="#plugins">Plugins</a></dt><dt>6.2.4. <a href="#d0e5997">Tip for creating new modules (from Florent de Lamotte)</a></dt></dl></dd><dt>6.3. <a href="#d0e6011">How are modules organized in in the java code</a></dt><dd><dl><dt>6.3.1. <a href="#howdoi_source_code_modules">How do I ...?</a></dt></dl></dd></dl></dd><dt>7. <a href="#d0e6133">CVS repository contents</a></dt><dt>8. <a href="#documentation_what_goes_where">Organization of ArgoUML documentation</a></dt><dt>9. <a href="#cvs">How to work with CVS</a></dt><dd><dl><dt>9.1. <a href="#groundrules">Ground rules</a></dt><dt>9.2. <a href="#branches">Creating and using branches</a></dt><dd><dl><dt>9.2.1. <a href="#howdoi_cvs">How do I ...?</a></dt></dl></dd><dt>9.3. <a href="#d0e6829">Other CVS comments</a></dt></dl></dd><dt>10. <a href="#standards">Standards for coding in ArgoUML</a></dt><dd><dl><dt>10.1. <a href="#d0e6969">Settings for Eclipse</a></dt><dt>10.2. <a href="#d0e7002">Settings for NetBeans</a></dt><dt>10.3. <a href="#d0e7021">Settings for Emacs</a></dt></dl></dd><dt>11. <a href="#further_reading">Further Reading</a></dt><dd><dl><dt>11.1. <a href="#robbins">Jason Robbins Dissertation</a></dt><dd><dl><dt>11.1.1. <a href="#d0e7050">Abstract</a></dt><dt>11.1.2. <a href="#d0e7057">Where to find it</a></dt></dl></dd><dt>11.2. <a href="#skinner">Martin Skinners Dissertation</a></dt><dd><dl><dt>11.2.1. <a href="#d0e7075">Abstract</a></dt><dt>11.2.2. <a href="#d0e7082">Where to find it</a></dt></dl></dd></dl></dd><dt>12. <a href="#processes">Processes for the ArgoUML project</a></dt><dd><dl><dt>12.1. <a href="#d0e7104">The big picture for Issues</a></dt><dd><dl><dt>12.1.1. <a href="#d0e7115">Priorities</a></dt><dt>12.1.2. <a href="#d0e7157">Resolutions</a></dt></dl></dd><dt>12.2. <a href="#resolve_issue">How to resolve an Issue</a></dt><dt>12.3. <a href="#verify_resolved_fixed">How to verify an Issue that is FIXED</a></dt><dt>12.4. <a href="#verify_resolved_invalid">How to verify an Issue that is rejected</a></dt><dt>12.5. <a href="#close_verified_issue">How to Close an Issue</a></dt><dt>12.6. <a href="#d0e7401">How to relate issues to problems in subproducts</a></dt></dl></dd><dt>13. <a href="#d0e7445">Screen Grabs</a></dt><dd><dl><dt>13.1. <a href="#d0e7454">How to make Screen Grabs</a></dt><dd><dl><dt>13.1.1. <a href="#d0e7466">MS Windows</a></dt><dt>13.1.2. <a href="#d0e7479">Linux</a></dt></dl></dd><dt>13.2. <a href="#d0e7490">Argouml\application\api class diagram screen grab</a></dt><dt>13.3. <a href="#d0e7496">org\Argouml\application\configuration class diagram screen grab</a></dt><dt>13.4. <a href="#d0e7502">org\Argouml\application\configuration class diagram screen grab</a></dt><dt>13.5. <a href="#d0e7508">src_new\org\Argouml\kernel class diagram screen grab</a></dt><dt>13.6. <a href="#d0e7514">src_new\org\Argouml\ocl class diagram screen grab</a></dt></dl></dd><dt>14. <a href="#d0e7520">Index</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>8.1. <a href="#d0e6356">Bits of documentation</a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>2.1. <a href="#d0e1215">An example without javadoc comments</a></dt><dt>5.1. <a href="#d0e5042">For log4j version 1.2.x</a></dt><dt>5.2. <a href="#example.log4j.speed">Improving on speed/performance</a></dt><dt>5.3. <a href="#d0e5069">Various URLs</a></dt><dt>5.4. <a href="#d0e5137">Command Line for argouml.jar</a></dt><dt>5.5. <a href="#d0e5142">Modification of build.xml</a></dt><dt>5.6. <a href="#d0e5168">External Execution Property (Arguments)</a></dt></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e29"></a>Chapter&nbsp;1.&nbsp;Introduction</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>1.1. <a href="#thanks">Thanks</a></dt><dt>1.2. <a href="#project">About the project</a></dt><dt>1.3. <a href="#d0e45">How to contribute</a></dt><dt>1.4. <a href="#d0e177">About this Cookbook</a></dt><dd><dl><dt>1.4.1. <a href="#d0e182">In this Cookbook, you will find...</a></dt><dt>1.4.2. <a href="#d0e193">In this Cookbook, you will not find...</a></dt></dl></dd><dt>1.5. <a href="#mailing_lists">Mailing Lists</a></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="thanks"></a>1.1.&nbsp;Thanks</h2></div></div><div></div></div><p>
We, the authors, would like to take the opportunity to thank everyone
involved in the creation of this documentation, and especially the
people behind setting up the DocBook environment. In particular thanks
go out to Alejandro Ramirez, Phillipe Vanpeperstraete and Andreas
Rueckert.  Thank you!
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="project"></a>1.2.&nbsp;About the project</h2></div></div><div></div></div><p>
ArgoUML is an open source project, so it depends on
people that volunteer to work on it. Especially in the
area of development there is still so much to do!
This Cookbook is dedicated to everyone interested in taking part
in the ArgoUML project as such and
should help to transfer the knowledge from the old experts to them.
Please feel free to send more questions and/or answers to the
<a href="mailto:dev@argouml.tigris.org" target="_top">dev mailing list</a>!
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e45"></a>1.3.&nbsp;How to contribute</h2></div></div><div></div></div><p>
You can help, there are big tasks and small tasks waiting for you.
</p><p>
Here is a suggestion on how you could become
part of the ArgoUML Project.
This could be perceived as a ladder to climb but remember
that if so it is firstly a ladder of levels of commitment
and time spent by you.
You get no price for climbing higher, you just get more
responsibility in the project and more work.
</p><p>
	  </p><div class="orderedlist"><ol type="1"><li><p>Use ArgoUML.</p></li><li><p>Subscribe to the dev list.</p><p>
Monitor the discussions and as soon as you see something discussed
where you have an opinion, jump right in!
</p></li><li><p>Apply for an Observer role.</p><p>
This shows that you are commited to the project and also
allows you to enter and comment on issues etc.
</p></li><li><p>
Familiarize yourself with the project and how we work.
</p><p>
Suggestion on how to go about this:
		</p><div class="orderedlist"><ol type="a"><li><p>
Read through most of the User manual and install and run 
the latest version of ArgoUML.
</p></li><li><p>Subscribe to the issues list.</p><p>
You will get updates on all issues so you can monitor what
we are doing in the project.
(It could be a lot of mails.
If it turns out you don't like watching issues in this way
just unsubscibe again.)
</p></li><li><p>Subscribe to the cvs list.</p><p>
You will get updates on all changes that are done 
to code, documentation, and the web site.
(It could be a lot of mails.
If it turns out you don't like watching 
what is going on in the project in this way
just unsubscibe again.)
</p></li><li><p>
Read the process part of the Developers Cookbook at
<a href="#processes" title="Chapter&nbsp;12.&nbsp;Processes for the ArgoUML project">Chapter&nbsp;12, <i>Processes for the ArgoUML project</i></a>.
</p><p>
This will give you the idea of how the ArgoUML project
attempts to release with good quality and especially
how Issuezilla works.
</p></li><li><p>Get the Observer role granted.</p></li><li><p>
From this on you can report bugs yourself directly in Issuezilla.
</p><p>
You can also verify issues according to the
verification process (see <a href="#verify_resolved_fixed" title="12.3.&nbsp;How to verify an Issue that is FIXED">Section&nbsp;12.3, &#8220;How to verify an Issue that is FIXED&#8221;</a>).
</p><p>
This will help you understand the terminology used in the project
and also gives you an idea of the current quality of ArgoUML and
what needs to be done in the future.
</p><p>
This is also a very low-commitment level task that
could be completed in a couple of minutes
(depending on your choice of issue).
</p></li><li><p>Read the rest of the Developers Cookbook.</p><p>
There is a lot of stuff discussed in here that is interesting 
for your understanding of the project and the code.
</p></li><li><p>Check out the source from cvs and build.</p></li></ol></div><p>
</p></li><li><p>Familiarize yourself with the code.</p><p>
For this a good knowledge of Java is more or less a prerequisite.
</p><p>
Suggestion on how to go about this:
		</p><div class="orderedlist"><ol type="a"><li><p>
Take active part in the discussions on the dev-list.
</p></li><li><p>
Solve issues registered in Issuezilla.
</p></li><li><p>
Convince someone to commit your changes.
</p></li><li><p>
Repeat.
</p><p>
This can go on until you find that your main problem is the to get
someone to actually commit your changes, not because they are hard to
convince but because they don't have time to do commits to keep up with
your pace.
</p></li></ol></div><p>
</p></li><li><p>Apply for a Developer role.</p><p>
This allows you to do commits on your own and you can now increase
the pace in which you are working.
</p><p>
There are a lot of special requirements on you to get this granted.
</p><p>
Noted here for Linus to keep track on what to verify.
		</p><div class="itemizedlist"><ul type="disc"><li><p>
Understanding and accepting the goals.
</p></li><li><p>
Understanding where we are in the development process.
</p></li><li><p>
Understanding the terminology used in the project.
</p></li><li><p>
Good knowledge of CVS.
</p></li><li><p>
Understanding the set of tools (ant, junit) and how to use them.
</p></li></ul></div><p>
</p></li><li><p>Focus your work in a specific area.</p><p>
Everybody has different interests and the best contribution is made
when someone is allowed to pursue his own interests.
Hopefully ArgoUML provides you with interesting challanges to
your taste.
</p></li><li><p>Accept responsibility for a specific area.</p><p>
With this you are part of the core team developing ArgoUML.
</p></li></ol></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e177"></a>1.4.&nbsp;About this Cookbook</h2></div></div><div></div></div><p>
This document, the Cookbook for Developers of ArgoUML, is provided
with the hopes of being helpful for the developers of ArgoUML when
it comes to learning and understanding how ArgoUML work in order
to improve on its functions and features. 

It can also be of interest for persons that wish to analyse the
ArgoUML project for whatever purpose that may be.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e182"></a>1.4.1.&nbsp;In this Cookbook, you will find...</h3></div></div><div></div></div><p>
Information on how you can compile ArgoUML.
</p><p>
Information on how different features of ArgoUML are implemented.
</p><p>
Information on how you should add modules and Plug-ins to ArgoUML.
</p><p>
Information that you, as a developer of ArgoUML,
need to know about how the project is organized and
how to contribute.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e193"></a>1.4.2.&nbsp;In this Cookbook, you will not find...</h3></div></div><div></div></div><p>
You will not find information on how to install and use ArgoUML.
</p><p>
You will not find information on what UML is and if or how you should
use it in your project.
</p><p>
You will not find information on how to convince your project to use
ArgoUML as a modelling tool.
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mailing_lists"></a>1.5.&nbsp;Mailing Lists</h2></div></div><div></div></div><a class="indexterm" name="d0e205"></a><a class="indexterm" name="d0e208"></a><p>
All developers <span class="emphasis"><em>MUST</em></span> subscribe to the mailinglist
for developers. Please find the details at:
<a href="http://argouml.tigris.org/servlets/ProjectMailingListList" target="_top">http://argouml.tigris.org/servlets/ProjectMailingListList</a>
</p><a class="indexterm" name="d0e219"></a><a class="indexterm" name="d0e224"></a><p>
It is also recommended to join the CVS and Issues mailing lists.
Both give you a good idea of what is going on.
Developers should also work with Issuezilla registering or fixing 
problems found by themselves and others.
     </p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="buildingandtools"></a>Chapter&nbsp;2.&nbsp;Building from source</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>2.1. <a href="#starting">Getting started</a></dt><dd><dl><dt>2.1.1. <a href="#d0e256">Which tools do I need to build ArgoUML?</a></dt><dt>2.1.2. <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt><dt>2.1.3. <a href="#d0e340">What libraries are needed and used by ArgoUML?</a></dt></dl></dd><dt>2.2. <a href="#cvs_checkout">Download from the CVS repository</a></dt><dt>2.3. <a href="#Build">Build Process</a></dt><dd><dl><dt>2.3.1. <a href="#d0e512">How ANT is run from the ArgoUML development environment</a></dt><dt>2.3.2. <a href="#d0e743">How documentation is presented</a></dt><dt>2.3.3. <a href="#d0e964">Troubleshooting the development build</a></dt></dl></dd><dt>2.4. <a href="#junittests">The JUnit test cases</a></dt><dd><dl><dt>2.4.1. <a href="#d0e1055">How to write a test case</a></dt></dl></dd><dt>2.5. <a href="#release_process">Making a release</a></dt><dd><dl><dt>2.5.1. <a href="#release_process_test_failed">The release did not work</a></dt></dl></dd></dl></div><p>
If you are in a hurry:
</p><pre class="programlisting">
C:\Work&gt;set CVSROOT=:pserver:guest@cvs.tigris.org:/cvs
C:\Work&gt;cvs login   (use guest as password)
C:\Work&gt;cvs checkout argouml_src
C:\Work&gt;set JAVA_HOME=<i class="replaceable"><tt>C:\Programs\jdkwhatever</tt></i>
C:\Work&gt;cd argouml\src_new
C:\Work\argouml\src_new&gt;build run
</pre><p>
A window from the newly compiled ArgoUML opens after a while!
</p><p>
That was the compact version for Windows + JDK.
(Note: jdk cannot be installed in a directory that contains space in its
name.)
</p><p>
If you don't understand this or it doesn't work read the rest of 
the chapter that describes all the nitty details about why and
how.
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="starting"></a>2.1.&nbsp;Getting started</h2></div></div><div></div></div><p>
In order to develop with ArgoUML it is absolutely mandatory to get
the CVS version of ArgoUML.
How this is done is described in
<a href="#cvs_checkout">Download from the CVS repository</a>.
</p><p>
Notice that the CVS contents is not only a set of source files but
instead it is the complete development environment for
all work within the ArgoUML project.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e256"></a>2.1.1.&nbsp;Which tools do I need to build ArgoUML?</h3></div></div><div></div></div><a class="indexterm" name="d0e259"></a><a class="indexterm" name="d0e264"></a><p>
These are the tools not included in the cvs repository that
you need to work with ArgoUML.
</p><div class="itemizedlist"><ul type="disc"><li><p>
A computer with a free disk space for your work.
</p><p>
100MB is enough to download everything from the repository.
(Currently March 2003 it is 68MB).
150MB is enough to download all and build the tool and the documentation.
(Currently March 2003 it is 114MB).
250MB is enough to build it all 
(javadocs, documentation, classes, packages, ...).
</p></li><li><p>
CVS for getting the files
and committing source code updates.
</p></li><li><p>
JDK, at least version 1.3 (includes the java compiler)
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e283"></a>2.1.2.&nbsp;
Which tools are part of the ArgoUML development environment?
</h3></div></div><div></div></div><a class="indexterm" name="d0e286"></a><p>
These tools are provided by the development environment that you
get when you check out from CVS.
</p><div class="itemizedlist"><ul type="disc"><li><a class="indexterm" name="d0e295"></a><p>
ANT, the tool to manage compiling and packaging.
</p></li><li><a class="indexterm" name="d0e301"></a><p>
ANTLR, for regenerating the built-in parser.
</p></li><li><a class="indexterm" name="d0e307"></a><p>
JUnit, for running the JUnit test cases.
</p></li><li><a class="indexterm" name="d0e313"></a><p>
JDepend, for examining the code.
</p></li></ul></div><p>
For building the documentation from docbook format, 
these tools are also provided with the development environment that
you get when you check out from CVS.
</p><div class="itemizedlist"><ul type="disc"><li><p>
saxon for building documentation from docbook format.
</p></li><li><a class="indexterm" name="d0e325"></a><p>
Docbook XSL stylesheets.
</p></li><li><a class="indexterm" name="d0e333"></a><p>
fop for generating pdf versions of the docbook format.
</p><p>
To build a pdf file with the pictures included you need Jimi.
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e340"></a>2.1.3.&nbsp;What libraries are needed and used by ArgoUML?</h3></div></div><div></div></div><p>
These libraries are provided in the development environment that
you get when you check out CVS.
They are checked by the java compiler when compiling, 
needed for running ArgoUML and therefore distributed with ArgoUML.
</p><div class="itemizedlist"><ul type="disc"><li><a class="indexterm" name="d0e347"></a><p>
nsuml, the Novosoft UML library.
</p><p>
ArgoUML project doesn't include the developing of Java classes for 
the purpose of storing, saving and loading an UML Model.
That work is done by NSUML and is used by ArgoUML.
</p></li><li><a class="indexterm" name="d0e356"></a><p>
GEF graph editing framework, available from 
<a href="http://gef.tigris.org" target="_top">gef.tigris.org</a>.
</p><p>
It is also recommended that you check out GEF at the same time as you
check out ArgoUML because many things in Argo relate to GEF and it is
quite handy to have the source code available.
GEF is also residing at tigris so you can do a simple
<b class="command">cvs <i class="replaceable"><tt>-d :user@cvs.tigris.org:/cvs</tt></i> co gef</b>
(with the same checkout arguments you had when you checked out ArgoUML)
to get it.
</p></li><li><p>
The ocl package to parse and run the Object Constraint Language things.
</p><p>
Details about the package are available from sourceforge
<a href="http://dresden-ocl.sourceforge.net/" target="_top">OCL Compiler</a>.
</p></li><li><a class="indexterm" name="d0e381"></a><p>
log4j, a library with infrastructure for logs.
</p></li><li><p>
antlrall, the run-time part of the antlr tool.
</p></li></ul></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cvs_checkout"></a>2.2.&nbsp;Download from the CVS repository</h2></div></div><div></div></div><a class="indexterm" name="d0e392"></a><a class="indexterm" name="d0e397"></a><p>
The CVS repository at Tigris is accessable using the pserver protocol.
The CVS root is <tt class="filename">/cvs</tt> at cvs.tigris.org.
You use your Tigris login and Tigris password.
</p><p>
This means that you will set the <tt class="varname">CVSROOT</tt>-variable to
<i class="parameter"><tt>:pserver:<i class="replaceable"><tt>login</tt></i>@cvs.tigris.org:/cvs</tt></i>
where <i class="replaceable"><tt>login</tt></i> is your Tigris login.
This needs to be done for the first checkout.
After that the root will be remembered by the checked out copy.
</p><p>
The next thing to do is to login. It is done using the command:
<b class="command">cvs login</b>.
This only needs to be done once and then the account on your machine
remembers this.
</p><p>
Then you do the actual checking out.
<b class="command">cvs checkout <i class="replaceable"><tt>modulename</tt></i></b>.
</p><p>
The CVS module you need to check out to build ArgoUML is
<i class="parameter"><tt>argouml_src</tt></i>.
This will check out the directories
<tt class="filename">argouml/lib</tt>,
<tt class="filename">argouml/tools</tt>,
<tt class="filename">argouml/src</tt>,
<tt class="filename">argouml/src_new</tt>,
and
<tt class="filename">argouml/tests</tt>.
</p><p>
If you want to build the documentation you check out the module
<i class="parameter"><tt>argouml_doc</tt></i>.
This will check out the directories
<tt class="filename">argouml/lib</tt>
<tt class="filename">argouml/tools</tt>
and
<tt class="filename">argouml/documentation</tt>.
</p><p>
If you want to work with the web site you check out the directory
<i class="parameter"><tt>argouml/www</tt></i>.
</p><p>
If you give the argument
<i class="parameter"><tt>argouml</tt></i> all of ArgoUML is checked out.
That is no problem except for the extra use of bandwidth and disk space
but if you have plenty of both, get it all, and eventually you will
see how everything is used for a purpose in the project.
</p><p>
If you don't want to acquire a tigris login to do this you can use the
"guest" account with the password "guest".
Since the checked out copy remembers the login you used to do the
check out, if you do this, you will have to remember to delete this
copy and start over if you get a developer role in the project and
want to do commits directly.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Build"></a>2.3.&nbsp;Build Process</h2></div></div><div></div></div><a class="indexterm" name="d0e480"></a><a class="indexterm" name="d0e485"></a><p>
The ArgoUML build process is driven by ANT, and it is highly recommend
that you stick to that.
There are people known to build from JBuilder or Netbeans, but always
make sure that your work compile with the plain vanilla build process.
     </p><p>
Ant is a tool written in java developed for Apache that reads an xml-file
with rules telling what to compile to what result and what files to include
in what jar-file.
</p><a class="indexterm" name="d0e492"></a><p>
The rule file is named <tt class="filename">build.xml</tt>.
There is one of those in every separate build directory
(<tt class="filename">src_new</tt>,
<tt class="filename">documentation</tt>, and
<tt class="filename">modules/<i class="replaceable"><tt>whatever</tt></i></tt>).
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e512"></a>2.3.1.&nbsp;How ANT is run from the ArgoUML development environment</h3></div></div><div></div></div><a class="indexterm" name="d0e515"></a><p>
For your convenience the ant tool of the correct version is present in the
CVS repository of ArgoUML in the file
<tt class="filename">argouml/tools/ant-1.4.1/lib/ant.jar</tt>.
</p><p>
Normally ant is started with the command
<b class="command">../tools/ant-1.4.1/bin/ant <i class="replaceable"><tt>arg</tt></i></b>
and in the modules
<b class="command">
../../tools/ant-1.4.1/bin/ant <i class="replaceable"><tt>arg</tt></i>
</b>.
On windows the command
<b class="command">..\tools\ant-1.4.1\bin\ant <i class="replaceable"><tt>arg</tt></i></b>
runs the program <tt class="filename">ant.bat</tt>.
</p><p>
To keep you from having to write this and keeping track if you are
working with a module or not
there are two scripts (one for Unix and one for
Windows) that are called <tt class="filename">build.sh</tt> and
<tt class="filename">build.bat</tt> respectively present in most
of the directories that contain a <tt class="filename">build.xml</tt> file.
These two scripts run the equivalence of the above paths.
</p><p>
By setting JAVA_HOME to different values you can at different times
build with different versions of jdk and java.
</p><p>
To use different versions of ANT,
you are responsible for installing your own version.
Also, you must execute
<b class="command">/where/ever/you/placed/your/new/ant <i class="replaceable"><tt>target</tt></i></b>
rather than
<b class="command">build <i class="replaceable"><tt>target</tt></i></b>.
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e571"></a>2.3.1.1.&nbsp;Compiling for Unix</h4></div></div><div></div></div><a class="indexterm" name="d0e574"></a><a class="indexterm" name="d0e579"></a><p>
Here is what you need to do in order to compile and run
your checked out copy of ArgoUML under Unix.
</p><div class="orderedlist"><ol type="1"><li><p><b class="command">JAVA_HOME=<i class="replaceable"><tt>/where/you/have/installed/jdk</tt></i></b></p><p><b class="command">export JAVA_HOME</b></p><p>
This is for sh-style shells like sh, ksh, zsh and bash. If you use
csh-style shells like csh and tcsh you will instead have to write
<b class="command">setenv JAVA_HOME <i class="replaceable"><tt>/where/you/have/installed/jdk</tt></i></b>.
</p></li><li><p>
Change the current directory to the directory you are building
</p><p>
<b class="command">cd <i class="replaceable"><tt>/your/checked/out/copy/of/argouml/src_new</tt></i></b>
</p></li><li><p>Start ant using <b class="command">./build.sh</b></p><p>This gives you a list of targets with descriptions</p></li><li><p>
Compile and run Argouml using <b class="command">./build.sh run</b>
</p><p>
You can do this over and over again when you have modified something
or want to compile and run again.
</p></li></ol></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e628"></a>2.3.1.2.&nbsp;Compiling for Windows</h4></div></div><div></div></div><a class="indexterm" name="d0e631"></a><a class="indexterm" name="d0e636"></a><div class="orderedlist"><ol type="1"><li><p>
<b class="command">set JAVA_HOME=<i class="replaceable"><tt>\where\you\have\installed\jdk</tt></i></b>
</p></li><li><p>
Change the current directory to the directory you are building
</p><p>
<b class="command">chdir <i class="replaceable"><tt>\your\checked\out\copy\of\argouml\src_new</tt></i></b>
</p></li><li><p>Start ant using <b class="command">build</b></p><p>This gives you a list of targets with descriptions</p></li><li><p>
Compile and run Argouml using <b class="command">build run</b>
</p><p>
You can do this over and over again when you have modified something
or want to compile and run again.
</p></li></ol></div><a class="indexterm" name="d0e675"></a><a class="indexterm" name="d0e680"></a><p>
If you do this from Cygwin you work just like for Unix.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e687"></a>2.3.1.3.&nbsp;Customizing and configuring your build</h4></div></div><div></div></div><a class="indexterm" name="d0e690"></a><a class="indexterm" name="d0e695"></a><a class="indexterm" name="d0e700"></a><p>
It is possible to customize your compilation of ArgoUML.
</p><p>
If you issue the command
<b class="command">build list-property-files</b>
you can see what files are searched for properties.
</p><p>
Don't change the
<tt class="filename">argouml/src_new/default.properties</tt>
file (unless you are working with updating the development environment
itself).
Instead create one of the other files locally on you machine.
The properties in these files have precedence over the properties in
<tt class="filename">argouml/src_new/default.properties</tt>.
</p><p>
Remember that if you do this, you have modified your development
environment.
To be sure that you will not break anything for
anyone else when checking in things 
developed using this modified environment, 
remove these files temporarily for the compiling and testing
you do just before you commit.
	  </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e722"></a>2.3.1.4.&nbsp;Building javadoc</h4></div></div><div></div></div><a class="indexterm" name="d0e725"></a><a class="indexterm" name="d0e730"></a><p>
By running ANT again using <b class="command">build prepare-docs</b>
the javadoc documentation is generated and put into
<tt class="filename">argouml/build/javadocs</tt>.
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e743"></a>2.3.2.&nbsp;How documentation is presented</h3></div></div><div></div></div><p>
This describes how the documentation arrives on the web site.
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="how_the_web_site_works"></a>2.3.2.1.&nbsp;How the ArgoUML web site works</h4></div></div><div></div></div><a class="indexterm" name="d0e751"></a><p>
Tigris provides the ArgoUML site to be edited through CVS. Everything
that is checked in under <tt class="filename">argouml/www</tt>
becomes immediatly available at the url 
<a href="http://argouml.tigris.org/" target="_top">http://argouml.tigris.org/</a>
with some added decorations.
</p><p>
Example: The file <tt class="filename">argouml/www/project.html</tt> is
available at 
<a href="http://argouml.tigris.org/project.html" target="_top">http://argouml.tigris.org/project.html</a>.
</p><p>
This is the way the site is maintained and updated.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e774"></a>2.3.2.2.&nbsp;The ArgoUML documentation</h4></div></div><div></div></div><a class="indexterm" name="d0e777"></a><a class="indexterm" name="d0e780"></a><p>
For the ArgoUML project the same documenation shall be available in both
html, pdf and javahelp. To this end the documentation is written in
docbook xml and generated into two versions of html 
(one page per chapter and one page for the whole book),
pdf and javahelp.
</p><p>
We have tools that does the conversion from docbook xml to html and pdf.
The conversion is done whenever you need to look at the result or when 
you want to present the final result on the web site.
</p><p>
There are currently three different books generated in this way,
each into its own directory. They are cookbook (this document), 
manual and quick-guide. They are all generated and stored in the
exact same way except for the name of the directory that is one
of <tt class="filename">cookbook</tt>,
<tt class="filename">manual</tt> or 
<tt class="filename">quick-guide</tt>.
Below I will reference these directories using
<tt class="filename"><i class="replaceable"><tt>book</tt></i></tt>.
</p><p>
When a new version of the documentation is to be made available on the
web site the responsible document release person does the following:
</p><div class="orderedlist"><ol type="1"><li><p>
He checks out everything needed
and a copy of the <tt class="filename">argouml/www</tt>.
</p><p>
The module <i class="parameter"><tt>argouml_docs</tt></i> is there for this purpose.
</p><p>
If wanted, the CVS repository could be tagged and then the tag
can be checked out. This makes it possible to know exactly
how a certain version of the documentation was generated.
</p></li><li><p>
The documentation is generated using <b class="command">build docs</b>.
</p><p>
This generates all three books and the result appears in
<tt class="filename">argouml/build/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt>,
<tt class="filename">argouml/build/documentation/printablehtml/<i class="replaceable"><tt>book</tt></i></tt>, and
<tt class="filename">argouml/build/documentation/pdf/<i class="replaceable"><tt>book</tt></i></tt>.
</p><p>
This has been done several times before while preparing the release so
no problems are expected. If there are problems then the preparations
were not good enough and the process is best stopped right here.
</p></li><li><p>
All the old files are removed from the checked out copy of 
<tt class="filename">argouml/www/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt>, 
<tt class="filename">argouml/www/documentation/printablehtml/<i class="replaceable"><tt>book</tt></i></tt>.
</p></li><li><p>
New files are copied into the checked out copy of www
on top of the previous files there replacing them.
</p><p>
All the files are copied from
<tt class="filename">argouml/build/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt> to
<tt class="filename">argouml/www/documentation/defaulthtml/<i class="replaceable"><tt>book</tt></i></tt>. 
The same for <tt class="filename">printablehtml</tt> and 
<tt class="filename">pdf</tt>.
</p></li><li><p>
No longer used files in 
<tt class="filename">argouml/www/documentation</tt>
are removed from CVS and new files are added.
</p><p><b class="command">cvs -n update</b></p><p>Watch for "Missing" and "Unknown" files.</p><p>
The missing files are scheduled to be removed by:
<b class="command">cvs remove <i class="replaceable"><tt>each of the missing files</tt></i></b>
</p><p>
The "Unknown" files are scheduled to be added by:
<b class="command">cvs add <i class="replaceable"><tt>each of the added files</tt></i></b>
</p><p>
This removing of missing files and adding of unknown files may seem
backward but it is from the perspective of CVS.
The missing files are the ones that were present in the previous
version of the documentation and do not have a replacement,
either because that chapter does not exist anymore or that the tool
generates filenames differently.
The Unknown files are files with filenames that for the same reason
appear from one version of the documentation to the next.
</p></li><li><p>
Commit the changes thus publishing it on the web site.
</p><p>
<b class="command">cvs commit -m'New version of the documentation published'</b>
</p></li><li><p>
The pdf book is uploaded to the download page.
</p></li></ol></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e917"></a>2.3.2.3.&nbsp;How developers work with documentation</h4></div></div><div></div></div><a class="indexterm" name="d0e920"></a><p>
Developers that work with the documentation or with the tools 
to generate the documentation (or anyone else interested in this)
can generate the documentation like described above and examine
the result in
<tt class="filename">argouml/build</tt>.
It is only the last part about checking in and upploading the result
under
<tt class="filename">argouml/www/documentation</tt>
that requires write access in the CVS and synchronisation with the
rest of the project.
</p><p>
In order to do this you need to check out the whole of the
<tt class="filename">argouml/documentation</tt> directory.
You also need the directory
<tt class="filename">argouml/lib</tt> and
<tt class="filename">argouml/tools</tt>
that contain the tools used: ANT, Fop, saxon, ...
</p><p>
The subdirectories of
<tt class="filename">argouml/documentation</tt>,
<tt class="filename">cookbook</tt>,
<tt class="filename">manual</tt>, and
<tt class="filename">quick-guide</tt>
each contain one of the four books.
The subdirectory
<tt class="filename">docbook-setup</tt>
contains two things. 
It contains the configuration files that control how the generation is done.
It contains the xsl rules for all the generation.
The subdirectory
<tt class="filename">images</tt>
contains all the required pictures for all the books.
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e964"></a>2.3.3.&nbsp;Troubleshooting the development build</h3></div></div><div></div></div><a class="indexterm" name="d0e967"></a><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e972"></a>2.3.3.1.&nbsp;Compiling failed. Any suggestions?</h4></div></div><div></div></div><p>
It might be that some other developer has made a misstake in checking
in things that contain errors, or forgotten to check in some files
in a change.
Look at the last couple of hours on the
<a href="http://argouml.tigris.org/servlets/BrowseList?listName=dev" target="_top">
developers mailing list</a>!
It is probably on fire.
</p><p>
Another reason for problems is an unclean local source tree.
This means that if you have updated different parts of your source
tree at different times it might contain inconsistencies.
If you suspect this, first try to fix it by doing
<b class="command">build clean</b> and <b class="command">cvs update -d</b>
before trying to build again.
If that doesn't work remove your checked out copy completely and 
get it all again through CVS.
</p><p>
Another reason might be that you have an 
<tt class="filename">build.properties</tt> or
<tt class="filename">argouml.build.properties</tt>
file that you have been working with earlier
and that is doing something. If in doubt, remove those files.
</p><p>
If nothing helps, ask the 
<a href="mailto:dev@argouml.tigris.org" target="_top">developers mailing list</a>!
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1001"></a>2.3.3.2.&nbsp;Can't commit my changes?</h4></div></div><div></div></div><a class="indexterm" name="d0e1004"></a><p>
You need to have a developer role in the ArgoUML project.
If you don't then you cannot do commit yourself.
Discuss what you have done and how best to test it on the
<a href="mailto:dev@argouml.tigris.org" target="_top">developers mailing list</a>!
Eventually someone will commit it for you.
</p><p>
Furthermore the checkout of your copy needs to be done with your
tigris id that has the Developer role.
If you for some reason have earlier checked out
a copy as guest and then made modifications, changed the CVSROOT
variable you still cannot commit changes done in the repository since the
checked out copy contains information on who checked out.
For this reason, it is best to apply for an Observer role in 
the project if you are going to work with the source at all.
The Observer role is probably granted within a couple of days
(we welcome everybody!) and then you can check out with your tigris id.
This means that when you eventually are granted a Developer role you
can continue working with the same checked out copy.
</p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="junittests"></a>2.4.&nbsp;The JUnit test cases</h2></div></div><div></div></div><a class="indexterm" name="d0e1019"></a><a class="indexterm" name="d0e1022"></a><a class="indexterm" name="d0e1025"></a><p>
ArgoUML has a set of automatic test cases using JUnit-framework
for testing the insides of the code.
The purpose of these are to help in pin-pointing problems with
code changes before even starting ArgoUML.
</p><p>
The JUnit test cases are residing in a separate directory and
run from ant targets in the
<tt class="filename">src_new/build.xml</tt>.
They are never distributed with ArgoUML but merely a tool for
developers.
</p><p>
By running the command
<b class="command">build tests guitests</b>
in <tt class="filename">src_new</tt>
these test cases are started, each in their own jvm.
</p><p>
Each test case writes its result on the Ant log.
</p><p>
The result is also generated into a set of files that can be found at
<tt class="filename">build/test/reports/junit/output/html/index.html</tt>.
</p><p>
The testcases java source code is located under
<tt class="filename">argouml/tests/org/argouml</tt>.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1055"></a>2.4.1.&nbsp;How to write a test case</h3></div></div><div></div></div><a class="indexterm" name="d0e1058"></a><a class="indexterm" name="d0e1061"></a><a class="indexterm" name="d0e1064"></a><a class="indexterm" name="d0e1069"></a><p>
Now this will make all you java-enthusiasts go nuts!
We have both classnames and method names with a special syntax.
</p><p>
The name of the test case starts with "Test" (i.e. Capital T, then
small e, s and t) or 
"GUITest" (i.e. Capital G, U, I, T then small e, s, t).
The reason for this is that the special targets in
<tt class="filename">src_new/build.xml</tt>
searches for test cases with these names.
If you write a test case that does not comply to this rule you still
can run the test case manually after having started with
<b class="command">build run-with-test-panel</b>
but it wont be known and run by other developers and automatic build
mechanisms so don't do it.
</p><p>
Testcases that doesn't require GUI components in place
have filenames like
<tt class="filename">Test<i class="replaceable"><tt>*</tt></i>.java</tt>.
They must be able to run on a headless system.
To make sure that this works, always run your newly developed
test case with <b class="command">build tests</b> using 
jdk1.4 or later.
</p><p>
Testcases that do require GUI components in place
have filenames like
<tt class="filename">GUITest<i class="replaceable"><tt>*</tt></i>.java</tt>.
</p><p>
We should try to get as many tests from the GUITest* class to 
the corresponding Test* class because the latter are run by automatic 
builds regularly.
</p><p>
Every class
<tt class="classname">org.argouml.<i class="replaceable"><tt>x.y</tt></i>.<i class="replaceable"><tt>z</tt></i></tt>
stored in the file
<tt class="filename">src_new/org/argouml/<i class="replaceable"><tt>x/y</tt></i>/<i class="replaceable"><tt>z</tt></i>.java</tt>
should have a JUnit test case called
<tt class="classname">org.argouml.<i class="replaceable"><tt>x.y</tt></i>.Test<i class="replaceable"><tt>z</tt></i></tt>
stored in the file
<tt class="filename">tests/org/argouml/<i class="replaceable"><tt>x/y</tt></i>/Test<i class="replaceable"><tt>z</tt></i>.java</tt>
containing all the Unit Test Cases for that class
that don't need the GUI components to run.
Classes that have things that needs to be tested that 
do need GUI components to run should also have a class named
<tt class="classname">org.argouml.<i class="replaceable"><tt>x.y</tt></i>.GUITest<i class="replaceable"><tt>z</tt></i></tt>
stored in the file
<tt class="filename">tests/org/argouml/<i class="replaceable"><tt>x/y</tt></i>/GUITest<i class="replaceable"><tt>z</tt></i>.java</tt>
</p><p>
If you only want to run your newly written test cases and not
all the test cases, you could start with the command
<b class="command">build run-with-test-panel</b>
and give the class name of your test case like
<tt class="classname">org.argouml.<i class="replaceable"><tt>x.y</tt></i>.Test<i class="replaceable"><tt>z</tt></i></tt>
or
<tt class="classname">org.argouml.<i class="replaceable"><tt>x.y</tt></i>.GUITest<i class="replaceable"><tt>z</tt></i></tt>.
You will then get the output in the window.
You could run all tests in this way by specifying the special test suite
<tt class="classname">org.argouml.util.DoAllTests</tt>
in the same way.
</p><p>
The test case imports the JUnit framework: 
</p><div class="blockquote"><blockquote class="blockquote"><p>
import junit.framework.*;
</p></blockquote></div><p>
and it inherits <tt class="classname">TestCase</tt>
(i.e. <tt class="classname">junit.framework.TestCase</tt>).
</p><p>
Methods that are tests must have names that start with "test"
(i.e. all small t, e, s, t). This is a requirement of the JUnit
framework.
</p><p>
Try to keep the test cases as short as possible.
There is no need in cluttering them up just to beautify the output.
Prefer
</p><pre class="programlisting">
// Exampel from JUnit FAQ
public void testIndexOutOfBoundsExceptionNotRaised()
        throws IndexOutOfBoundsException {
    ArrayList emptyList = new ArrayList();
    Object o = emptyList.get(0);
}
</pre><p>
over
</p><pre class="programlisting">
public void testIndexOutOfBoundsExceptionNotRaised() {
    try {
        ArrayList emptyList = new ArrayList();
        Object o = emptyList.get(0);
    } catch (IndexOutOfBoundsException iobe) {
        fail("Index out of bounds exception was thrown.");
    }
}
</pre><p>
because the code is shorter, easier to maintain and you get a better
error message from the JUnit framework.
</p><p>
A lot of times it is useful just to run the compiler to verify that
the signatures are correct on the interfaces. Therefor Linus has
thought it is a good idea to add methods called
<tt class="methodname">compileTestStatics</tt>,
<tt class="methodname">compileTestConstructors</tt>, and
<tt class="methodname">compileTestMethods</tt>
that was thought to include correct calls to all static methods,
all public constructors, and all other public methods that are not
otherwise tested.
These methods are never called.
They serve as a guarantee that the public interface of a class will
never lose any of the functionality provided by its signature in an
uncontrolled way in just the same way as the test-methods serve as a
guarantee that no features will ever be lost.
</p><div class="example"><a name="d0e1215"></a><p class="title"><b>Example&nbsp;2.1.&nbsp;An example without javadoc comments</b></p><a class="indexterm" name="d0e1218"></a><p>
</p><pre class="programlisting">
package org.argouml.uml.ui;
import junit.framework.*;

public class GUITestUMLAction extends TestCase {
    public GUITestUMLAction(String name) {
	super(name);
    }

    // Testing all three constructors.
    public void testCreate1() {
	UMLAction to = new UMLAction(new String("hejsan"));
	assert("Disabled", to.shouldBeEnabled());
    }
    public void testCreate2() {
	UMLAction to = new UMLAction(new String("hejsan"), true);
	assert("Disabled", to.shouldBeEnabled());
    }
    public void testCreate3() {
	UMLAction to = new UMLAction(new String("hejsan"), true, UMLAction.NO_ICON);
	assert("Disabled", to.shouldBeEnabled());
    }
}
</pre><p>
and the corresponding no-gui-class:
</p><pre class="programlisting">
package org.argouml.uml.ui;
import junit.framework.*;

public class TestUMLAction extends TestCase {
    public TestUMLAction(String name) {
	super(name);
    }

    // Functions never actually called. Provided in order to make
    // sure that the static interface has not changed.
    private void compileTestStatics() {
	boolean t1 = UMLAction.HAS_ICON;
	boolean t2 = UMLAction.NO_ICON;
	UMLAction.getShortcut(new String());
	UMLAction.getMnemonic(new String());
    }

    private void compileTestConstructors() {
	new UMLAction(new String());
	new UMLAction(new String(), true);
	new UMLAction(new String(), true, true);
    }

    private void compileTestMethods() {
	UMLAction to = new UMLAction(new String());
	to.markNeedsSave();
	to.updateEnabled(new Object());
	to.updateEnabled();
	to.shouldBeEnabled();
    }
}
</pre><p>
</p><p></p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="release_process"></a>2.5.&nbsp;Making a release</h2></div></div><div></div></div><a class="indexterm" name="d0e1234"></a><p>
To simplify for the person that is actually doing the release work
and to make sure that everything is done in the exact same way 
every time and nothing is forgotten,
this list of what to do when releasing is maintained.
</p><p>
It is provided with the hopes of being helpful.
If you, the release responsible, finds it unhelpful, please remove it!
</p><p>
What needs to be done when one actually does a release:
</p><p>
	</p><div class="orderedlist"><ol type="1"><li><p>Tag the whole CVS repository with the freeze tag!</p><p>
Normally this tag is "VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i>_F",
e.g. VERSION_0_9_7_F.
The according command line CVS command is 
<b class="command">cvs rtag VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i>_F argouml</b>.
(Because of a problem on the Tigris site, this doesn't work, 
instead make sure you have a complete checked out copy of ArgoUML,
go to the root directory and run the command
<b class="command">cvs tag VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i>_F</b>.)
</p></li><li><p>Make sure you have a clean copy of the source!</p><p>
This is done by checking out from the tag using the command
<b class="command">cvs co -r VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i>_F argouml_modules</b>
and
<b class="command">cvs co -r VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i>_F argouml/tests</b>
in a new directory.
</p></li><li><p>
Build the release with <b class="command">build dist-release</b>!
</p><p>
This is done in the 
<tt class="filename">argouml/src_new</tt>
directory.
</p><p>
The output should be the files
ArgoUML-<i class="replaceable"><tt>VERSION</tt></i>-libs.tar.gz,
ArgoUML-<i class="replaceable"><tt>VERSION</tt></i>-libs.zip,
ArgoUML-<i class="replaceable"><tt>VERSION</tt></i>-src.tar.gz,
ArgoUML-<i class="replaceable"><tt>VERSION</tt></i>-src.zip,
ArgoUML-<i class="replaceable"><tt>VERSION</tt></i>-app.tgz,
ArgoUML-<i class="replaceable"><tt>VERSION</tt></i>.tar.gz, and
ArgoUML-<i class="replaceable"><tt>VERSION</tt></i>.zip
in the top-level argouml directory.

</p></li><li><p>Test the release!</p><p>
Either the tar or zip-file is tested by unpacking, starting and then
running through the test cases.
Currently there isn't any defined test cases.
</p><p>
All JUnit test cases are run by
</p><div class="itemizedlist"><ul type="disc"><li><p>
Run the JUnit test cases in
<tt class="filename">argouml/tests</tt>
by issueing the command
<b class="command">build tests</b>!
</p><p>
There should not be any failed tests.
</p></li><li><p>
Run the JUnit test cases in 
<tt class="filename">modules/junit</tt>
by cd:ing to
<tt class="filename">modules/junit</tt>
and running <b class="command">build run</b>,
invoking JUnit tests from the Tools menu,
specifying the Test Case TestAll,
and running.
No problems shall be found.
</p></li></ul></div><p>
</p><p>
If the tests did not pass See <a href="#release_process_test_failed" title="2.5.1.&nbsp;The release did not work">Section&nbsp;2.5.1, &#8220;The release did not work&#8221;</a>.
</p></li><li><p>Tag the whole repository with the release tag!</p><p>
This tag is "VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i>",
e.g. VERSION_0_9_7.
The according command line CVS command is 
<b class="command">cvs tag VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i></b>
when your are standing in the
<tt class="filename">argouml</tt>-directory.
</p></li><li><p>
Open the repository for commits towards the next version.
</p><p>
This is done by setting the <tt class="methodname">argo.core.version</tt>
in <tt class="filename">default.properties</tt> to 
<i class="replaceable"><tt>Number of next release</tt></i>
and commiting.
</p></li><li><p>Upload the files onto the tigris website!</p><p>
Only a project owner can do that.
Please write the descriptions of the files like this:
</p><div class="itemizedlist"><ul type="disc"><li><p>libraries</p><p>
libraries needed to compile
</p></li><li><p>sources</p><p>
source code without libraries
</p></li><li><p>complete set</p><p>
binary distribution, including all libraries
</p></li><li><p>application bundle</p><p>
binary distribution, runnable as application bundle
</p></li></ul></div><p>
</p></li><li><p>
Contact Jason Robbins to make the new Webstart version available!
</p><p>
Jason Robbins takes care of the signing and publishing of the
Webstart version.
</p></li><li><p>
Go through Issuezilla and check things.
</p><p>
Things to check are:
</p><div class="orderedlist"><ol type="a"><li><p>
That there is a Version created in issuezilla for the newly created release.
</p><p>
The purpose of this is to make it possible for everyone 
to report bugs on the new release.
</p></li><li><p>
Make sure that the upcoming releases have 
target milestones created for them.
</p></li><li><p>
Change the target milestones of all the not yet resolved issues 
for this release to ---.
</p></li><li><p>
Move all issues reported on 'current' to this release.
</p><p>
These items were reported between the previous version and this version.
Since 'current' will be reused for the next release, they need to be
locked to the closest release to where they were found.
</p></li><li><p>Other stuff.</p><p>
This can also be a good time to change all 
RESOLVED/REMIND and RESOLVED/LATER.
Search for them and Reopen them.
</p></li></ol></div></li><li><p>Update the web page</p><p>
The
<a href="http://argouml.tigris.org/documentation/issuezilla/frequentlyusedlists.html" target="_top">Lists of Issues</a>
page contains a link to each version and needs to be updated.
</p></li><li><p>Make announcements!</p><p>
Write a News announcements and a short note on 
the dev, users and announce lists.
Announcer should make sure that he/she is already subscribed to all lists
with a reference to the news item.
</p><p>
The announcement shall include
a statement on what kind of release this is,
information on what has changed (for stable releases this is a list of what
has changed since the last stable release),
the list of resolved issues,
a list of serious known problems with this release 
(stable releases shouldn't have any),
technical details on how the release was built, and
the plan for the following release.
</p><p>
Freshmeat: currently Thierry Lach does the freshmeat announcements
which require a login so just inform him.
</p></li></ol></div><p>
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="release_process_test_failed"></a>2.5.1.&nbsp;The release did not work</h3></div></div><div></div></div><a class="indexterm" name="d0e1464"></a><p>
This shouldn't happen! This really shouldn't happen!
</p><p>
The reason that this has happened is that one of the developers 
has made a mistake.
You now must decide a way forward.
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="release_work_fix_problem_yourself"></a>2.5.1.1.&nbsp;Fix the problem yourself.</h4></div></div><div></div></div><p>
If the problem is obvious to you and you can fix it quickly, do so.
This is done by doing the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>Make the release tag into a branch</p><p>
<b class="command">cvs rtag -b -r VERSION_<i class="replaceable"><tt>X_Y_Z</tt></i>_F BRANCH_<i class="replaceable"><tt>X_Y_Z</tt></i></b>
</p></li><li><p>Update your checked out copy to be on that branch</p><p>
<b class="command">cvs update -r BRANCH_<i class="replaceable"><tt>X_Y_Z</tt></i></b>
</p></li><li><p>Fix the problem in your checked out copy</p></li><li><p>Commit the problem in the branch</p><p>
<b class="command">cvs commit -m'Fix of problem blabla'</b>
</p></li><li><p>Continue the build process</p><p>
This is done by restarting the <b class="command">build dist-release</b>-command
and from that point on working in the branch instead of at the tag.
</p></li><li><p>
Explain to the culprit what mistakes he has made and how to fix it.
</p><p>
It is now his responsibility to make sure that the problem will not
appear in the next version.
He can do this either by merging in your fix or by fixing the problem
in some other way.
</p><p>
At this point an in-detail description of how poor programming skills
the culprit has and how ugly his mother is, is probably in place but
please keep it constructive!
Remember, you might be mistaken when you guess who the responsible is.
</p></li></ul></div><p>
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1529"></a>2.5.1.2.&nbsp;
Delay the release waiting for someone to fix the problem.
</h4></div></div><div></div></div><p>
Create the branch as described in 
<a href="#release_work_fix_problem_yourself" title="2.5.1.1.&nbsp;Fix the problem yourself.">Section&nbsp;2.5.1.1, &#8220;Fix the problem yourself.&#8221;</a>.
Then tell the culprit and everyone on the developer list
what the problem is and that it is to be fixed in the
release branch a.s.a.p.
</p><p>
Monitor the changes made to the branch to verify that
no one commits anything else but the solutions to the
problems.
</p><p>
When you get notified that it is completed, 
update your checked out copy and continue the release work.
</p></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="requirements"></a>Chapter&nbsp;3.&nbsp;ArgoUML requirements</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Linus</span> <span class="surname">Tolke</span></h3></div></div></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>3.1. <a href="#d0e1560">Requirements for Look and feel</a></dt><dt>3.2. <a href="#d0e1593">Requirements for UML</a></dt><dt>3.3. <a href="#d0e1606">Requirements on java and jvm</a></dt><dt>3.4. <a href="#d0e1628">Requirements set up for the benefit of the development of ArgoUML</a></dt></dl></div><p>
This chapter contains a description on how ArgoUML should work
and behave for the users.
</p><p>
These things might not be implemented yet and the solutions
might not even be clear but it is a definition of the goal.
</p><p>
The fact that it is not implemented or doesn't work as stated here
should be registered as a bug 
in the bug registering tool.
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1560"></a>3.1.&nbsp;Requirements for Look and feel</h2></div></div><div></div></div><p>
This describes how the ArgoUML look and feel shall behave.
</p><p>
</p><div class="orderedlist"><ol type="1"><li><p>
When multiple visual components are showing the same model element
they shall be updated in a consistent manner throughout the application.
</p></li><li><p>
As soon as the model element changes then all views shall update.
For text fields, this can be at every key stroke.
</p></li><li><p>
There shall be no indication of an exception on the screen or in the
log if it has occured merely because of a user mistyping or not being
aware of UML syntax.
</p></li><li><p>
All text fields shall have context sensitive help.
</p><p>
As follows:
</p><div class="orderedlist"><ol type="a"><li><p>
A tooltip that explains the data and format expected by the
particular field.
</p><p>
This can be omitted when there is a header stating the data of
the field and the format is obvious.
</p></li><li><p>
Pressing F1 or choosing help from the menu shall display a popup
window explaining for data and format required by the current input
field. 
Input focus shall be left on the field during any user
interaction with the popup (dragging, scrolling or closing).
</p></li></ol></div><p>
</p></li></ol></div><p>
 
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1593"></a>3.2.&nbsp;Requirements for UML</h2></div></div><div></div></div><p>
</p><div class="orderedlist"><ol type="1"><li><p>
ArgoUML shall be a correct implementation of the UML 1.3 model.
</p></li><li><p>
ArgoUML shall implement everything in the UML 1.3 model.
</p></li></ol></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1606"></a>3.3.&nbsp;Requirements on java and jvm</h2></div></div><div></div></div><p>
</p><div class="orderedlist"><ol type="1"><li><p>Choice of JRE</p><p>
It shall be possible to run ArgoUML with any Java2 compliant JRE.
</p></li><li><p>Download and start</p><p>
It shall be possible to install ArgoUML locally on the machine
and use without Internet connection.
</p></li><li><p>Console output</p><p>
Logging or tracing information shall not be written to the console
or to any file unless explicitly turned on by the user.
</p></li></ol></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1628"></a>3.4.&nbsp;Requirements set up for the benefit of the development of ArgoUML</h2></div></div><div></div></div><p>
</p><div class="orderedlist"><ol type="1"><li><p>Logging</p><p>
The code shall contain entries logging important information
for the purpose of helping Developers of ArgoUML in finding problems
in ArgoUML itself.
</p></li></ol></div><p>
</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="components"></a>Chapter&nbsp;4.&nbsp;ArgoUML Design, The Big Picture</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>4.1. <a href="#d0e1666">Definition of component</a></dt><dt>4.2. <a href="#d0e1730">Relationship of the components</a></dt><dt>4.3. <a href="#d0e1761">Definition of layer</a></dt><dt>4.4. <a href="#layer0">Layer 0 - Description of components</a></dt><dt>4.5. <a href="#layer1">Layer 1 - Description of components</a></dt><dt>4.6. <a href="#layer2">Layer 2 - Description of components</a></dt><dt>4.7. <a href="#layer3">Layer 3 - Description of components</a></dt></dl></div><a class="indexterm" name="d0e1644"></a><p>
Currently this is more of a base for discussion and
ambition but hopefully this will mature and 
prove useful.
</p><p>
The code within ArgoUML is separated in components 
that each have a responsibility.
</p><p>
<a href="#inside_components" title="Chapter&nbsp;5.&nbsp;Inside the components">Chapter&nbsp;5, <i>Inside the components</i></a>
explains each component in details.
This chapter just gives an overall picture.
</p><a class="indexterm" name="d0e1657"></a><p>
The components are organized in layers.
The purpose of the layers is to keep a clear view
of what components provide services to others
and to allow us to know how much is involved
when testing each component.
</p><p>
TODO: Insert UML diagram describing the relation between components and layers.
</p><p>
This chapter contains 
a list of all components and what layer they are in
and the definition of the responsibility of each component.
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1666"></a>4.1.&nbsp;Definition of component</h2></div></div><div></div></div><p>
All ArgoUML code is organized in components.
</p><p>
Each component has:
</p><div class="itemizedlist"><ul type="disc"><li><p>A name</p></li><li><p>A single directory/java package where it resides</p><p>
Subparts of the component can reside in subdirectories of this directory.
Auxiliary parts of the components can reside somewhere else.
</p></li></ul></div><p>
</p><p>
Each component has a single Facade class that can be used by
all other components when using the component.
The Facade class is called
<tt class="classname"><i class="replaceable"><tt>ComponentName</tt></i>Facade</tt>
and is located in the component package.
How it is used is primarily documented in the class file itself 
(as javadoc) but the more complex picture is documented in the
Cookbook (in <a href="#inside_components" title="Chapter&nbsp;5.&nbsp;Inside the components">Chapter&nbsp;5, <i>Inside the components</i></a>).
</p><p>
Each component can also have one or several plug-in interfaces.
That is Facade objects where modules or plug-ins can connect themselves
to modify or augment the behavior of that component.
</p><p>
The plug-in interfaces are also all located in the component package
and called
<tt class="classname"><i class="replaceable"><tt>ComponentName</tt></i>Plugin<i class="replaceable"><tt>Plug-inType</tt></i></tt>.
Example: 
<tt class="classname">ModelPluginDiagram</tt>, 
<tt class="classname">ModelPluginType</tt>.
</p><p>
If the component uses a callback-technique
the callback is always made to an interface.
The interface is also in the component package and it is called
<tt class="classname"><i class="replaceable"><tt>ComponentName</tt></i><i class="replaceable"><tt>Plug-inType</tt></i>Interface</tt>.
Example:
<tt class="classname">ModelDiagramInterface</tt>,
<tt class="classname">ModelTypeInterface</tt>.
</p><p>
        </p><div class="mediaobject"><img src="images/cookbook/ComponentDiagram.gif"></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1730"></a>4.2.&nbsp;Relationship of the components</h2></div></div><div></div></div><p>
Each component that is used by other components provide
two ways for other components to use them:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
The Facade class
</p><p>
The use of Facade class is not wide spread in ArgoUML.
This is because ArgoUML is traditionally built as a whole
and no components were clearly defined.
</p><p>
A Facade class provides the most common functions other components
want to do when using that components to reduce the need of having
to use anything else but the Facade class.
The Facade class should be very much more stable than the component
itself.
Methods in the Facade should change really slowly and only be 
removed after several months (and one stable release) of deprecation.
</p><p>
The Facade class is documented in the class file itself (as javadoc)
and the more complex picture (if needed) is documented in the
Cookbook (in <a href="#inside_components" title="Chapter&nbsp;5.&nbsp;Inside the components">Chapter&nbsp;5, <i>Inside the components</i></a>).
</p></li><li><p>
Calls to public methods
</p><p>
Traditionally components interface through public methods and
public variables.
For this reason, always exercise extreme caution when changing
the signature of a public method. 
(See <a href="#groundrules" title="9.1.&nbsp;Ground rules">Section&nbsp;9.1, &#8220;Ground rules&#8221;</a>.)
</p><p>
This way of communicating is still to be used when it is not
convenient to use the Facade for a specific use of that component.
</p></li></ul></div><p>
For each component X in ArgoUML that uses the component Y 
the designer of that component X, 
must decide if he wants to use calls to public methods
when using the component Y 
(putting a set of import org.argouml.Y.internals.blabla.*; statements
in each file in the files of component X that uses component Y)
or just use the Facade class of component Y
(putting only one import org.argouml.Y.YFacade; 
in each file in the component X that uses component Y).
</p><p>
The public calls solution 
makes the component X depending on the component Y meaning
that when we change the insides of the component Y we must also change
component X.
The facade calls solution
doesn't make the component X depending on the component Y
but just the Facade of component Y.
</p><p>
If the public calls solution or facade calls solution is used
shall be described in the Cookbook's description of component X
in the list of used components.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1761"></a>4.3.&nbsp;Definition of layer</h2></div></div><div></div></div><p>
Layers are used to organize and 
clairify the relationships between the different components
within ArgoUML.
</p><p>
ArgoUML is built from the bottom and up.
Components on a higher level are relying on components
on a lower level and never the other way around.
A component cannot even rely on a component in the same layer.
</p><p>
This means that when testing a component,
it can always be tested with just that component and
components on lower levels.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="layer0"></a>4.4.&nbsp;Layer 0 - Description of components</h2></div></div><div></div></div><p>
Layer 0 contains some infrastructure components that
just are there for every other layer to use.
</p><p>
They are all insignificant enough not to be mentioned when
listing dependencies.
</p><div class="itemizedlist"><ul type="disc"><li><p>Logging</p><a class="indexterm" name="d0e1781"></a><p>
Calls can be spread all over that would go through some rule set
and then end up on file, on the output or not at all.
</p></li><li><p>Internationalization</p><a class="indexterm" name="d0e1789"></a><a class="indexterm" name="d0e1792"></a><p>
This is the set of files that is a repository of localized strings.
Every other module uses these strings in all communcations with
the user.
</p><p>
The Internationalization Component is described in detail in
<a href="#internationalization" title="5.10.&nbsp;Internationalization">Section&nbsp;5.10, &#8220;Internationalization&#8221;</a>.
</p></li><li><p>JRE with utils</p><a class="indexterm" name="d0e1804"></a><p>
Every other component can use the classes available with the JRE.
</p></li></ul></div><p>
        </p><div class="mediaobject"><img src="images/cookbook/Layer0.gif"></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="layer1"></a>4.5.&nbsp;Layer 1 - Description of components</h2></div></div><div></div></div><p>
Layer 1 is the lowest layer.
The components in this layer do not rely on any other part
(except layer 0)
of ArgoUML to do their work.
They can all be tested in full individually 
i.e. independant of any other component.
</p><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>The Model</p><a class="indexterm" name="d0e1826"></a><p>
The Model contains a modifyable view of the UML model
and the diagrams.
</p><p>
The Model presents several different views
and access methods for the information.
Among other things, the information can be saved,
loaded, examined, and observed.
</p><p>
The Model is described in detail in 
<a href="#model" title="5.1.&nbsp;Model">Section&nbsp;5.1, &#8220;Model&#8221;</a>.
</p></li><li><p>To do items</p><a class="indexterm" name="d0e1840"></a><p>
This is the To do items. They can be created, deleted and saved.
</p><p>
The To Do Items Component is described in detail in 
<a href="#todoitems" title="5.13.&nbsp;To do items">Section&nbsp;5.13, &#8220;To do items&#8221;</a>.
</p></li><li><p>The GUI Framework</p><a class="indexterm" name="d0e1852"></a><p>
This is the framework with menus, tabs, and panes
available for the other
components to fill with actions and contents.
</p><p>
The GUI Framework Component is described in detail in 
<a href="#guiframework" title="5.8.&nbsp;The GUI Framework">Section&nbsp;5.8, &#8220;The GUI Framework&#8221;</a>.
</p></li><li><p>Help system</p><a class="indexterm" name="d0e1864"></a><p>
Not yet implemented.
</p><p>
This is the component that the other components can call
to present some help for the user.
</p><p>
The Help System Component is described in detail in 
<a href="#help" title="5.9.&nbsp;Help System">Section&nbsp;5.9, &#8220;Help System&#8221;</a>.
</p></li></ul></div><p>
</p><p>
        </p><div class="mediaobject"><img src="images/cookbook/Layer1.gif"></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="layer2"></a>4.6.&nbsp;Layer 2 - Description of components</h2></div></div><div></div></div><p>
These components rely on components of layer 1 in order to do their
work.
</p><p>
        </p><div class="itemizedlist"><ul type="disc"><li><p>Diagrams</p><a class="indexterm" name="d0e1893"></a><a class="indexterm" name="d0e1896"></a><p>
This is the diagram view of the model.
The notation is a property that belongs in the Diagrams
so the different language register their provided notation 
in the Diagrams component.
</p><p>
The Diagrams Component is described in detail in 
<a href="#diagrams" title="5.3.&nbsp;Diagrams">Section&nbsp;5.3, &#8220;Diagrams&#8221;</a>.
</p></li><li><p>Property panels</p><a class="indexterm" name="d0e1908"></a><p>
This is the prop panel view of the model.
</p><p>
The Property Panels Component is described in detail in 
<a href="#propertypanels" title="5.14.&nbsp;Property panels">Section&nbsp;5.14, &#8220;Property panels&#8221;</a>.
</p></li><li><p>Navigator Tree</p><a class="indexterm" name="d0e1920"></a><p>
This is the tree view of the model.
</p><p>
The Navigator Tree Component is described in detail in 
<a href="#navigatortree" title="5.15.&nbsp;Navigator tree">Section&nbsp;5.15, &#8220;Navigator tree&#8221;</a>.
</p></li><li><p>Code Generation</p><a class="indexterm" name="d0e1932"></a><p>
This is the common code for 
and the point where each language 
with Code Generation possibility registers.
</p><p>
The Code Generation Component is described in detail in 
<a href="#codegeneration" title="5.5.&nbsp;Code Generation Component">Section&nbsp;5.5, &#8220;Code Generation Component&#8221;</a>.
</p></li><li><p>Reverse Engineering</p><a class="indexterm" name="d0e1944"></a><p>
This is the common code for 
and the point where each language 
with Reverse Engineering possibility registers.
</p><p>
The Reverse Engineering Component is described in detail in 
<a href="#reverseengineering" title="5.4.&nbsp;Reverse Engineering Component">Section&nbsp;5.4, &#8220;Reverse Engineering Component&#8221;</a>.
</p></li><li><p>Module loader</p><a class="indexterm" name="d0e1956"></a><a class="indexterm" name="d0e1959"></a><p>
This is the load mechanism for loading all Layer 3 components and
other modules into ArgoUML.
</p><p>
The Module Loader Component is described in detail in 
<a href="#moduleloader" title="5.16.&nbsp;Module loader">Section&nbsp;5.16, &#8220;Module loader&#8221;</a>.
</p></li></ul></div><p>
</p><p>
        </p><div class="mediaobject"><img src="images/cookbook/Layer2.gif"></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="layer3"></a>4.7.&nbsp;Layer 3 - Description of components</h2></div></div><div></div></div><p>
These components are primarily connected through the 
pluggable interfaces meaning that they can be
individually disabled using the module loader.
</p><p>
	</p><div class="itemizedlist"><ul type="disc"><li><p>Java Code generation, Reverse engineering</p><a class="indexterm" name="d0e1986"></a><p>
This is the ArgoUML connection to the java language.
</p><p>
The Java Component is described in detail in 
<a href="#java" title="5.6.&nbsp;Java - Code generations and Reverse Engineering">Section&nbsp;5.6, &#8220;Java - Code generations and Reverse Engineering&#8221;</a>.
</p></li><li><p>Other languages - Code generation, Reverse engineering</p><p>
Languages are plugged into 
the notation,
the import (reverse engineering), 
and code generation.
</p><p>
See <a href="#otherlanguages" title="5.7.&nbsp;Other languages">Section&nbsp;5.7, &#8220;Other languages&#8221;</a>.
</p></li><li><p>Critics and checklists</p><a class="indexterm" name="d0e2007"></a><a class="indexterm" name="d0e2010"></a><p>
This is the critics.
</p><p>
The Critics Component is described in detail in 
<a href="#critics" title="5.2.&nbsp;Critics and other cognitive tools">Section&nbsp;5.2, &#8220;Critics and other cognitive tools&#8221;</a>.
</p></li><li><p>OCL</p><a class="indexterm" name="d0e2022"></a><p>
This is the editing of the OCL strings.
</p><p>
The OCL Component is described in detail in 
<a href="#ocl" title="5.17.&nbsp;OCL">Section&nbsp;5.17, &#8220;OCL&#8221;</a>.
</p></li></ul></div><p>
</p><p>
        </p><div class="mediaobject"><img src="images/cookbook/Layer3.gif"></div><p>
</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="inside_components"></a>Chapter&nbsp;5.&nbsp;Inside the components</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>5.1. <a href="#model">Model</a></dt><dd><dl><dt>5.1.1. <a href="#d0e2119">Factories</a></dt><dt>5.1.2. <a href="#d0e2154">Helpers</a></dt><dt>5.1.3. <a href="#d0e2174">The model event pump</a></dt><dt>5.1.4. <a href="#howdoi_model">How do I...?</a></dt></dl></dd><dt>5.2. <a href="#critics">Critics and other cognitive tools</a></dt><dd><dl><dt>5.2.1. <a href="#d0e2372">Main classes</a></dt><dt>5.2.2. <a href="#howdoi_critics">How do I ...?</a></dt><dt>5.2.3. <a href="#d0e2650">org.argouml.cognitive.critics.* class diagram</a></dt></dl></dd><dt>5.3. <a href="#diagrams">Diagrams</a></dt><dd><dl><dt>5.3.1. <a href="#howdoi_diagrams">How do I add a new element to a diagram?</a></dt><dt>5.3.2. <a href="#d0e2697">Adding the property panel</a></dt><dt>5.3.3. <a href="#d0e4194">How to add a new Fig</a></dt></dl></dd><dt>5.4. <a href="#reverseengineering">Reverse Engineering Component</a></dt><dt>5.5. <a href="#codegeneration">Code Generation Component</a></dt><dt>5.6. <a href="#java">Java - Code generations and Reverse Engineering</a></dt><dd><dl><dt>5.6.1. <a href="#howdoi_reverse">How do I ...?</a></dt><dt>5.6.2. <a href="#d0e4405">Which sources are involved?</a></dt><dt>5.6.3. <a href="#d0e4412">How is the grammar of the target language implemented?</a></dt><dt>5.6.4. <a href="#d0e4420">Which model/diagram elements are generated?</a></dt><dt>5.6.5. <a href="#d0e4425">Which layout algorithm is used?</a></dt></dl></dd><dt>5.7. <a href="#otherlanguages">Other languages</a></dt><dt>5.8. <a href="#guiframework">The GUI Framework</a></dt><dd><dl><dt>5.8.1. <a href="#d0e4556">Multi editor pane</a></dt><dt>5.8.2. <a href="#d0e4591">Details pane</a></dt></dl></dd><dt>5.9. <a href="#help">Help System</a></dt><dt>5.10. <a href="#internationalization">Internationalization</a></dt><dd><dl><dt>5.10.1. <a href="#d0e4700">Organizing translators</a></dt><dt>5.10.2. <a href="#d0e4745">Ambitions for localization</a></dt><dt>5.10.3. <a href="#howdoi_internationalization">How do I ...?</a></dt></dl></dd><dt>5.11. <a href="#logging">Logging</a></dt><dd><dl><dt>5.11.1. <a href="#d0e4984">What to Log in ArgoUML</a></dt><dt>5.11.2. <a href="#d0e5012">How to Create Log Entries...</a></dt><dt>5.11.3. <a href="#d0e5061">How to Enable Logging...</a></dt><dt>5.11.4. <a href="#d0e5176">How to Customize Logging...</a></dt><dt>5.11.5. <a href="#d0e5187">References</a></dt></dl></dd><dt>5.12. <a href="#jre">JRE with utils</a></dt><dt>5.13. <a href="#todoitems">To do items</a></dt><dt>5.14. <a href="#propertypanels">Property panels</a></dt><dt>5.15. <a href="#navigatortree">Navigator tree</a></dt><dd><dl><dt>5.15.1. <a href="#d0e5276">Details of current implementation</a></dt><dt>5.15.2. <a href="#d0e5297">Requirements</a></dt><dt>5.15.3. <a href="#d0e5331">Key Classes</a></dt><dt>5.15.4. <a href="#d0e5384">How do I ...?</a></dt></dl></dd><dt>5.16. <a href="#moduleloader">Module loader</a></dt><dd><dl><dt>5.16.1. <a href="#d0e5456">What the ModuleLoader does</a></dt></dl></dd><dt>5.17. <a href="#ocl">OCL</a></dt></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left">Warning</th></tr><tr><td colspan="2" align="left" valign="top"><p>
This chapter is currently under rework with new component organization.
</p></td></tr></table></div><p>...</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="model"></a>5.1.&nbsp;Model</h2></div></div><div></div></div><p><a name="comp-model-purpose"></a>
Purpose - to provide the data structures that keep track of the model
and the diagrams. 
This comes with a complete set of methods to modify the model
and register interest in changes to the model.
</p><p>
The Model is located in <tt class="classname">org.argouml.model</tt>.
</p><p>
The Model is a Layer 1 component. See <a href="#layer1" title="4.5.&nbsp;Layer 1 - Description of components">Section&nbsp;4.5, &#8220;Layer 1 - Description of components&#8221;</a>.
</p><p>
This is implemented using NSUML to implement the UML model.
</p><p>
ArgoUML uses several factories and helperclasses to manipulate the NSUML
model. 
The NSUML model itself does not define enough 'business' logic
to be directly used and the factories and helperclasses provide a
centralized place for accessing this 'business' logic.
Per section of chapter 2 of the UML 1.3 specification there is one factory
and one helper. They are placed in their own packages. The package name
convention is:
<tt class="classname">org.argouml.model.uml.SECTIONNAME</tt>
where sectionname is one of the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>foundation</p></li><li><p>foundation.core</p></li><li><p>foundation.extensionmechanisms</p></li><li><p>foundation.datatypes</p></li><li><p>behavioralelements</p></li><li><p>behavioralelements.commonbehavior</p></li><li><p>behavioralelements.statemachines</p></li><li><p>behavioralelements.usecases</p></li><li><p>behavioralelements.collaborations</p></li><li><p>behavioralelements.activitygraphs</p></li><li><p>modelmanagement</p></li></ul></div><p>
</p><p>
Each package has at least a helper and a factory in it.
The factories contain all methods that deal with
creating and building modelelements.
The helpers contain all utility methods needed to manipulate
the modelelements.
</p><p>
Both helpers and factories are singletons.
The static method to access them is
<tt class="methodname">getFactory</tt> for the factory
and <tt class="methodname">getHelper</tt> for the helper.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2119"></a>5.1.1.&nbsp;Factories</h3></div></div><div></div></div><p>
The factories contain at least for each modelelement a create method.
Example: <tt class="methodname">createClass</tt>
resides in <tt class="classname">CoreFactory</tt> in the package
<tt class="classname">org.argouml.model.uml.foundation.core</tt>.
Besides that, there are several buildmethods to build classes.
The build methods have a signature like
<code class="methodsynopsis"><span class="modifier">public&nbsp;</span><span class="type">MODELELEMENT&nbsp;</span><span class="methodname">buildMODELELEMENTNAME</span>(<span class="methodparam"><span class="parameter">params</span></span>);</code>.
</p><p>
Each build method verifies the wellformednessrules
as defined in the UML spec 1.3.
The reason for this is that NS-UML does not enforce
the wellformedness rules even though non-wellformed UML can lead to
non-wellformed XMI which leads to saving/loading issues and
all kinds of illegal states of argouml.
</p><p>
If you want to create an element you shall use the create methods
in the factories.
You are strongly advised to use a build method or, if there is
none that suits your needs, to build one thereby reusing the allready
existing build methods and utility methods in the helpers.
One reason for this is that the eventlisteners for
the newly created modelelement are setup correctly.
</p><p>
TODO: Am I allowed to call the factories from any thread?
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2154"></a>5.1.2.&nbsp;Helpers</h3></div></div><div></div></div><p>
The helpers contain all utility methods for manipulating modelelements.
For example, they contain methods to get all modelelements
of a certain class out of the model
(see <tt class="methodname">getAllModelelementsOfKind</tt> in 
<tt class="classname">ModelmanagementHelper</tt>).
</p><p>
To find a utility method you need to know where it is.
As a rule of thumb, a utility method for some modelelement 
is defined in the helper that corresponds with the section
in the UML specification.
For example, all utility methods for manipulating classes 
are defined in <tt class="classname">CoreHelper</tt>.
</p><p>
There are a few exceptions to this rule, mainly if 
the utility method deals with two modelelements 
that correspond to different sections in the UML
specification.
Then you have to look in both corresponding helpers and you
will probably find what you are searching for.
</p><p>
TODO: Am I allowed to call the helpers from any thread?
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2174"></a>5.1.3.&nbsp;The model event pump</h3></div></div><div></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2177"></a>5.1.3.1.&nbsp;Introduction</h4></div></div><div></div></div><p>
Late 2002, the ArgoUML community decided for the introduction of a clean
interface between the NSUML model and the rest of ArgoUML.
This interface consists of three parts:
</p><div class="orderedlist"><ol type="1"><li><p>
The model factories, responsible for creation and deletion of modelelements
</p></li><li><p>
The model helpers, responsible for utility functions to manipulate the
modelelements and
</p></li><li><p>
The model event pump, responsible for sending model events to the rest
of ArgoUML.
</p></li></ol></div><p>
</p><p>
In other paragraphs the model factories and the model helpers are
already introduced.
Therefore we won't discuss them here again.
</p><p>
The model event pump is the gateway between the model elements and the
rest of ArgoUML.
Events fired by the modelelements are catched by the pump and then
'pumped' to those listeners interested in them.
The main advantage of this model is that the registration of listeners
is concentrated in one place (see picture *).
This makes it easier to change the interface between the model and the
rest of argouml.
</p><p>
Besides this, there are some improvements to the performance of the
pump made in comparision to the situation without the pump.
The main improvement is that you can register for just one type of
event and not for all events fired by some modelelement.
</p><p>
</p><div class="mediaobject"><img src="images/cookbook/eventsbeforepump.gif"></div><p>
</p><p>
</p><div class="mediaobject"><img src="images/cookbook/eventsafterpump.gif"></div><p>
</p><p>
The model event pump will replace all other event mechanisms for model
events in the future.
These mechanisms (like UMLChangeDispatch and ThirdPartyEventlisteners
for those who are interested) are DEPRECATED.
Do not use them therefore and do not use classes that use them.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2213"></a>5.1.3.2.&nbsp;Public API</h4></div></div><div></div></div><p>
You might wonder: how does this all work?
Well, very simple in fact.
</p><p>
A modelevent (from now on a MEvent) has a name that uniquely
identifies the type of the event.

In most cases the name of the MEvent is equal to the name of the
property that was changed in the model.

In fact, there is even a 1-1 relationship between the type of MEvent
and the property changed in the model.

Therefore most listeners that need MEvents are only interested in one
type of MEvent since they are only interested in the status of 1
property.
</p><p>
TODO: What thread will I receive my event in? 
What locks will be held by the Model while I receive my event i.e.
is there something I cannot do from the event thread?
</p><p>
In the case described above (the most common one) you only have to
subscribe with the pump for that type of event.
This is explained in section <a href="#pump-register-listener-for-type" title="5.1.3.2.1.&nbsp;&#xA;How do I register a listener for a certain type event&#xA;">Section&nbsp;5.1.3.2.1, &#8220;
How do I register a listener for a certain type event
&#8221;</a>
and <a href="#pump-remove-listener-for-event" title="5.1.3.2.2.&nbsp;How do I remove a listener for a certain event">Section&nbsp;5.1.3.2.2, &#8220;How do I remove a listener for a certain event&#8221;</a>
</p><p>
Besides the case that you are interested in only one type of event (or
a set of types), there are occasions that you are interested in all
events fired by a certain modelelement or even for all events fired by
a certain type of modelelement.

For these cases, the pump has functionality too.

This is described in section 
<a href="#pump-methods-for-adding-and-removing" title="5.1.3.2.3.&nbsp;&#xA;Hey, I saw some other methods for adding and removing?&#xA;">Section&nbsp;5.1.3.2.3, &#8220;
Hey, I saw some other methods for adding and removing?
&#8221;</a>.
</p><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="pump-register-listener-for-type"></a>5.1.3.2.1.&nbsp;
How do I register a listener for a certain type event
</h5></div></div><div></div></div><p>
This is really very simple. Use the model
</p><pre class="programlisting">
addModelEventListener(MElementListener listener, MBase modelelement, String eventName)
</pre><p>
like this:
</p><pre class="programlisting">
UmlModelEventPump.getPump().addModelEventListener(this, modelelementIAmInterestedIn, "IamInterestedInThisEventnameType");
</pre><p>
Now your object this gets only the <tt class="classname">MEvents</tt>
fired by modelElementIAmInterestedIn that have the name
"IamInterestedInThisEventnameType".
</p></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="pump-remove-listener-for-event"></a>5.1.3.2.2.&nbsp;How do I remove a listener for a certain event</h5></div></div><div></div></div><p>
This is the opposite of registering a listener. It all works with the
method
</p><pre class="programlisting">
removeModelEventListener(MElementListener listener, MBase modelElement, String eventName)
</pre><p>
on <tt class="classname">UmlModelEventPump</tt> like this:
</p><pre class="programlisting">
UmlModelEventPump.getPump().removeModelEventListener(this, modelelementIAmInterestedIn, "IamInterestedInThisEventnameType");
</pre><p>
Now your object is not registered any more for this event type. 
</p></div><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="pump-methods-for-adding-and-removing"></a>5.1.3.2.3.&nbsp;
Hey, I saw some other methods for adding and removing?
</h5></div></div><div></div></div><p>
Yes there are some other method for adding and removing. 

You can add a listener that is interested in ALL events fired by a
certain modelelements.

This works with the method:
</p><pre class="programlisting">
addModelEventListener(MElementListener listener, MBase modelelement)
</pre><p>
As you can see no names of events you can register for here.
</p><p>
Furthermore, you can add a listener that is interested in several
types of events but coming from 1 modelelement.

This is a convenience method for not having to call the methods
explained in section
<a href="#pump-register-listener-for-type" title="5.1.3.2.1.&nbsp;&#xA;How do I register a listener for a certain type event&#xA;">Section&nbsp;5.1.3.2.1, &#8220;
How do I register a listener for a certain type event
&#8221;</a>
more than once.

It works via:
</p><pre class="programlisting">
addModelEventListener(MElementListener listener, MBase modelelement, String[] eventNames)
</pre><p>
</p><p>
You can pass the method an array of strings with eventnames in which
your listener is interested.
</p><p>
Thirdly there is a very powerfull method to register your listener to
ALL events fired by a ALL modelelements of a certain class.

You can understand that using this method can have severe performance
impacts.
Therefore use it with care. 

The method is:
</p><pre class="programlisting">
addClassModelEventListener(MElementListener listener, Class modelClass)
</pre><p>
There are also methods that allow you to register only for one type of
event fired by all modelelements of a certain class and to register
for a set of types of events fired by all modelements of a certain
class.
</p><p>
Of course you can remove your listeners from the event pump. 
This works with methods starting with remove instead of add.
</p></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2284"></a>5.1.3.3.&nbsp;Tips</h4></div></div><div></div></div><div class="orderedlist"><ol type="1"><li><p>
Don't forget to remove your listener from the eventpump if it's not
interested in some event any more.
</p><p>
If you do not remove it, that's gonna cost performance and it will
give you a hard time to debug all the logical bugs you see in your
listener.
</p></li><li><p>
When you implement your listener, it is wise to NOT DO the following:
</p><pre class="programlisting">
propertyChanged(MElementEvent event) {
      // do my thing for event type 1
      // do my thing for event type 2
      // etc.
}
</pre><p>
</p><p>
This will cause the things that need to be done for event type 1 to be
fired when event type 2 do arrive.
</p><p>
This still happens at a lot of places in the code of ArgoUML, most
notably in the modelChanged method of the children of
FigEdgeModelElement.
</p></li></ol></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2303"></a>5.1.3.4.&nbsp;The future</h4></div></div><div></div></div><p>
Some people might wonder if we cannot make a better interface between
the model and the rest of ArgoUML if we use our own event types.

These people are right. 

There are plans to replace the MElementListener with
PropertyChangeListeners and using the PropertyChangeEvents instead of
the MElementEvent.

This has not been done yet since this involves a lot of work and
testing.
</p><p>
Next to this, it is likely that the implementation of the Event pump
itself is going to change.

Not the API but the implementation! At the moment the event pump does
not use the AWT Event Thread for dispatching events.

This can make argouml slow (in the perception of the user). 
</p><p>
Besides that, the current implementation does not use the standard
data structure that Swing uses for event registriation
(i.e. <tt class="classname">javax.swing.EventListenerList</tt>).

We are in the process of researching if it is a good thing to use this
standard instead of our own implementation.
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="howdoi_model"></a>5.1.4.&nbsp;How do I...?</h3></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>...create a new create method?</p><p>
Create it in the correct factory.
</p></li><li><p>...create a new utility method?</p><p>
Create it in the correct helper.
</p></li></ul></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="critics"></a>5.2.&nbsp;Critics and other cognitive tools</h2></div></div><div></div></div><a class="indexterm" name="d0e2335"></a><a class="indexterm" name="d0e2338"></a><a class="indexterm" name="d0e2341"></a><p><a name="comp-critics-purpose"></a>
Purpose - to provide cognitive help for the User.
This help is based on the current model that the User works with.
</p><p>
The Critics are located in <tt class="classname">org.argouml.cognitive</tt>.
</p><p>
The Critics is a Layer 3 component. See <a href="#layer3" title="4.7.&nbsp;Layer 3 - Description of components">Section&nbsp;4.7, &#8220;Layer 3 - Description of components&#8221;</a>.
</p><p>
The Critics component depends on the Model that it works against to take
all decisions
and the To Do Items used to present the information.
</p><p>
This component contains the following main class types:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Critics provide help to find artifacts in
the model that do not obey simple design "rules" or
"best practises".
</p></li><li><p>
Checklists provide help for the user to suggest and
keep track of considerations that the user should make
for each design element.
Checklists are currently (0.9.5 and 0.9.6) turned off.
</p></li><li><p>
ToDoItems provide a way for the Critics to communicate
their knowledge to the User and let the User start Wizards.
</p></li><li><p>
Wizards are step by step instructions that fix problems
found by the Critics.
</p></li></ul></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2372"></a>5.2.1.&nbsp;Main classes</h3></div></div><div></div></div><p>Here is an illustration of the main classes implementing critics</p><div class="mediaobject"><img src="images/cookbook/critics.gif"></div><p>Critics are currently located in:
</p><div class="itemizedlist"><ul type="disc"><li><p>org.argouml.cognitive.critics</p><p>
These are basic critics, which are very general in nature. For example
ArgoUML keeps nagging when Modelelements overlap, which makes the
Diagram hard to read.
</p><p>
This package also contains the base classes for the handling.
</p></li><li><p>org.argouml.uml.cognitive.critics</p><p>
These are Critics which are directly related to UML issues (well, more
or less). For example, it will nag when a class has too many
operations, because that makes it hard to maintain the particular
class.
</p><p>
This package also contains Wizards used by these Critiques.
</p></li><li><p>org.argouml.pattern.cognitive.critics</p><p>These are critics related to patterns. Currently they deal only with the Singleton pattern</p></li><li><p>org.argouml.language.java.cognitive.critics</p><p>These are critics which deal with java specific issues. Currently this is only a warning agains modelling multiple inheritance.</p></li></ul></div><p>
</p><p>
The Base class for Wizards is <tt class="classname">org.argouml.kernel.Wizard</tt>.
</p><p>
Checklists are located in the package org.argouml.cognitive.checklist.
</p><p>
Helper classes for To Do Items, To Do Pane, Wizards and the Knowledge Types
are located in the package org.argouml.cognitive.ui.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="howdoi_critics"></a>5.2.2.&nbsp;How do I ...?</h3></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>...create a new critique?</p><p>
Currently the only way to add a new critique is to write a class that
implements it so that is described here.
There have however been ideas on a possibility to build critics in
some other way in the future, as a set of rules instead of java code.
</p><p>
Create a new critic class, of the form 
<tt class="classname">Cr<i class="replaceable"><tt>XxxxYyyyZzzz</tt></i></tt>, 
extending <tt class="classname">CrUML</tt>.
Typically your new class will go in the package
<tt class="classname">org.argouml.uml.cognitive.critics</tt>,
but it could go in one of the other
<tt class="classname">cognitive.critics</tt> packages.
</p><p>
Write a constructor, which takes no argouments and calls the following
methods of <tt class="classname">CrUML</tt>:
</p><div class="itemizedlist"><ul type="circle"><li><p>
<b class="command">setResource("Cr<i class="replaceable"><tt>XxxxYyyyZzzz</tt></i>");</b>
to set up the locale specific text for 
the critic headline (the one liner that appears in the to-do pane)
and
the critic description (the detailed explanation that appears in 
the to-do tab of the details pane).
</p></li><li><p>
<b class="command">addSupportedDecision(CrUML.dec<i class="replaceable"><tt>AAAA</tt></i>);</b>
where <i class="replaceable"><tt>AAAA</tt></i> is the design issue category
this critic falls into
(examples include STORAGE, PATTERN METHODS).
</p></li><li><p>
<b class="command">setPriority(ToDoItem.<i class="replaceable"><tt>BBB</tt></i>_PRIORITY);</b>
where <i class="replaceable"><tt>BBB</tt></i> is one of
<tt class="constant">LOW</tt>, <tt class="constant">MEDIUM</tt> or 
<tt class="constant">HIGH</tt>, to set the priority for the critic 
in the to-do pane.
</p></li><li><p>
<b class="command">addTrigger("<i class="replaceable"><tt>UML MetaClass</tt></i>");</b>
where <i class="replaceable"><tt>UML MetaClass</tt></i> is a UML MetaClass,
with initial lower capital, e.g. "associationEnd".
The intention is that critics should only trigger for elements (or
children) of particular UML metaclasses.
I (Jeremy Bennett february 2002) believe this code is not yet working
so you can probably leave it out.
You can have multiple calls to this method for different metaclasses.
</p></li></ul></div><p>
After this add a method 
<b class="command">public boolean predicate2(Object dm, Designer dsgr);</b>.
This is the decision routine for the critic.
<i class="parameter"><tt>dm</tt></i> is the UML entity (an NSUML object)
that is being checked.
The second argument, <i class="parameter"><tt>dsgr</tt></i> is for future
development and can be ignored.
The <tt class="classname">Critic</tt> class conveniently defines
two boolean constants 
<tt class="constant">NO_PROBLEM</tt> and 
<tt class="constant">PROBLEM_FOUND</tt> to be returned
according to whether the object is OK, or triggers the critic.
</p><p>
<i class="parameter"><tt>dm</tt></i> may be any UML object, 
so the first action is to see if it is an
artifact of interest and if not return 
<tt class="constant">NO_PROBLEM</tt>.
</p><p>
The remaining code should examine <i class="parameter"><tt>dm</tt></i> and
return <tt class="constant">NO_PROBLEM</tt> or
<tt class="constant">PROBLEM_FOUND</tt> as appropriate.
</p><p>
Having written the code you need to add the text for the headline and
description to the cognitive resource bundles. 
These are in the package 
<tt class="classname">org.argouml.i18n</tt>, 
in the file
<tt class="filename">UMLCognitiveResourceBundle.java</tt>.
You need to add two keys for the head and description,
which will be named respectively
<tt class="constant">Cr<i class="replaceable"><tt>XxxxYyyyZzzz</tt></i>_head</tt>
and
<tt class="constant">Cr<i class="replaceable"><tt>XxxxYyyyZzzz</tt></i>_desc</tt>.
There are plenty of examples to look at there.
The other files 
(<tt class="filename">UMLCognitiveResourceBundle_en_GB.java</tt>,
<tt class="filename">UMLCognitiveResourceBundle_es.java</tt>, ...
for
British English,
Spanish, ...
respectively)
are the responsibility of the corresponding language team.
Notify the language teams that there is work to be done.
</p><p>
In method <tt class="methodname">Init</tt>
of the class <tt class="classname">org.argouml.uml.cognitive.critics.Init</tt>, 
add two statements:
</p><pre class="programlisting">
  public static Critic <i class="replaceable"><tt>crXxxxxYyyyZzzz</tt></i> = new <i class="replaceable"><tt>CrXxxxxYyyyZzzz</tt></i>();
...
  Agency.register(<i class="replaceable"><tt>crXxxxxYyyyZzzz</tt></i>, <i class="replaceable"><tt>DesignMaterialCls</tt></i>);
</pre><p>
If you want to add a critic to a design material 
which is not already declared (for example the Extend class), 
you will have to add a third statement to the 
<tt class="methodname">Init</tt> method as well, which is:
</p><pre class="programlisting">
  java.lang.Class <i class="replaceable"><tt>XxxYyyyZzCls</tt></i> = <i class="replaceable"><tt>MXxxYyyyZzImpl</tt></i>.class;
</pre><p>
where <i class="replaceable"><tt>MXxxYyyyZzImpl</tt></i>.class should be part of the NovoSoft UML package.
</p><p>
Finally you should get a new section added to the user manual reference
section on critics.
The purpose of this is to collect all the details and rationale around
this critic to complement the short text in the description.
It should go in the ref_critics.xml file and have an id tag
named critics.<i class="replaceable"><tt>CrXxxYyyyZzzz</tt></i>.
</p></li><li><p>...write the test in a critique?</p><p>
The critiques tests are essentially a combination of conditions 
that are to be fulfilled.
The conditions are often simple tests on simple model elements.
</p><p>
The class
<tt class="classname">org.argouml.cognitive.critics.CriticUtils</tt>
contains static routines that are commonly needed when writing
<tt class="methodname">predicate2</tt>
(for example to test if a class has a constructor).
If you find you are writing code that may be of wider use than just
your critic, you should add it to
<tt class="classname">CriticUtils</tt>
rather than putting it in your critic.
</p><p>
For commented examples to copy, look at
<tt class="classname">org.argouml.pattern.cognitive.critics.CrConsiderSingleton</tt>,
<tt class="classname">org.argouml.pattern.cognitive.critics.CrSingletonViolated</tt> and
<tt class="classname">org.argouml.uml.cognitive.critics.CrConstructorNeeded</tt>.
</p></li><li><p>...fix a critique?</p><p>Locate the critique and insert some logging code. You should make sure that you understand all the implications of changes, therefore it is a good idea to see what makes the critic nag in the first place. But rest assured: some of the critics haven't been updated to reflect the latest changes in ArgoUML, so this is a procedure which is well worth digging into, since it gives you also some exposure to related NSUML elements.</p></li><li><p>...change the text of a critique?</p><p>
The texts of the critics should be in the according localization files
and resource bundles. Be careful: in some critics the text is still in
the critic, but if you change that, you will notice that it doesn't
have any effect.
</p></li></ul></div><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2650"></a>5.2.3.&nbsp;org.argouml.cognitive.critics.* class diagram</h3></div></div><div></div></div><div class="mediaobject"><img src="images/screenshots/argocogcriticsreduced.png"></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="diagrams"></a>5.3.&nbsp;Diagrams</h2></div></div><div></div></div><a class="indexterm" name="d0e2661"></a><p>
Purpose - to generate a graphical view of the diagrams in the model with
tools.
The contents of the diagrams and model is modifyable.
TODO: Notation!
</p><p>
The Diagrams will be located in <tt class="classname">org.argouml.???</tt>.
</p><p>
The Diagrams is a Layer 2 component. <a href="#layer2" title="4.6.&nbsp;Layer 2 - Description of components">Section&nbsp;4.6, &#8220;Layer 2 - Description of components&#8221;</a>.
</p><p>
The Diagrams are depending on the Model and the GUI framework.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="howdoi_diagrams"></a>5.3.1.&nbsp;How do I add a new element to a diagram?</h3></div></div><div></div></div><p>
To add a new element to a diagram, two main things have to be done.
</p><div class="orderedlist"><ol type="1"><li><p>
Create a new property panel class that will be displayed in
the property tab windown on the details pane.
</p></li><li><p>
Create new Fig classes to represent the element on the
diagram and add them to the graph model and renderer.
</p></li></ol></div><p>
Throughout we shall use the example of adding the UML Extend
relationship to a use case diagram. This allows two Use Cases to be
joined by a dotted arrow labelled
<tt class="literal">&laquo;extend&raquo;</tt> to show that one extends the
behavior of the other.
</p><p>
The classes involved in this particular example have all been well
commented and have full Javadoc descriptions, to help when examining
the code. 
You will need to read the description here in conjunction
with looking at the code.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2697"></a>5.3.2.&nbsp;Adding the property panel</h3></div></div><div></div></div><p>
Property Panels are found as class PropPanelXXX.java, where XXX is the
UML metaclass. They are in sub-packages of org.argouml.uml.ui
corresponding to the XXX NSUML packages, which in turn correspond to
their section in the chapter 2 of the UML 1.3 spec. This packaging is
essential for their lookup through Java reflection.
</p><p>
So for our example we create a new class
<tt class="literal">PropPanelExtend</tt> in package
<tt class="literal">org.argouml.uml.ui.behavior.use_cases</tt>.
</p><p>
Any associated classes that do not fall into the NSUML classification
are provided in org.argouml.uml.ui.
</p><p>
Typically the constructor for the new class invokes the parent
constructor, and then builds the fields required on the property
tab. The parent constructor may need an icon. If you need a new icon,
it should be placed in <tt class="literal">org/argouml/Images</tt> and a
call to <tt class="literal">ResourceLoader.lookupIconResource()</tt> made
(note this is a method of a GEF class). This is usually added to
<tt class="literal">PropPanelModelElement</tt>. For our example we have had
to add <tt class="literal">Extend.gif</tt>.
</p><p>
Finally the property panel must be added to the list of property
panels in the <tt class="literal">run()</tt> method of the
<tt class="literal">TabProps</tt> class, with a new call of
<tt class="literal">_panels.put()</tt>. If you don't do this, navigation
listeners won't know about it!
</p><p>
The property panel is created as a grid with a predefined number of
columns (2 if there are only a few fields, 3 if there are a lot). Into
each row of each column is placed a caption and a corresponding
field.
</p><p>
Adding a caption or field is through one of a small number of utility
methods which require you to specify which column and which row and
also a <tt class="literal">weighty</tt> parameter to specify the amount of
padding to be added when fields are stretched to fit a
column. Vertical padding is distributed in proportion to
<tt class="literal">weighty</tt> amongst all fields in the column that have
non-zero <tt class="literal">weighty</tt> values.
</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td colspan="2" align="left" valign="top"><p>
You should always ensure at least one field or caption in each column
has a non-zero value for <tt class="literal">weighty</tt>. If you wish
everything fixed size and floated to the top, make the value for the
final caption in the column non-zero.
</p></td></tr></table></div><p>
Every field is built from Java Swing components. However these are
extended by ArgoUML to help in the provision of action methods for
fields in the property tab. Several fields involve lists, and these
require in addition list models to compute the members of the
list.
</p><p>
The fields that you might add to a property panel include.
</p><div class="itemizedlist"><ul type="disc"><li><p>
Simple editable text. For example the Name
field. Supported through the <tt class="literal">UMLTextField</tt>
class.
</p></li><li><p>
A drop down box of options that can be selected, with an icon to the
right allowing navigation to the property panel for the currently
selected item. For example the Stereotype field. Supported in general
by the <tt class="literal">UMLComboBox</tt> class and more speficically by
its subclass for stereotypes,
<tt class="literal">UMLStereotypeComboBox</tt>.
</p></li><li><p>
A non-editable text box, with a pop-up menu that allows opening,
addition, deletion, moving up and moving down of entries. For example
the Generalizations field. Supported by the <tt class="literal">UMLList</tt>
class. The list model is usually provided by a sub-class of
<tt class="literal">UMLModelElementListModel</tt>. There is a varient
<tt class="literal">UMLModelElementListLinkModel</tt> which adds a link
option to the pop-up menu, allowing connection to existing model
elements (used for the Extension Points field for
example).
</p></li><li><p>
A set of check boxes for modifiers. Supported by the
<tt class="literal">PropPanelModifiers</tt> class.
</p></li></ul></div><p>Examples of these in more detail now follow.</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2796"></a>5.3.2.1.&nbsp;Adding a simple list field</h4></div></div><div></div></div><p>
For example we need to add a field to the use case property panel for
the extends relationships that derive from this use case.
</p><p>
This field consists of a label and a scrollable pane
(<tt class="literal">JScrollPane</tt>) containing the list
(<tt class="literal">JList</tt>), possibly empty, or extends relationships
from this use case.
</p><p>
Rather than a straight <tt class="literal">JList</tt>, we use its child,
<tt class="literal">UMLList</tt>, which implements the
<tt class="literal">MouseListener</tt> and NSUML
<tt class="literal">ElementListener</tt> interfaces.
</p><p>
The constructor for <tt class="literal">UMLList</tt> requires two arguments,
a list model and a flag to indicate whether the list is navigable,
i.e. responds to the mouse.
</p><p>
The list model should be a subclass of
<tt class="literal">UMLModelElementListModel</tt>, a subclass of the Swing
<tt class="literal">AbstractListModel</tt> that implements the NSUML
<tt class="literal">ElementListener</tt> interface.
</p><div class="sect4" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2839"></a>5.3.2.1.1.&nbsp;The list model</h5></div></div><div></div></div><p>
In our example we create UMLExtendListModel. Its constructor should
take three arguments:
</p><div class="orderedlist"><ol type="1"><li><p>
The container, where this list is being built. I.e. the
<tt class="literal">PropPanelUseCase</tt> (from which we can then derive the
NSUML <tt class="literal">MUseCase</tt>, which is the &#8220;<span class="quote">target</span>&#8221;
of the extends relationship).
</p></li><li><p>
A string naming an NSUML event that should force a refresh of the list
model. A null value will cause all events to trigger a refresh. The
best way to identify the event you want to use is to look at the NSUML
source for the container object (<tt class="literal">MUseCaseImpl</tt> in
our example) for calls to <tt class="literal">fireXXX()</tt>. The first
argument is the name of the event (in our case
<tt class="literal">extend</tt>). There is no definitive list, but from the
NSUML source, these are all the names of events that are used:
</p><div class="itemizedlist"><ul type="disc"><li><p>action</p></li><li><p>actionSequence</p></li><li><p>activator</p></li><li><p>activityGraph</p></li><li><p>actualArgument</p></li><li><p>addition</p></li><li><p>aggregation</p></li><li><p>alias</p></li><li><p>annotatedElement</p></li><li><p>argument</p></li><li><p>association</p></li><li><p>associationEnd</p></li><li><p>associationEndRole</p></li><li><p>associationRole</p></li><li><p>attribute</p></li><li><p>attributeLink</p></li><li><p>availableContents</p></li><li><p>availableFeature</p></li><li><p>availableQualifier</p></li><li><p>base</p></li><li><p>baseClass</p></li><li><p>baseElement</p></li><li><p>behavior</p></li><li><p>behavioralFeature</p></li><li><p>binding</p></li><li><p>body</p></li><li><p>bound</p></li><li><p>callAction</p></li><li><p>changeability</p></li><li><p>changeExpression</p></li><li><p>child</p></li><li><p>classifier</p></li><li><p>classifierInState</p></li><li><p>classifierRole</p></li><li><p>classifierRole1</p></li><li><p>client</p></li><li><p>clientDependency</p></li><li><p>collaboration</p></li><li><p>collaboration1</p></li><li><p>comment</p></li><li><p>communicationConnection</p></li><li><p>communicationLink</p></li><li><p>componentInstance</p></li><li><p>concurrency</p></li><li><p>condition</p></li><li><p>connection</p></li><li><p>constrainedElement</p></li><li><p>constrainedElement2</p></li><li><p>constrainingElement</p></li><li><p>constraint</p></li><li><p>container</p></li><li><p>contents</p></li><li><p>context</p></li><li><p>createAction</p></li><li><p>defaultElement</p></li><li><p>defaultValue</p></li><li><p>deferrableEvent</p></li><li><p>deploymentLocation</p></li><li><p>discriminator</p></li><li><p>dispatchAction</p></li><li><p>doActivity</p></li><li><p>dynamicArguments</p></li><li><p>dynamicMultiplicity</p></li><li><p>effect</p></li><li><p>elementImport</p></li><li><p>elementImport2</p></li><li><p>elementResidence</p></li><li><p>entry</p></li><li><p>event</p></li><li><p>exit</p></li><li><p>expression</p></li><li><p>extend</p></li><li><p>extend2</p></li><li><p>extendedElement</p></li><li><p>extender</p></li><li><p>extenderID</p></li><li><p>extension</p></li><li><p>extensionPoint</p></li><li><p>feature</p></li><li><p>generalization</p></li><li><p>guard</p></li><li><p>icon</p></li><li><p>implementationLocation</p></li><li><p>include</p></li><li><p>include2</p></li><li><p>incoming</p></li><li><p>initialValue</p></li><li><p>instance</p></li><li><p>instantiation</p></li><li><p>inState</p></li><li><p>interaction</p></li><li><p>internalTransition</p></li><li><p>isAbstarct</p></li><li><p>isAbstract</p></li><li><p>isActive</p></li><li><p>isAsynchronous</p></li><li><p>isConcurent</p></li><li><p>isDynamic</p></li><li><p>isInstantiable</p></li><li><p>isLeaf</p></li><li><p>isNavigable</p></li><li><p>isQuery</p></li><li><p>isRoot</p></li><li><p>isSpecification</p></li><li><p>isSynch</p></li><li><p>kind</p></li><li><p>link</p></li><li><p>linkEnd</p></li><li><p>location</p></li><li><p>mapping</p></li><li><p>message</p></li><li><p>message1</p></li><li><p>message2</p></li><li><p>message3</p></li><li><p>message4</p></li><li><p>method</p></li><li><p>modelElement</p></li><li><p>modelElement2</p></li><li><p>multiplicity</p></li><li><p>name</p></li><li><p>namespace</p></li><li><p>nodeInstance</p></li><li><p>objectFlowState</p></li><li><p>occurrence</p></li><li><p>operation</p></li><li><p>ordering</p></li><li><p>outgoing</p></li><li><p>ownedElement</p></li><li><p>owner</p></li><li><p>ownerScope</p></li><li><p>package</p></li><li><p>parameter</p></li><li><p>parent</p></li><li><p>participant</p></li><li><p>partition</p></li><li><p>partition1</p></li><li><p>powertype</p></li><li><p>powertypeRange</p></li><li><p>predecessor</p></li><li><p>presentation</p></li><li><p>qualifiedValue</p></li><li><p>qualifier</p></li><li><p>raisedSignal</p></li><li><p>receiver</p></li><li><p>reception</p></li><li><p>recurrence</p></li><li><p>referenceState</p></li><li><p>representedClassifier</p></li><li><p>representedOperation</p></li><li><p>requiredTag</p></li><li><p>resident</p></li><li><p>residentElement</p></li><li><p>script</p></li><li><p>sendAction</p></li><li><p>sender</p></li><li><p>signal</p></li><li><p>slot</p></li><li><p>source</p></li><li><p>sourceFlow</p></li><li><p>specialization</p></li><li><p>specification</p></li><li><p>state</p></li><li><p>state1</p></li><li><p>state2</p></li><li><p>state3</p></li><li><p>stateMachine</p></li><li><p>stereotype</p></li><li><p>stereotypeConstraint</p></li><li><p>stimulus</p></li><li><p>stimulus1</p></li><li><p>stimulus2</p></li><li><p>stimulus3</p></li><li><p>structuralFeature</p></li><li><p>subject</p></li><li><p>submachine</p></li><li><p>submachineState</p></li><li><p>subvertex</p></li><li><p>supplier</p></li><li><p>supplierDependency</p></li><li><p>tag</p></li><li><p>taggedValue</p></li><li><p>target</p></li><li><p>targetFlow</p></li><li><p>targetScope</p></li><li><p>templateParameter</p></li><li><p>templateParameter2</p></li><li><p>templateParameter3</p></li><li><p>top</p></li><li><p>transition</p></li><li><p>trigger</p></li><li><p>type</p></li><li><p>useCase</p></li><li><p>value</p></li><li><p>visibility</p></li><li><p>when</p></li></ul></div></li><li><p>
A flag to indicate that a label &#8220;<span class="quote">none</span>&#8221;
should be used when the list is empty.
</p></li></ol></div><p>
Quite usually it is sufficient to just invoke the constructor of
the parent class.
</p><p>
This list model should then be provided with a number of methods. The
following are mandatory, since they are declared abstract in the
parent.
</p><div class="variablelist"><dl><dt><span class="term">
<tt class="literal">protected int recalcModelElementSize()</tt>
</span></dt><dd><p>
Recomputes the number of elements in the list (zero if empty).
</p></dd><dt><span class="term">
<tt class="literal">protected MModelElement getModelElementAt(int index)</tt>
</span></dt><dd><p>
Returns the element at the given index in the list, 
or null if there isn't one.
</p></dd></dl></div><p>
The following are sometimes provided as an override of the
parent, although for many uses the default is fine.
</p><div class="variablelist"><dl><dt><span class="term">
<tt class="literal">public void open(int index)</tt>
</span></dt><dd><p>
Perform the action associated with the &#8220;<span class="quote">open</span>&#8221; pop-up menu
on the element at the given index. The default provided in the parent
just navigates to that element.
</p></dd><dt><span class="term">
<tt class="literal">public boolean buildPopup(JPopupMenu popup, int index)</tt>
</span></dt><dd><p>
Build a pop-up menu for the list and return whether it should be
displayed. Any actions will be associated with the item at the given
index in the list.
This is built using <tt class="literal">UMLListMenuItem</tt>, which can
record the index, rather than plain <tt class="literal">JListItem</tt>. 
The default provides open, add, delete, move up and move down, with
add disabled if there are already as many elements as the upper bound
(if any) for the list, open and delete disabled if there are no
elements and move up and move down disabled if they cannot be invoked
on the given element.
The default implementation always returns true.
</p></dd></dl></div><p>
The following should be declared as needed to support particular
pop-up functions.
</p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">public void add(int index)</tt></span></dt><dd><p>
Perform the actions associated with the &#8220;<span class="quote">add</span>&#8221; pop-up menu
on the element at the given index.
There is no default provided, so this must be given if the
&#8220;<span class="quote">add</span>&#8221; operation is supported.
The <tt class="literal">addAtUtil()</tt> method (see below) may prove
helpful.
</p><p>
In this routine you may create a new NSUML entity.
There seem to be three ways to do this, in order of preference 1) use
a utility from the <tt class="literal">MMUtil</tt> class, 2) use the NSUML
Factory class to create what you want 3) use new on a
<tt class="literal">MXXXImpl</tt> class.
Whilst 1) is best, most of the <tt class="literal">MMUtil</tt> routines are
not yet general enough.
</p><p>
Be sure to set it up (don't forget e.g namespace etc).
Remember also to change anything that references the newly created
entity.
</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left">Warning</th></tr><tr><td colspan="2" align="left" valign="top"><p>
The NSUML routines generally set up the &#8220;<span class="quote">other</span>&#8221; end of a
relationship automatically if you set up one end.
If you try to do both (on a NxM relationship) you will probably end up
doing it twice.
If you do encounter this, the rule of thumb is to explicitly set the
ordered end (if you do it the other way round, NSUML will assume you
mean the "other" end to be at the end of its ordered
list).
</p></td></tr></table></div></dd><dt><span class="term"><tt class="literal">public void delete(int index)</tt></span></dt><dd><p>
Perform the actions associated with the &#8220;<span class="quote">delete</span>&#8221; pop-up
menu on the element at the given index.
There is no default provided, so this must be given if the
&#8220;<span class="quote">delete</span>&#8221; operation is supported.
</p></dd><dt><span class="term"><tt class="literal">public void moveUp(int index)</tt></span></dt><dd><p>
Perform the actions associated with the &#8220;<span class="quote">move up</span>&#8221; pop-up
menu on the element at the given index. 
There is no default provided, so this must be given if the &#8220;<span class="quote">move
up</span>&#8221; operation is supported.
</p></dd><dt><span class="term">
<tt class="literal">public void moveDown(int index)</tt>
</span></dt><dd><p>
Perform the actions associated with the &#8220;<span class="quote">move down</span>&#8221;
pop-up menu on the element at the given index.
There is no default provided, so this must be given if the &#8220;<span class="quote">move
down</span>&#8221; operation is supported.
</p></dd></dl></div><p>
The following normally use the default method, but may be
declared to override methods in the parent
</p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">public void resetSize()</tt></span></dt><dd><p>
Called when an external event may have changed the size of the
list.
The default just sets a flag, which will ensure recalcModelElementSize
(see above) is invoked as needed.
</p></dd><dt><span class="term">
<tt class="literal">public Object formatElement(MModelElement element)</tt></span></dt><dd><p>
Return an object (invariably a String) that represents an element. 
The default provided in the parent defers this to the container, which
in turn defers it to the current profile. 
This is usually perfectly satisfactory.
</p></dd><dt><span class="term"><tt class="literal">public void targetChanged()</tt></span></dt><dd><p>
Called when the number of elements in the displayed list (including
&#8220;<span class="quote">none</span>&#8221;) may have changed.
Default invokes the necessary Swing operations to advise of a change
in list size.
</p></dd><dt><span class="term">
<tt class="literal">public void targetReasserted()</tt>
</span></dt><dd><p>
Called when the navigation history has been changed (and navigation
buttons may need changing).
Not clear why anything is needed, but default recomputes the list
size, and invokes the necessary Swing operations.
</p></dd><dt><span class="term">
<tt class="literal">public void roleAdded(final MElementEvent event)</tt>
</span></dt><dd><p>
part of the NSUML EventListener interface.
Called when an add event happens, i.e. some NSUML object has been
added.
The default provided looks to see if the event is the role name we
declared, or we are listening to all events, and if so looks to see if
it relates to an element in our list. 
If so Swing is notified that the element has been
added.
</p></dd><dt><span class="term">
<tt class="literal">public void roleRemoved(final MElementEvent event)</tt>
</span></dt><dd><p>
part of the NSUML EventListener interface.
Called when a remove event happens, i.e. some NSUML object has been
removed.
The default provided looks to see if the event is the role name we
declared, or we are listening to all events, and if so looks to see if
it relates to an element in our list. 
If so Swing is notified that the element has been removed.
</p></dd><dt><span class="term">
<tt class="literal">public void recovered(final MElementEvent p1)</tt>
, </span><span class="term">
<tt class="literal">public void listRoleItemSet(final MElementEvent p1)</tt>
, </span><span class="term">
<tt class="literal">public void removed(final MElementEvent p1)</tt>
, </span><span class="term">
<tt class="literal">public void propertySet(final MElementEvent p1)</tt>
</span></dt><dd><p>
these are all required as part of the NSUML EventListener interface,
which is not well documented.
In each case the default implementation recomputes the size, and
advises Swing that the entire list has changed. 
Needs more investigation.
</p></dd><dt><span class="term">
<tt class="literal">public void navigateTo(MModelElement modelElement)</tt>
</span></dt><dd><p>
a request to navigate to the specified object as part of the
NavigationListener interface.

The default in the parent just invokes navigateTo() on the container
(ultimately PropPanel).
</p></dd></dl></div><p>
The following utility routines are also provided in the parent.
They are not normally overridden.
</p><div class="variablelist"><dl><dt><span class="term"><tt class="literal">public int getUpperBound()</tt></span></dt><dd><p>
get any upper bound (-1 is used if there is none).
</p></dd><dt><span class="term">
<tt class="literal">public void setUpperBound(int newBound)</tt>
</span></dt><dd><p>
set the upper bound (-1 is used if there is none).
</p></dd><dt><span class="term">
<tt class="literal">public final String getProperty()</tt>
</span></dt><dd><p>
returns the NSUML event name being monitored (null if all are being
monitored).
</p></dd><dt><span class="term">
<tt class="literal">protected final int getModelElementSize()</tt>
</span></dt><dd><p>
returns the number of elements in the list.
Invokes <tt class="literal">recalcModelElementSize()</tt> (see above) if
necessary.
</p></dd><dt><span class="term"><tt class="literal">final Object getTarget()</tt></span></dt><dd><p>
returns the NSUML object associated with the container (some child of
<tt class="literal">PropPanel</tt> usually) that holds this list
model.
</p></dd><dt><span class="term">
<tt class="literal">final UMLUserInterfaceContainer getContainer()</tt>
</span></dt><dd><p>
returns the the container (some child of <tt class="literal">PropPanel</tt>
usually) that holds this list model.
</p></dd><dt><span class="term"><tt class="literal">public int getSize()</tt></span></dt><dd><p>
returns the size of the list.
Including if there are no elements in the model, but the list has a
default text when empty.
</p></dd><dt><span class="term">
<tt class="literal">public Object getElementAt(int index)</tt>
</span></dt><dd><p>
returns the element at the given index in the list.
</p></dd><dt><span class="term">
<tt class="literal">static protected Collection 
addAtUtil(Collection oldCollection, MModelElement newItem, int index)</tt>
</span></dt><dd><p>
helps in writing the &#8220;<span class="quote">add</span>&#8221; function. newItem is added at
the specified index in the given oldCollection.
</p></dd><dt><span class="term">
<tt class="literal">static protected java.util.List 
moveUpUtil(Collection oldCollection, int index)</tt>
</span></dt><dd><p>
helps in writing the &#8220;<span class="quote">move up</span>&#8221; function.
Swaps the elements at offsets index and index-1.
Not clear why it doesn't return a Collection.
</p></dd><dt><span class="term">
<tt class="literal">static protected java.util.List
moveDownUtil(Collection oldCollection, int index)</tt>
</span></dt><dd><p>
helps in writing the &#8220;<span class="quote">move down</span>&#8221; function.
Swaps the elements at offsets index and index-1.
Not clear why it doesn't return a Collection.
</p></dd><dt><span class="term">
<tt class="literal">static protected MModelElement
elementAtUtil(Collection collection, int index, Class requiredClass)</tt>
</span></dt><dd><p>
helps in writing the <tt class="literal">getElementAt()</tt>.
Finds the element at a specific index.
The last argument is ignored!
</p></dd></dl></div></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3807"></a>5.3.2.2.&nbsp;Building the field</h4></div></div><div></div></div><p>
By convention the background of the list is set to the same as the
background of the PropPanel and the foreground to Color.blue.
</p><p>
The list is then added to a <tt class="literal">JScrollPane</tt>.  
Although ArgoUML has historically not used scrollbars
(<tt class="literal">JScrollPane.VERTICAL_SCROLLBAR_NEVER</tt> and
<tt class="literal">JScrollPane.HORIZONTAL_SCROLLBAR_NEVER</tt>), it is more
helpful to permit at least a vertical scrollbar where needed
(<tt class="literal">JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED</tt> and
<tt class="literal">JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED</tt>).
</p><p>
Finally the inherited method <tt class="literal">addCaption()</tt> is used
to add the label for the field and <tt class="literal">addField()</tt> to
add the associated scrollpane.
</p><p>
The second argument of each of these identifies the index of the
caption/field pair in the vertical column of the grid for this
property panel. The third argument identifies the column index. The
final argument is a vertical weighting to expand the field if there is
room in the property tab. This is usually set to the same non-zero
value for all fields and corresponding captions that can have multiple
entries, so they expand equally. If none of the fields should expand,
the caption only of the last field in each column should be given a
non-zero value.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3839"></a>5.3.2.3.&nbsp;Adding Property Tab Toolbar Buttons</h4></div></div><div></div></div><p>
These are added by creating new instances of
<tt class="literal">PropPanelButton</tt> (you don't need to assign them to
anything&#8212;just creating will do).
This has six arguments.
</p><div class="itemizedlist"><ul type="disc"><li><p>
The container, i.e this property panel (usually just use
<tt class="literal">this</tt>).
</p></li><li><p>
The panel for the buttons.
Use <tt class="literal">buttonPanel</tt> which is inherited from
<tt class="literal">PropPanel</tt>.
</p></li><li><p>
The icon.
Lots of these are already defined in <tt class="literal">PropPanel</tt>.
</p></li><li><p>
The advisory text for the button.
Use <tt class="literal">localize(string)</tt> to ensure international
portability.
</p></li><li><p>
The name of the method to invoke when this button is used. 
Some of the standard ones (e.g for navigation) are provided, but you
will need to write any specials.
</p></li><li><p>
The name of the method (if any) to invoke to see if this button should
be enabled.
Use <tt class="literal">null</tt> if the button should always be
enabled.
</p></li></ul></div><p>
In our example, the extend property panel has a &#8220;<span class="quote">add extension
point</span>&#8221; button, with a method
<tt class="literal">newExtensionPoint</tt> that we provide to create a new
use case.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3892"></a>5.3.2.4.&nbsp;Support for stereotypes</h4></div></div><div></div></div><p>
The PropPanel should override the following (note the spelling of the
method name).
</p><p>
<tt class="literal">protected boolean 
isAcceptibleBaseMetaClass(String baseClass)</tt>. 
Returns <tt class="literal">true</tt> if the given base class is a class of
the target in the <tt class="literal">PropPanel</tt>.
</p><p>
This is used to determine what stereotypes may be shown for this
property panel.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3910"></a>5.3.2.5.&nbsp;Other sorts of fields</h4></div></div><div></div></div><p>
Another sort of field that may be useful is the ComboBox.
This is useful to allow users to select from a pre-defined list of
alongside a navigation arrow to go to the selected entry.
</p><p>
For example this is used to provide drop-down lists for the base and
extension use cases of an Extend relationship in
PropPanelExtend.
</p><p>
The model behind the drop down is created by using
<tt class="literal">UMLCombBoxModel</tt>:
<tt class="literal">UMLCombBoxModel(container, predicate, event, getter, setter,
allowVoid, baseClass, useModel)</tt>.
</p><p>
The container is the <tt class="literal">PropPanel</tt> where we are setting
up this ComboBox, the predicate is the name of a public method in that
PropPanel that, given a model element, determines if it should be in
the drop down, the event is the NSUML <tt class="literal">MElementEvent</tt>
name we are looking for (see earlier for the list),
<tt class="literal">getter</tt> is the name of a public method in the
PropPanel that yields the current entry in the comboBox (of type
<tt class="literal">baseClass</tt>), <tt class="literal">setter</tt> (with a
single argument of type <tt class="literal">baseClass</tt>) sets that entry,
<tt class="literal">allowVoid</tt> if <tt class="literal">true</tt> will allow an
empty entry for the box, <tt class="literal">baseClass</tt> is the NSUML
metaclass from which all entries must descend,
<tt class="literal">useModel</tt> is <tt class="literal">true</tt> to consider all
the elements in the standard profile model for inclusion (so the Java
types, standard stereotypes etc.).
</p><p>
For our <tt class="literal">PropPanelExtend</tt>, we provide a predicate
routine the call for the &#8220;<span class="quote">base</span>&#8221; field is:
</p><p>
<tt class="literal">UMLComboBoxModel(this, "isAcceptableUseCase", "base",
"getBase", "setBase", true, MUseCase.class, true);</tt>
</p><p>
and we define the methods <tt class="literal">isAcceptableUseCase</tt>,
<tt class="literal">getBase</tt> and <tt class="literal">setBase</tt> in
<tt class="literal">PropPanelExtend</tt>.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3987"></a>5.3.2.6.&nbsp;How UMLTextField works</h4></div></div><div></div></div><p>
This information is provided by Jaap Branderhorst (September 2002).
</p><p>
<tt class="classname">UMLTextField</tt> implements several kinds of 
event listeners:
</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="interfacename">MMelementListener</tt></p></li><li><p><tt class="interfacename">DocumentListener</tt></p></li><li><p><tt class="interfacename">FocusListener</tt></p></li></ul></div><p>
Furthermore it is a <tt class="classname">UMLUserInterfaceComponent</tt>.
</p><p>
Since it is an <tt class="classname">UMLUserInterfaceComponent</tt>
it must implement <tt class="methodname">targetChanged</tt> and
<tt class="methodname">targetReasserted</tt>.
<tt class="methodname">TargetChanged</tt> is called everytime the 
<tt class="classname">UMLTextField</tt> is selected. 
<tt class="methodname">targetReasserted</tt> is of no interest for 
<tt class="classname">UMLTextField</tt>.
It plays a role in keeping history but since history 
is not really implemented at the moment in ArgoUML 
it is of no interest.
<tt class="methodname">targetChanged</tt> does two things:
</p><div class="itemizedlist"><ul type="disc"><li><p>
It calls the <tt class="methodname">targetChanged</tt> method 
of the <tt class="classname">UMLTextProperty</tt> this 
<tt class="classname">UMLTextfield</tt> is showing.
</p></li><li><p>
It calls the <tt class="methodname">update</tt> method.
The <tt class="methodname">update</tt> method is described further on.
</p></li></ul></div><p>
</p><p>
Besides <tt class="classname">UMLUserInterfaceComponent</tt>
there are several other interfaces of interest. 
One of them is <tt class="interfacename">MMElementListener</tt>.
</p><p>
Every time a <tt class="interfacename">MModelElement</tt> is
changed this will fire an <tt class="classname">MEvent</tt>
to <tt class="classname">UMLChangeDispatch</tt>.
<tt class="classname">UMLChangeDispatch</tt> will dispatch 
these events to all containers implementing
<tt class="interfacename">UMLUserInterfaceComponents</tt>
interested in this event, including <tt class="classname">UMLTextField</tt>.
It will also dispatch the event to all childs of an interested container
implementing
<tt class="interfacename">UMLUserInterfaceComponent</tt>.
By this it is only necessary to register a 
<tt class="classname">PropPanel</tt> which holds an 
<tt class="classname">UMLTextField</tt> at 
<tt class="classname">UMLChangeDispatch</tt> to
dispatch the event to the <tt class="classname">UMLTextField</tt> too.
<tt class="interfacename">MMelementListener</tt>
knows several methods of which only one is of interest to
<tt class="classname">UMLTextField</tt>s:
</p><div class="itemizedlist"><ul type="disc"><li><p>propertySet</p><p>
Called everytime a property in a 
<tt class="classname">MModelElement</tt> is set. 
This method calls 
<tt class="methodname">update</tt> too if the 
<tt class="classname">UMLTextProperty</tt> really is affected.
</p></li></ul></div><p>
</p><p>
Furthermore <tt class="classname">UMLTextField</tt> implements
<tt class="interfacename">DocumentListener</tt>. 
This is very typical for <tt class="classname">UMLTextField</tt>.
At the moment it is not possible to change the style of
the text in the <tt class="classname">UMLTextField</tt>.
Therefore the method <tt class="methodname">changedUpdate</tt> does not
have a body.
This method is only called when a <tt class="classname">DocumentEvent</tt>
occurs that changes the style/layout of the text.
The methods <tt class="methodname">insertUpdate</tt>
and <tt class="methodname">removeUpdate</tt> are respectively called when a
character is added to the document 
<tt class="classname">UMLTextField</tt> contains or removed. 
Since both methods are called when there is true userinput 
and when the contents of the document are changed programmatically,
the methods distinguish between them.
<tt class="methodname">InsertUpdate</tt> and 
<tt class="methodname">removeUpdate</tt>
are both handled via the protected method 
<tt class="methodname">handleEvent</tt>.
<tt class="methodname">HandleEvent</tt> updates the property in 
<tt class="classname">UMLTextProperty</tt> if it is really changed.
If the update comes via userinput, it is checked if it is valid input. 
If it is not, a <tt class="classname">JOptionPane</tt> is shown with '
a warning and the change is not commited into the model.
If it is not via userinput, the input is not checked and the
property is set. If the property is set, the update method is called.
</p><p>
The implementation of <tt class="interfacename">FocusListener</tt>
makes sure that the checking of userinput only happens when focus is lost.
Otherwise, it would not be possible to enter 'intermediate' values 
that are not legal. 
For instance, say the value class is not legal. 
Without the implementation of <tt class="interfacename">FocusListener</tt>,
it would not be possible to enter classdiagram since
handleEvent would popup a warning messagebox.
</p><p>
The method <tt class="methodname">update</tt> updates both the actual
<tt class="classname">JTextfield</tt> as the diagram as soon
as some property is set. 
The updating of the diagram is done by calling the
<tt class="methodname">damage</tt> method of the figs that
represent the property on the diagram.
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4194"></a>5.3.3.&nbsp;How to add a new Fig</h3></div></div><div></div></div><p>
The new item must be added to the toolbar. Both the graph model and
diagram renderer for the diagram will need modifying for any new fig
object.
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4199"></a>5.3.3.1.&nbsp;Adding to the toolbar</h4></div></div><div></div></div><p>
Find the diagram object in
<tt class="literal">uml/diagram/XXXX/ui/UMLYYYYDiagram.java</tt>, where
<tt class="literal">XXXX</tt> is the diagram type (lower case) and
<tt class="literal">YYYY</tt> the diagram type (bumpy caps). For example
<tt class="literal">uml/diagram/use_case/ui/UMLUseCaseDiagram.java</tt>. 
This will be a subclass of UMLDiagram (in
<tt class="literal">uml/diagram/ui/UMLDiagram.java</tt>).
</p><p>
Each toolbar action is declared as a protected static field of class
<tt class="literal">Action</tt>, initiated as a 
<tt class="literal">new CmdCreateNode</tt> (for nodal UML elements) or a
<tt class="literal">new CmdSetMode</tt> (for behavior, or creation of line
UML elements). These classes are part of the GEF library.
</p><p>
The common ones (select, broom, graphic annotations) are inherited
from UMLDiagram, the diagram specific ones in the class itself. For
example in UMLUseCaseDiagram.java we have the following for creating
Use Case nodes.
</p><pre class="programlisting">
protected static Action _actionUseCase =
    new CmdCreateNode(MUseCaseImpl.class, "UseCase");
</pre><p>
</p><p>
The first argument is the class of the node to create from NSUML, the
second a textual tool tip.
</p><p>For creating associations we have:</p><pre class="programlisting">
protected static Action _actionAssoc =
      new CmdSetMode(ModeCreatePolyEdge.class,
	   	     "edgeClass", MAssociationImpl.class,
		     "Association");
</pre><p>
</p><p>
The first argument is a GEF class that defines the type of behavior
wanted (in this case creating a poly-edge). The second and third
arguments are a named parameter used by
<tt class="literal">ModeCreatePolyEdge</tt> ("edgeClass") and its value
(<tt class="literal">MAssociationImpl.class</tt>). The final argument is a
tooltip.
</p><p>
The toolbar is actually created by defining a method,
<tt class="literal">initToolBar()</tt> which adds the tools in turn to the
toolbar (a protected member named <tt class="literal">_toolBar</tt>).
</p><p>
The default constructor for the diagram is declared private, since it
must not be called directly. The desired constructor takes a namespace
as an argument, and sets up a graph model
(<tt class="literal">UseCaseDiagramGraphModel</tt>), layer perspective and
renderer (<tt class="literal">UseCaseDigramRenderer</tt>) for nodes and
edges.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4268"></a>5.3.3.2.&nbsp;Changing the graph model</h4></div></div><div></div></div><p>
The graph model is the bridge between the UML meta-model
representation of the design and the graph model of GEF. They are
found in the parent directory of the corresponding diagram class, and
have the general name <tt class="literal">YYYYDiagramGraphModel.java</tt>,
where <tt class="literal">YYYY</tt> is the diagram name in bumpy caps. For
example the use case diagram graph model is in
<tt class="literal">uml/diagram/use_case/UseCaseDiagramGraphModel.java</tt>
</p><p>
The graph model is defined as a child of the GEF class
<tt class="literal">MutableGraphSupport</tt>, and should implement
<tt class="literal">MutableGraphModel</tt> (GEF),
<tt class="literal">VetoableChangeListener</tt> (Java) and
<tt class="literal">MElementListener</tt> (NSUML).
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4296"></a>5.3.3.3.&nbsp;Changing the renderer</h4></div></div><div></div></div><p>
The renderer is responsible for creating graphic figs as required on
the diagram. It is found in the same directory of the corresponding
diagram class, and has the general name
<tt class="literal">YYYYDiagramRenderer.java</tt>, where
<tt class="literal">YYYY</tt> is the diagram name in bumpy caps. For example
the use case diagram graph model is in
<tt class="literal">uml/diagram/use_case/ui/UseCaseDiagramRenderer.java</tt>
</p><p>
This provides two routines, <tt class="literal">getFigNodeFor()</tt>, which
provides a fig object to represent a given NSUML node object and
<tt class="literal">getFigEdgeFor()</tt>, which provides a fig object to
represent a given NSUML edge object.
</p><p>
In our example, we must extend <tt class="literal">getFigEdgeFor()</tt> so
it can handle NSUML MExtend objects (producing a
<tt class="literal">FigExtend</tt>).
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4326"></a>5.3.3.4.&nbsp;Creating a new Fig</h4></div></div><div></div></div><p>
New objects that are to appear on a diagram will require new Fig
classes to represent them. In our example we have created
FigExtend. They are placed in the same directory as the diagram that
uses them.
</p><p>
The implementation must provide constructors for both a generic fig,
and one representing a specific NSUML object. It should provide a
setFig() method to set a particular figure as the representation. It
should provide a method canEdit() to indicate whether the Fig can be
edited. It should provide an event handler modelChanged() to cope with
advice that the model has changed.
</p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="reverseengineering"></a>5.4.&nbsp;Reverse Engineering Component</h2></div></div><div></div></div><a class="indexterm" name="d0e4337"></a><p>
Purpose:
Point where the different languages register that they know how to 
do reverse engineering
and common reverse engineering functions for all languages.
</p><p>
The Reverse Engineering is located in
<tt class="classname">org.argouml.uml.reveng</tt>.
</p><p>
The Reverse Engineering Component is a Layer 2 component.
See <a href="#layer2" title="4.6.&nbsp;Layer 2 - Description of components">Section&nbsp;4.6, &#8220;Layer 2 - Description of components&#8221;</a>.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="codegeneration"></a>5.5.&nbsp;Code Generation Component</h2></div></div><div></div></div><a class="indexterm" name="d0e4354"></a><p>
Purpose:
Point where the different languages register that they know how to 
do code generation
and common functions for all languages.
</p><p>
The Code Generation is located in
<tt class="classname">org.argouml.language</tt>.
</p><p>
The Code Generation component is a Layer 2 component.
See <a href="#layer2" title="4.6.&nbsp;Layer 2 - Description of components">Section&nbsp;4.6, &#8220;Layer 2 - Description of components&#8221;</a>.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="java"></a>5.6.&nbsp;Java - Code generations and Reverse Engineering</h2></div></div><div></div></div><a class="indexterm" name="d0e4371"></a><a class="indexterm" name="d0e4376"></a><a class="indexterm" name="d0e4381"></a><a class="indexterm" name="d0e4386"></a><p>
Purpose - two purposes:
to allow the model to be converted into java code and updated either
in java or in the model;
to allow some java code to be coverted into a model.
</p><p>
The java things are located in 
<tt class="classname">org.argouml.language.java</tt>.
</p><p>
The Java component is a Layer 3 component. See <a href="#layer3" title="4.7.&nbsp;Layer 3 - Description of components">Section&nbsp;4.7, &#8220;Layer 3 - Description of components&#8221;</a>.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="howdoi_reverse"></a>5.6.1.&nbsp;How do I ...?</h3></div></div><div></div></div><p>...</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4405"></a>5.6.2.&nbsp;Which sources are involved?</h3></div></div><div></div></div><p>
The package org.argouml.uml.reveng is supposed to hold those classes
that are common to all RE packages. At the moment this is the Import
class which is mainly responsible to recognize directories, get their
content and parse every known source file in them. These are only java
files at the moment, but there might be other languages like C++ in
the future. With this concept you could mix several languages within
a project. The DiagramInterface is used to visualize generated NSUML
metamodel objects then.
</p><p>
The package org.argouml.uml.reveng.java holds the Java specific parts
of the current RE code. C++ RE might go to org.argouml.uml.reveng.cc,
or so...
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4412"></a>5.6.3.&nbsp;How is the grammar of the target language implemented?</h3></div></div><div></div></div><p>
It's an Antlr (<a href="http://www.antlr.org" target="_top">http://www.antlr.org</a>)
grammar, based on the Antlr Java parser
example. The main difference is the missing AST (Abstract Syntax Tree)
generation and treeparser. So the original example generates an AST
(a treelike data structure) and then traverses this tree, while the
ArgoUML code parses the source file and generates NSUML objects
directly from the sources. This was done to avoid the memory usage
of an AST and the frequent GC while parsing many source files.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4420"></a>5.6.4.&nbsp;Which model/diagram elements are generated?</h3></div></div><div></div></div><p>
The *context classes hold the current context for a package, class
etc. When the required information for an object is available, the
corresponding NSUML object is created and passed to the DiagramInterface
to visualize it.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4425"></a>5.6.5.&nbsp;Which layout algorithm is used?</h3></div></div><div></div></div><p>
The classes in org.argouml.uml.diagram.static_structure.layout.* hold
the Classdiagram layout code. No layout for other diagram types yet.
It's based on a ranking scheme for classes and interfaces. The rank of
a class/interface depends on the total number of (direct or indirect)
superclasses. So if class B extends A (with rank(A)=0), then rank(B)=1.
If C extends B, then rank(C)=2 since it has 2 superclasses A,B. An
implemented interface is treated similar to a extended class. The
objects are placed in rows then, that depend on their rank.
rank(0)=1st row. rank(1) =2nd row (below the 1st one) etc. Example:
</p><div class="mediaobject"><img src="images/examples/example1.gif"></div><p>
In the next diagramm, a link goes to an object that is not in the row
above:
</p><div class="mediaobject"><img src="images/examples/example2.gif"></div><p>
In this case, insert virtual objects which are linked to the actual
target and link to them:
</p><div class="mediaobject"><img src="images/examples/example3.gif"></div><p>
The objects are sorted within their row then to minimize crossing links
between them. Compute the average value of the vertical positions of all linked
objects in the row above. Example: we have 2 ranks, 0 and 1, with 3
classes each:
</p><div class="blockquote"><blockquote class="blockquote"><p>
A B C : rank 0
</p><p>
D E F : rank 1
</p></blockquote></div><p>
We give the superclasses an index in their rank (assuming that they are
already sorted):
</p><div class="blockquote"><blockquote class="blockquote"><p>
A:0, B:1, C:2
</p></blockquote></div><p>
D, E, F have the following links (A, B, C could be interfaces, so I allow
links to multiple superclasses here):
</p><div class="blockquote"><blockquote class="blockquote"><p>
D -&gt; C
</p><p>
E -&gt; A and C
</p><p>
F -&gt; A and B
</p></blockquote></div><p>
Compute the average value of the indices:
</p><div class="blockquote"><blockquote class="blockquote"><p>
D = 2 (C has index 2 / 1 link)
</p><p>
E = 0 + 2 / 2 = 1 (A=0, C=2 divide by 2 links)
</p><p>
F = 0 + 1 / 2 = 0.5 (A=0, B=1, 2 links)
</p></blockquote></div><p>
Then sort the subclasses by that value:
</p><div class="blockquote"><blockquote class="blockquote"><p>
F(is 0.5), E(is 1), D(is 2)
</p></blockquote></div><p>
So the placement is:
</p><div class="blockquote"><blockquote class="blockquote"><p>
A B C
</p><p>
(here are the links, but I can hardly paint them as ASCIIs)
</p><p>
F E D
</p></blockquote></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="otherlanguages"></a>5.7.&nbsp;Other languages</h2></div></div><div></div></div><p>
Each other language supported by ArgoUML has its own component.
They are each different in level of support and implementation
language.
</p><p>
Currently C++ has no reverse engineering but only code generation
(and a very simple one at that).
Java class files has only reverse engineering.
</p><p>
        </p><div class="mediaobject"><img src="images/cookbook/Languages.gif"></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="guiframework"></a>5.8.&nbsp;The GUI Framework</h2></div></div><div></div></div><a class="indexterm" name="d0e4503"></a><a class="indexterm" name="d0e4506"></a><p>
Purpose - Provide an infrastructure with menus, tabs and panes available
for the other components to fill with actions and contents.
</p><p>
No domain-specific information is located in this component.
</p><p>
The GUI Framework is located in <tt class="classname">org.argouml.???</tt>.
</p><p>
The GUI Framework is a Layer 1 component. See <a href="#layer1" title="4.5.&nbsp;Layer 1 - Description of components">Section&nbsp;4.5, &#8220;Layer 1 - Description of components&#8221;</a>.
</p><p>
This is implemented directly on top of Swing and Java2.
</p><p>
The GUI has (currently) a menu and four panes. The panes are:
</p><div class="itemizedlist"><ul type="disc"><li><p>Navigator pane</p><p>Upper left.</p><p>Contains a tree of the model.</p></li><li><p>Multi editor pane</p><p>Upper right.</p><p>
Contains the diagrams (could eventually be something else).
</p></li><li><p>To do pane</p><p>Lower left.</p><p>To do items, different views.</p></li><li><p>Details pane</p><p>Lower right.</p><p>
Contains a wizard from a To do item, 
a property panel of the current object,
some other view of the current object.
</p></li></ul></div><p>
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4556"></a>5.8.1.&nbsp;Multi editor pane</h3></div></div><div></div></div><p>
The multieditorpane is the pane with the diagram editor in it.
Normally it is placed in the upper right corner of the application.
One of the feature requests is to make the pane dockable so maybe 
it won't be there in the future.
</p><p>
The multieditorpane consists of tabs that hold editors as you can see
in the classdiagram.
        </p><div class="mediaobject"><img src="images/cookbook/multieditorpane.gif"></div><p>
</p><p>
At the moment there is only one editor tab in place.
This is the TabDiagram that shows an UMLDiagram, the target.
</p><p>
The TabDiagram is spawnable.
This means that the user can double click the tab and the diagram will
spawn as a separate window.
</p><p>
The target of the MultiEditorPane is set via the setTarget method 
of the pane.
This method is called by the setTarget method of the ProjectBrowser.
The pane's setTarget method will call each setTarget method of each
tab that is an instance of TabModelTarget.
Besides setting the target of the tabs, the setTarget method also
calls MultiEditorPane.select(Object o).
This selects the new target on a tab. This probably belongs in 
the setTarget method of the individual tabs and diagrams but 
that's how it's implemented at the moment.
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4573"></a>5.8.1.1.&nbsp;How do I ...?</h4></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>...add a new tab to the MultiEditorPane?</p><p>
Create a new class that's a child of JPanel and put the following 
line in argo.ini:
</p><pre class="programlisting">
multi:	<i class="replaceable"><tt>fully classified name of new tab class</tt></i>
</pre><p>
</p></li></ul></div><p>
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4591"></a>5.8.2.&nbsp;Details pane</h3></div></div><div></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="howdoi_detailspanel"></a>5.8.2.1.&nbsp;How do I ...?</h4></div></div><div></div></div><p>
	  </p><div class="itemizedlist"><ul type="disc"><li><p>...add a tab in the Details Panel?</p><p>
Create your <tt class="classname">TabXXX</tt> class in 
<tt class="classname">org.argouml.uml.ui</tt> by
copying from another <tt class="filename">TabYYY.java</tt>
(e.g. <tt class="classname">TabSrc</tt>, <tt class="classname">TabStyle</tt>).
Then register your <tt class="classname">TabXXX</tt> in
<tt class="filename">org/argouml/argo.ini</tt>
by adding a line giving the compass point to place the tab.
Like - 
</p><pre class="programlisting">
south: 	TabXXX
</pre><p>
</p></li><li><p>...remove a tab from the Details Panel?</p><p>
Remove the line for the tab from 
<tt class="filename">org/argouml/argo.ini</tt>.
</p></li></ul></div><p>
</p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="help"></a>5.9.&nbsp;Help System</h2></div></div><div></div></div><a class="indexterm" name="d0e4641"></a><p>
Purpose - to provide the menu actions that start the help and other
documentation.
To provide infrastructure that makes context sensitive help possible.
</p><p>
The Help System is not yet implemented.
</p><p>
The Help System will be located in <tt class="classname">org.argouml.help</tt>.
</p><p>
The Help System is a Layer 1 component. See <a href="#layer1" title="4.5.&nbsp;Layer 1 - Description of components">Section&nbsp;4.5, &#8220;Layer 1 - Description of components&#8221;</a>.

</p><p>
Javahelp or some other help function will probably be used.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="internationalization"></a>5.10.&nbsp;Internationalization</h2></div></div><div></div></div><a class="indexterm" name="d0e4665"></a><a class="indexterm" name="d0e4668"></a><a class="indexterm" name="d0e4671"></a><a class="indexterm" name="d0e4674"></a><a class="indexterm" name="d0e4677"></a><p>
Purpose - to provide the infrastructure that the other components can
use to translate strings;
to provide the infrastructure that makes it possible to plug in
new languages;
to administer the default (English U.S.) language;
to administer all supported languages.
</p><p>
The Internationalization is located in <tt class="classname">org.argouml.i18n</tt>.
</p><p>
The Internationalization is a Layer 0 component. 
See <a href="#layer0" title="4.4.&nbsp;Layer 0 - Description of components">Section&nbsp;4.4, &#8220;Layer 0 - Description of components&#8221;</a>.
</p><p>
The internationalization is currently changing from ListResourceBundles
to Property files. This chapter is not updated to fit the change.
Please read carefully.
</p><p>
In ArgoUML internationalization (sometimes called i18n) is done using
the ListResourceBundle-classes and parts of it is handled by the 
GEF infrastructure.
</p><p>
There are several sets of Bundle files for different domains within ArgoUML.
Each domain has a name and is handled by a file.
This is set up in <tt class="classname">org.argouml.application.Main</tt>.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4700"></a>5.10.1.&nbsp;Organizing translators</h3></div></div><div></div></div><a class="indexterm" name="d0e4703"></a><a class="indexterm" name="d0e4708"></a><p>
The problems with internationalization are not so much the technical
problems as to how it works but more so the problems are with
getting, keeping and coordinating the correct competences to do
the job.
This comes from the fact that by necessity the different
persons working with internationalization have different native languages
and that complicates the communications.
</p><p>
To handle this problem for GNU applications 
there is a community set up around gettext with one language team
per language working with all gettext applications.
There are also tools to help the translator do his job
delivered with gettext that are the same for all the applications.
In each of these language teams discussions are held that ensure a
consistant use of words over all these applications.
</p><p>
It is for me (Linus Tolke, May 2002) unclear if and how such a
community exists for Open Source Java tools and ArgoUML cannot
simply benefit from the gettext communities since we don't use
gettext and cannot use the same tools.
</p><p>
To get things done, we organize our own Language Teams with ArgoUML.
Each language teams are actually just one or several persons that
know that language and are eager to work with translating ArgoUML.
</p><p>
The language team has the following responsibilities:
</p><div class="orderedlist"><ol type="1"><li><p>
All localized strings and resources shall be tranlated into the language.
</p><p>
This is a constant work with keeping up with the changes that
will be made to the ArgoUML code since ArgoUML 
is under fast development.
</p></li><li><p>
The terminology used shall be correct.
</p><p>
This requires work in keeping up with the current literature in the
domain of ArgoUML.
</p></li><li><p>
Help with the improvements on ArgoUML by pin-pointing where ArgoUML
needs to be modified to allow for localization.
</p><p>
As ArgoUML is originally built without localization we still have a
big backlog of stuff in the GUI that is not localizable just by
modifying the resource bundles. 
Each such thing is a Defect and shall be corrected.
</p></li><li><p>
See that the used libraries also provide their part in that language.
</p><p>
This is mostly GEF since GEF is central both when it comes to 
the fact that it has localized strings of its own but also
because it handles parts of the localization.
</p><p>
This means discussing with the teams developing the underlaying package
as to how best to provide the localization for those parts. 
Either by providing localization for that team to include in the
package or by having ArgoUML overriding that package in that respect.
</p></li></ol></div><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4745"></a>5.10.2.&nbsp;Ambitions for localization</h3></div></div><div></div></div><p>
Let me (Linus Tolke, May 2002) try to define the levels of
ambition for us to try to make it possible to discuss where
we are going.
</p><div class="orderedlist"><ol type="1"><li><p>No translation</p><p>
This is the lowest level of ambition that is a "do nothing"-level.
This goes for all languages where we have not done anything like
Swahili, Polish, South African English, ...
</p></li><li><p>Tool translation</p><p>
This is the basic level of ambition that each Language Team should
aim for.
It means that in ArgoUML all strings are localized so that ArgoUML
is giving a complete appearance of being a tool for that language.
</p><p>
Setting this level of ambition for a language
(or creating a team for the language) is pointless
if there is no window system available for the language in questions.
I mean, if neither the people working with 
Windows, Linux (KDE or Gnome) or java has collected enough interest
to do a translation of the basic infrastructure there is no point
in doing so for ArgoUML.
(My Windows 2k has 80 supported languages so I would think that this
is a no-issue.)
</p></li><li><p>User environment translation</p><p>
This is the next level of ambition that can be set out by a 
Language Team that works really well and has plenty of translation
resources left.
</p><p>
It means that not only the ArgoUML tool should be translated but also
everything around it that the user sees 
i.e. the User Manual, the Quick Guide, the FAQ, 
the Users' part of the ArgoUML Web site.
</p><p>
Setting this level of ambition for a language is pointless
if the problem domain does not exist in that language.
I mean, if the professionals that use UML or other 
Software Engineering tools, in their every day work don't use 
their native language to discuss UML concepts,
then there is no use in translating these concepts to their language,
they will not use the translation because they are more
comfortable with the English concepts.
Note that the UML Specification does only exist in English.
</p></li><li><p>Development environment translation</p><p>
Here I mean that everything that the developer of ArgoUML sees
shall be translated.
</p><p>
This begins with this Cookbook, then the Developers' part of the
ArgoUML web site and 
also includes the javadoc comments in the code of ArgoUML and
design documentation of included packages such as GEF, NSUML...
</p><p>
For translating the javadoc there exist no good tools.
</p><p>
This is pointless unless we have identified an extremely large
developer base willing to take on big parts of of the ArgoUML
development that is
speaking one specific language and where most of them do not
know English.
</p><p>
If any Language Team would consider this, 
probably after several years of extremely good work on the 
User environment translation ambition level
it is a decision not only concerning that language team but the whole
ArgoUML development community.
</p><p>
Maybe I (Linus Tolke) have gone a little over the top now in trying 
to define things far off the side of the planet.
It is probably just me but I find a weird pleasure in encouraging people
to strive for unreachable goals.
</p></li></ol></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="howdoi_internationalization"></a>5.10.3.&nbsp;How do I ...?</h3></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>...verify that all translations are up to date?</p><p>
Run checkstyle. Search for comments on keys.
</p></li><li><p>...start a new Language Team?</p><p>
The Language Teams are loosely defined by
the web page of language teams on the Tigris site.
As soon as the language code and names (at least one) are in place
the team is created.
</p><p>
From that point it is the Language Teams responsibility to 
do a good job.
</p></li><li><p>
...find the languages internationalization code for the language you 
will add: en, es, en_GB,...
</p><p>
The one you are currently using is shown in the log when ArgoUML starts.
Search for lines looking like:
<tt class="computeroutput">
Language: sh
Country: unknown
</tt>
</p></li><li><p>...start the work?</p><p>
Look at the files in
<tt class="filename">org/argouml/i18n</tt>,
under <tt class="filename">argouml/src_new</tt>.
</p><p>
Translate all the texts in each of these classes of files.
</p><p>
This is a lot of extremely qualified work including searching well-known
litterature on UML and Software Engineering in order to get the correct
terms for the domain.
Discuss with other UML and Software Engineering professionals with the
same native language to get it right.
</p><p>
Create the files with the translations and store them in
<tt class="filename">argouml/src_new/org/argouml/i18n</tt>.
They will have the names:
<tt class="filename">UMLResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>,
<tt class="filename">UMLCognitiveResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>,
<tt class="filename">ActionResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>,
<tt class="filename">SettingsResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>,
<tt class="filename">MenuResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>,
<tt class="filename">DiagramResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>,
<tt class="filename">TreeResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>, and
<tt class="filename">NotationResourceBundle_<i class="replaceable"><tt>language code</tt></i>.java</tt>.
</p><p>
Add the language to the JUnit list of tested languages and run the JUnit tests.
</p><p>
The purpose of this is for you to get the simple JUnit tests to work for
your language also.
</p><p>
This is in the file
<tt class="filename">argouml/modules/junit/src/org/argouml/util/CheckResourceBundle.java</tt>.
Search for the supportedLanguages-array.
</p><p>
Now you have completed the first iteration of the Tool translation
ambition.
The work will probably be more maintenance-like from here on.
</p></li><li><p>...join an existing Language Team</p><p>
Discuss with the Language Team on where the team is in its work
and what you can do.
</p></li><li><p>...add or modify code with localized things?</p><div class="orderedlist"><ol type="1"><li><p>
Write your code using the same way of handling strings as the surrounding code.
</p><p>
This means that strings are denoted by "labels" or "tags" and then
the resolution of the "tag" is in a 
<tt class="filename"><i class="replaceable"><tt>Domain</tt></i>ResourceBundle.java</tt>-file.
</p><p>
The name for the domain is most often specified in a variable like
</p><pre class="programlisting">
    protected static final String BUNDLE = <i class="replaceable"><tt>Domain</tt></i>;
</pre><p>
or
</p><pre class="programlisting">
    protected static final String RESOURCE_BUNDLE = <i class="replaceable"><tt>Domain</tt></i>;
</pre><p>
in a base class to what you are doing and there is 
a convenience method in the class
<tt class="classname">org.argouml.application.api.Argo</tt>
so normal strings are written
</p><pre class="programlisting">
import org.argouml.application.api.*;
...
    String localized = Argo.localize(BUNDLE, <i class="replaceable"><tt>tag</tt></i>);
</pre><p>
</p></li><li><p>
Add your "tag" and resolution in English in the non-localized 
<tt class="filename"><i class="replaceable"><tt>Domain</tt></i>ResourceBundle.java</tt>-file.
</p><p>
How do I choose the tag?
Jean-Hugues de Raigniac has made a small investigation as to how this
is done in the java world and found that there is no real consensus on
how to do this.
He suggests a hierarchical choice of tags like this:
</p><pre class="programlisting">
   {"docpane.label.since", "Since"},
   {"docpane.label.deprecated", "Deprecated"},
   {"docpane.label.see", "See"},

   {"stylepane.label.bounds", "Bounds"},
   {"stylepane.label.fill", "Fill"},
   {"stylepane.label.no-fill", "No Fill"},
</pre><p>
</p></li><li><p>
Contact all the language-teams so that they can update their files.
</p></li></ol></div><p>
Notice that if you somewhere change the meaning of a specific
localized thing it would be a good idea to use a new "tag" for the
new meaning.
This will make it easier for the translation team to
spot the modification.
</p><p>
There eledgedly are tools in the java world to spot this kind of changes.
Until we have the tools and processes in place to handle them
it is better to rely on this simpler mechanism to guarantee correctness.
</p></li></ul></div><p>
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="logging"></a>5.11.&nbsp;Logging</h2></div></div><div></div></div><p><a name="comp-logging-purpose"></a>
Purpose - to provide an api for debug log and trace messages.
</p><p>
The purpose of debug log and trace messages is:
To provide a mechanism that allows the developer to
enable output of minor events focused on a specific problem area
and
to follow what is going on inside ArgoUML.
</p><p>
The Logging is located in <tt class="classname">org.argouml.???</tt>
</p><p>
The Logging is a Layer 0 component.
</p><p>
Logging is currently implemented using log4j.
</p><p>
        <span class="application">ArgoUML</span> uses the standard 
        <a href="http://jakarta.apache.org/log4j/" target="_top">log4j</a>
        logging facility. The following sections deal with the current
        implementation in <span class="application">ArgoUML</span>. By
        default, logging is turned off and only the version
        information of all used libraries are shown on
        the console.
    </p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4984"></a>5.11.1.&nbsp;What to Log in ArgoUML</h3></div></div><div></div></div><p>
            Logging entries in log4j
            belong to exactly <span class="emphasis"><em>one</em></span> level.
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                The FATAL level designates very severe error events that 
                will presumably lead the application to abort.
Everything known about the reasons for the abortion of the application
shall be logged.
</p></li><li><p>
                The ERROR level designates error events that might still 
                allow the application to continue running.
Everything known about the reasons for this error condition shall be
logged.
</p></li><li><p>
                The WARN level designates potentially harmful situations.
This is if CG can't find all the information required 
and has to make something up.
</p></li><li><p>
                The INFO level designates informational messages that 
                highlight the progress of the application at coarse-grained 
                level.
This typically involves creating modules, components, and singletons,
loading and saving of files, imported files, opening and closing files.
</p></li><li><p>
                The DEBUG Level designates fine-grained informational 
                events that are most useful to debug an application.
This could be everything happening within the application.
</p></li></ul></div><p>

            This list is ordered according to the priority of these
            logging entries i.e. if logging on level WARN is enabled
            for a particular class/package,
            all logging entries that belong to the above levels ERROR
            and FATAL are logged as well.
        </p>
        For performance reasons, it is advised to do a check before all DEBUG
        and INFO log4j messages (see <a href="#example.log4j.speed" title="Example&nbsp;5.2.&nbsp;Improving on speed/performance">Example&nbsp;5.2</a>).
The purpose of this test is to avoid the creation of the argument.
    </div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5012"></a>5.11.2.&nbsp;How to Create Log Entries...</h3></div></div><div></div></div><p>
                You should <span class="emphasis"><em>not</em></span> use
                <tt class="function">System.out.println</tt> in 
                <span class="application">ArgoUML</span> 
                Java Code. The only exception of this rule shall be to
                print the usage of <span class="application">ArgoUML</span>
                in <tt class="classname">Main.java</tt>.
            </p><p>
            To make log entries from within your own classes, you just
            need to follow the three steps below:
            </p><div class="orderedlist"><ol type="1"><li>Import the org.apache.log4j.Logger package</li><li>Get a Logger</li><li>Start Logging...</li></ol></div><p>
        </p><div class="example"><a name="d0e5042"></a><p class="title"><b>Example&nbsp;5.1.&nbsp;For log4j version 1.2.x</b></p><pre class="programlisting">
import org.apache.log4j.Logger;

Logger _cat = Logger.getLogger(<i class="replaceable"><tt>theClass</tt></i>.class.getName());

...

public void anExample() {
    _cat.debug("This is a debug message.");
    _cat.info("This is a info message.");
    _cat.warn("This is a warning.");
    _cat.error("This is an error.");
    _cat.fatal("This is fatal. The program stops now working...");
}
            </pre><p></p></div>

        For performance reasons, a check before the actual logging statement 
        saves the overhead of all the concatenations, data conversions and
        temporary objects that would be created otherwise. Even if logging 
        is turned off for DEBUG and/or INFO level.
        <div class="example"><a name="example.log4j.speed"></a><p class="title"><b>Example&nbsp;5.2.&nbsp;Improving on speed/performance</b></p><pre class="programlisting">
    if (_cat.isDebugEnabled()) {
        _cat.debug("Entry number: " + i + " is " + String.valueOf(entry[i]));
    }
    if (_cat.isInfoEnabled()) {
        _cat.info("Entry number: " + i + " is " + String.valueOf(entry[i]));
    }
            </pre><p></p></div><p>
            For more information go to the log4j homepage at
            <a href="http://jakarta.apache.org/log4j/" target="_top">http://jakarta.apache.org/log4j</a>.
        </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5061"></a>5.11.3.&nbsp;How to Enable Logging...</h3></div></div><div></div></div><p>
            log4j uses the command line parameter
            <i class="parameter"><tt>-Dlog4j.configuration = URL</tt></i>
            to configure itself where URL points to the location of
            your log4j configuration file.
        </p><div class="example"><a name="d0e5069"></a><p class="title"><b>Example&nbsp;5.3.&nbsp;Various URLs</b></p><div class="programlistingco"><pre class="programlisting">
org/argouml/resource/<span class="emphasis"><em>filename.lcf</em></span>              <a name="ex.url.package"></a><img src="images/callouts/1.png" alt="1" border="0">

http://localhost/shared/argouml/<span class="emphasis"><em>filename.lcf</em></span>   <a name="ex.url.link"></a><img src="images/callouts/2.png" alt="2" border="0">

file://home/username/<span class="emphasis"><em>filename.lcf</em></span>              <a name="ex.url.file"></a><img src="images/callouts/3.png" alt="3" border="0">
                </pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><a href="#ex.url.package"><img src="images/callouts/1.png" alt="1" border="0"></a> </td><td valign="top" align="left">
                        Reference to a configuration file <span class="emphasis"><em>filename.lcf</em></span> 
                        within argouml.jar.
                    </td></tr><tr><td width="5%" valign="top" align="left"><a href="#ex.url.link"><img src="images/callouts/2.png" alt="2" border="0"></a> </td><td valign="top" align="left">
                        Reference to a configuration file <span class="emphasis"><em>filename.lcf</em></span> 
                        on a remote server/localhost.
                    </td></tr><tr><td width="5%" valign="top" align="left"><a href="#ex.url.file"><img src="images/callouts/3.png" alt="3" border="0"></a> </td><td valign="top" align="left">
                        Reference to a configuration file <span class="emphasis"><em>filename.lcf</em></span>
                        on your localmachine.
                    </td></tr></table></div></div><p></p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5106"></a>5.11.3.1.&nbsp;...when running ArgoUML from the command line</h4></div></div><div></div></div><p>
                There are currently two possibilities of running
                <span class="application">ArgoUML</span> from the command
                line:
                </p><div class="orderedlist"><ol type="1"><li>
                        Run <span class="application">ArgoUML</span> using
                        <tt class="filename">argouml.jar</tt></li><li>
                        Run <span class="application">ArgoUML</span> using
                        the ant script
                    </li></ol></div><p>

                In the first case, the configuration file is specified
                directly on the command line, whereas in the latter
                case this parameter is specified in the
                <tt class="filename">build.xml</tt> (which in that case
                needs to be modified).
                <span class="application">ArgoUML</span> is then started as
                usual with <b class="command">./build run</b>.
             </p><div class="example"><a name="d0e5137"></a><p class="title"><b>Example&nbsp;5.4.&nbsp;Command Line for argouml.jar</b></p><pre class="programlisting">
[localhost:~] billy% java -Dlog4j.configuration=URL -jar argouml.jar                        
                </pre><p></p></div><div class="example"><a name="d0e5142"></a><p class="title"><b>Example&nbsp;5.5.&nbsp;Modification of build.xml</b></p><pre class="programlisting">
&lt;!-- =================================================================== --&gt;
&lt;!-- Run ArgoUML from compiled sources                                   --&gt;
&lt;!-- =================================================================== --&gt;
&lt;target name="run" depends="compile"&gt;
    &lt;echo message="--- Executing ${Name} ---"/&gt;
    &lt;!-- Uncomment the sysproperty and change the value if you want --&gt;
    &lt;java classname="org.argouml.application.Main"
          fork="yes"
          classpath="${build.dest};${classpath}"&gt;
          <span class="emphasis"><em>&lt; sysproperty key="log4j.configuration"
                       value="org/argouml/resource/<span class="emphasis"><em>filename.lcf</em></span>"&gt;&lt;/sysproperty&gt;</em></span>
    &lt;/java&gt;
&lt;/target&gt;
                </pre><p></p></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5153"></a>5.11.3.2.&nbsp;...when running ArgoUML from WebStart</h4></div></div><div></div></div><p>
                To view the console output, the WebStart user has to
                set <i class="parameter"><tt>Enable Java Console</tt></i> in the
                Java WebStart preferences.  In the same dialog, there
                is also an option to save the Console Output to a
                file.
            </p><p>
                As you cannot provide any userspecific parameters to a
                WebStart Application from within WebStart,
it is currently not possible to choose log4j configuration
when running ArgoUML from Java Web Start.
            </p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5163"></a>5.11.3.3.&nbsp;...when running ArgoUML from NetBeans</h4></div></div><div></div></div><p>
                At the time of writing this paragraph, it is not possible to 
                set the logging configuration file on a per project basis in
                NetBeans.
                Instead, the Global Options of 
                [Debbuging and Execution/Execution Types/External 
                Execution/External Process] need to be changed.
            </p><div class="example"><a name="d0e5168"></a><p class="title"><b>Example&nbsp;5.6.&nbsp;External Execution Property (Arguments)</b></p><pre class="programlisting">
-cp {filesystems}{:}{classpath}{:}{library} <span class="emphasis"><em>-Dlog4j.configuration=URL</em></span>
    {classname} {arguments}
                </pre><p></p></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5176"></a>5.11.4.&nbsp;How to Customize Logging...</h3></div></div><div></div></div><p>
            There are some sample configuration files provided in 
            <i class="parameter"><tt>org.argouml.resource</tt></i>. Modify these according
            to your needs.
            Or alternatively, you can try <a href="http://www.japhy.de/configLog4j" target="_top">
            configLog4j</a> to assist yourself in creating a log4j configuration file.
        </p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5187"></a>5.11.5.&nbsp;References</h3></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li>
                The log4j project homepage at 
                    <a href="http://jakarta.apache.org/log4j/" target="_top">http://jakarta.apache.org/log4j</a></li><li>
                The configlog4j homepage at
                    <a href="http://www.japhy.de/configLog4j/" target="_top">http://www.japhy.de/configLog4j</a></li></ul></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jre"></a>5.12.&nbsp;JRE with utils</h2></div></div><div></div></div><p>
Purpose - to provide the infrastructure to run everything.
</p><p>
The JRE is a Layer 0 component. See <a href="#layer1" title="4.5.&nbsp;Layer 1 - Description of components">Section&nbsp;4.5, &#8220;Layer 1 - Description of components&#8221;</a>.
It is not distributed with ArgoUML but considered to be 
a precondition in the same respect as the user's host.
</p><p>
This is a Java3 JRE so swing and awt can be used together with
reflection.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="todoitems"></a>5.13.&nbsp;To do items</h2></div></div><div></div></div><a class="indexterm" name="d0e5216"></a><p>
Purpose - To keep track of the To do items.
Items are generated and removed automatically by the critics.
They could also be created by other means.
</p><p>
The To do items are located in
<tt class="classname">org.argouml.?</tt>
</p><p>
The To do items is a Layer 1 component. See <a href="#layer1" title="4.5.&nbsp;Layer 1 - Description of components">Section&nbsp;4.5, &#8220;Layer 1 - Description of components&#8221;</a>.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="propertypanels"></a>5.14.&nbsp;Property panels</h2></div></div><div></div></div><p>
Purpose - to provide a form view of the diagrams and objects in the model.
The contents of the model is modifyable.
</p><p>
The Property panels will be located in
<tt class="classname">org.argouml.?</tt>.
</p><p>
The Property panels is a Layer 2 component. See <a href="#layer2" title="4.6.&nbsp;Layer 2 - Description of components">Section&nbsp;4.6, &#8220;Layer 2 - Description of components&#8221;</a>.
</p><p>
Currently the PropPanels for the diagrams are in
<tt class="classname">org.argouml.uml.diagram.ui</tt>
and the property panels for the other object are in
<tt class="classname">org.argouml.uml.ui.<i class="replaceable"><tt>NS-UML path</tt></i></tt>.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="navigatortree"></a>5.15.&nbsp;Navigator tree</h2></div></div><div></div></div><p>
Purpose - to provide tree views of the model elements, 
diagrams and other objects.
</p><p>
The Navigator tree will be located in 
<tt class="classname">org.argouml.ui.navigator</tt>.
</p><p>
The Navigator tree is a Layer 2 component. See <a href="#layer2" title="4.6.&nbsp;Layer 2 - Description of components">Section&nbsp;4.6, &#8220;Layer 2 - Description of components&#8221;</a>.
</p><p>
Several tree views are provided by means of Perspectives.
Objects showin in the trees are 
the model elements, 
diagrams and 
other objects (such as 
profiles, 
groupings of model elements etc.).
</p><p>
The Navigator tree is currently shown in the Navigator Pane - 
the upper left hand pane of ArgoUML.
(See <a href="#guiframework" title="5.8.&nbsp;The GUI Framework">Section&nbsp;5.8, &#8220;The GUI Framework&#8221;</a>.)
</p><p>
There is also a Navigator Configurator dialog, which allows the user
to tailor the existing perspectives and create new perspectives 
to their needs 
(although the settings are not persisted).
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5276"></a>5.15.1.&nbsp;Details of current implementation</h3></div></div><div></div></div><p>
Some of the classes are actually reused by the other tree view, 
i.e. the todo/critics list.
</p><p>
The Navigator Tree provides some 'history' capability 
(although this is disabled presently and should problably be factored out)
to navigate back to previously selected model elements. 
</p><p>
Currently the Navigator pane is mixed with the GUI framework and actions
in <tt class="classname">org.argouml.ui</tt>.
The navigator tree is also dependant on "go rules", 
which are rules that help identify children nodes for and particular parent.
"Go rules" are mixed with Diagrams and Property panels 
under <tt class="classname">org.argouml.uml.diagram.ui</tt> and 
<tt class="classname">org.argouml.uml.diagram.<i class="replaceable"><tt>diagram</tt></i>.ui</tt>.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5297"></a>5.15.2.&nbsp;Requirements</h3></div></div><div></div></div><p>
The Navigator must react to user and application events.
</p><p>
User events include
</p><div class="orderedlist"><ol type="1" compact><li><p>
selection of a node, 
which must notify the other views to make the same selection.
</p></li><li><p>
right click on a node, which brings up a popup menu.
</p></li><li><p>
selection of another perspective in the Combox box,
which must change the tree model to that perspective.
</p></li><li><p>
node expansion and collapse.
</p></li></ol></div><p>
</p><p>
Application Events include:
</p><div class="orderedlist"><ol type="1" compact><li><p>
change of project, the tree must update
</p></li><li><p>
change in selection in another view, any relevant rows to be highlighted.
</p></li><li><p>
model changed, 
the tree must update to reflect additions/deletions 
and name changes in the model.
</p></li></ol></div><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5331"></a>5.15.3.&nbsp;Key Classes</h3></div></div><div></div></div><p>
The Navigator Tree contains Swing components, and there is currently
no abstraction layer (to help implement a IDE plugin for example.
</p><p>
There is a <tt class="classname">JTree</tt> subclass, 
<tt class="classname">DisplayTextTree</tt>, for the tree, with a
<tt class="classname">TreeModel</tt>, Perspective.
The Perspective is made of several 'Go rules', this enables Argo to
convert the graph-like structure of a uml model into a tree and it is
easily extensible.
</p><div class="mediaobject"><img src="images/cookbook/classes-navigatortree.gif"></div><p>
</p><p>
There are several different ways of implementing a 
<tt class="classname">TreeModel</tt> in Swing.
ArgoUML already has a model (the NSUML MModel instance), 
so we create a class (<tt class="classname">NavPerspective</tt>) 
that encapsulates the MModel instance and 
implements <tt class="classname">TreeModel</tt> 
(contains methods that enable the JTree to calculate the tree structure).
This implementation does not build/load a tree model on instantiation,
rather it provides children nodes for any given parent node 
when the user requests a node expansion.
The <tt class="classname">NavPerspective</tt> delegates
the task of calculating child nodes to the Go rules, 
making the tree model very flexible. 
However, the price for this (at the moment) is 
slow node expansion times for large models.
</p><p>
Each node is displayed with a name and an Icon, 
representing the type of node it is in the UML model. 
This is done using the 
<tt class="classname">org.argouml.uml.ui.UMLTreeRenderer</tt> (for the Icon),
and the text is produced in 
the <tt class="methodname">convertValueToText(...)</tt> method in 
<tt class="classname">DisplayTextTree</tt>.
</p><p>
Event handling is done in 
<tt class="classname">DisplayTextTree</tt> and 
<tt class="classname">NavigatorPane</tt>.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5384"></a>5.15.4.&nbsp;How do I ...?</h3></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>...add another perspective?</p><p>
</p><div class="itemizedlist"><ul type="circle"><li><p>
at runtime perspectives can be changed using the 
<tt class="classname">NavigatorConfigDialog</tt>
</p></li><li><p>
hard code it
</p><p>
Perspectives are build in the 
<tt class="classname">NavigatorPane</tt>, 
so you can add your one there. 
Also create new Go rules that are subclasses of 
<tt class="classname">AbstractGoRule</tt>, 
then register them with the Perspetive instance using 
<tt class="methodname">addSubTreeModel(TreeModel)</tt>.
</p></li></ul></div><p>
</p></li><li><p>...improve the PopUp menu?</p><p>
Look in the <tt class="classname">NavigatorPane</tt> class. 
The menu is built at runtime in reaction to a mouse event.
</p></li></ul></div><p>
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="moduleloader"></a>5.16.&nbsp;Module loader</h2></div></div><div></div></div><p>
Purpose - to provide the mechanisms to load (and unload) the Layer 3
and auxiliary modules.
</p><p>
The Module loader will be located in
<tt class="classname">org.argouml.?</tt>.
</p><p>
The Module loader is a Layer 2 component. See <a href="#layer2" title="4.6.&nbsp;Layer 2 - Description of components">Section&nbsp;4.6, &#8220;Layer 2 - Description of components&#8221;</a>.
</p><p>
Currently the module loader is located in
<tt class="classname">org.argouml.application.modules.ModuleLoader</tt>
with interfaces in
<tt class="classname">org.argouml.application.api</tt>.
</p><p>
This handles the enabling and disabling of every module.
</p><p>
An idea on how it could work:
It is then the modules responsibility to connect and register to
the component or components it is going to work with using that
components Facade or Plugin interface.
</p><p>
For details on how to build a module
see <a href="#modules_and_plugins" title="6.2.&nbsp;Modules and PlugIns">Section&nbsp;6.2, &#8220;Modules and PlugIns&#8221;</a>.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5456"></a>5.16.1.&nbsp;What the ModuleLoader does</h3></div></div><div></div></div><p>
The ModuleLoader is looking for module jars.
It actually scans through all jars available in the argo ext dir directory.
See Edit Settings Environment tab.
If you turn on logging on the debug level while running ArgoUML
you should be able to see what jar files it finds and what it does with them.
</p><p>
A module jar contains the classes, resources and a manifest file.
The manifest file points out the classes to be loaded.
Also notice that the Specification-Title and Vendor must be specified
correctly for this to work.
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ocl"></a>5.17.&nbsp;OCL</h2></div></div><div></div></div><a class="indexterm" name="d0e5466"></a><a class="indexterm" name="d0e5469"></a><p>
Purpose - To allow for editing of strings in the OCL language.
</p><p>
The OCL is located in
<tt class="classname">org.argouml.ocl</tt>.
</p><p>
The OCL is a Layer 3 component. See <a href="#layer3" title="4.7.&nbsp;Layer 3 - Description of components">Section&nbsp;4.7, &#8220;Layer 3 - Description of components&#8221;</a>.
</p><p>
The OCL editor gui interface is 
<tt class="classname">org.argouml.uml.ui.TabConstraints</tt>
(shown in the bottom right hand panel - details panel).
</p><p>
<tt class="classname">org.argouml.ocl.ArgoFacade</tt> adapts the 
<tt class="classname">tudresden.ocl.gui.OCLEditor</tt> for ArgoUML.
There are some other helper classes in 
<tt class="classname">org.argouml.ocl</tt>, 
with names beginning with OCL but they are used for other purposes.
Historicaly GEF uses OCL as a kind of template language to 
convert the uml diagrams to pgml(and back again), 
it doesn't have anything to do with ocl constraints in your uml model.
</p><p>
<tt class="classname">ArgoFacade</tt> is reused by 
<tt class="classname">GeneratorJava</tt> and 
<tt class="classname">TabConstraints</tt>.
</p><p>
	<a class="indexterm" name="d0e5512"></a>
Currently this component is more or less only 
Dresden OCL Toolkit
and adaptation.
</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="extending"></a>Chapter&nbsp;6.&nbsp;Extending ArgoUML</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>6.1. <a href="#howdoi_general">How do I ...?</a></dt><dt>6.2. <a href="#modules_and_plugins">Modules and PlugIns</a></dt><dd><dl><dt>6.2.1. <a href="#modules_vs_plugins">Differences between modules and plugins</a></dt><dt>6.2.2. <a href="#modules">Modules</a></dt><dt>6.2.3. <a href="#plugins">Plugins</a></dt><dt>6.2.4. <a href="#d0e5997">Tip for creating new modules (from Florent de Lamotte)</a></dt></dl></dd><dt>6.3. <a href="#d0e6011">How are modules organized in in the java code</a></dt><dd><dl><dt>6.3.1. <a href="#howdoi_source_code_modules">How do I ...?</a></dt></dl></dd></dl></div><p>
This section is not yet updated to discuss layers.
</p><p>
This section explains some general concepts which come in handy, when 
programming in ArgoUML.
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="howdoi_general"></a>6.1.&nbsp;How do I ...?</h2></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>
...get the according NS-UML element for a given
<tt class="classname">Fig<i class="replaceable"><tt>XXX</tt></i></tt> class?
</p><p>
Each <tt class="classname">Fig<i class="replaceable"><tt>XXX</tt></i></tt>
implements the method <tt class="methodname">getOwner()</tt>
which returns the appropriate owner element which is
responsible for this Fig element.
</p></li><li><p>
...get the according Fig element for a given 
<tt class="classname">MModelElement</tt>?
</p><p>
for this one needs to iterate through all fig elements and invoke
<tt class="methodname">getOwner</tt>.
Compare the result with the given <tt class="classname">MModelElement</tt>.
Beware that there might be more than one Fig Element per 
<tt class="classname">MModelElement</tt>.
</p></li></ul></div><p>
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="modules_and_plugins"></a>6.2.&nbsp;Modules and PlugIns</h2></div></div><div></div></div><p>
This section is not yet updated to discuss layers.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="modules_vs_plugins"></a>6.2.1.&nbsp;Differences between modules and plugins</h3></div></div><div></div></div><p>
The ArgoUML tool provides a basis
for UML design and potentially an executable architecture 
environment for other applications.
This is solved by clear interfaces between the ArgoUML core
and the extensions.
Extensions are called modules and the classes within the modules
that attach to ArgoUML core are called plugins.
</p><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>Modules</p><p>
A module is a collection of classes and resource files that can
be enabled and disabled in ArgoUML.
Currently this is decided by the modules' availability when ArgoUML starts 
but in the future it could be made possible to enable modules from within 
a running ArgoUML.
</p><p>
This module system is the extension capability to the ArgoUML tool. 
It will give developers of ArgoUML and 
developers of applications running within the ArgoUML architecture
the ability to add
additional functionality to the ArgoUML environment
without modifying the basic ArgoUML tool.
This flexibility should encourage
additional open source and/or commercial involvement
with the open source UML tool.  
</p><p>
The module extensions will load when ArgoUML starts.
When the modules are loaded
they have the capability of attaching
to internal ArgoUML architectural elements.
Once the plugins are attached,
the plugins will receive calls at the right moment and
can perform the correct action at that point.
</p><p>
Modules can be internal and external.
The only difference is that the internal modules are part of
the <tt class="filename">argouml.jar</tt> and the external are
delivered as separate jar-files.
</p></li><li><p>Plugins</p><p>
A plug-in in ArgoUML is a module
that implements the
<tt class="classname">org.argouml.application.api.Pluggable</tt> interface.
</p><p>
The <tt class="classname">Pluggable</tt> interface
acts as a passive dynamic component,
i.e. it provides methods to simplify the attaching
of calls at the correct places.
There are several <tt class="classname">Pluggable</tt> interfaces
that each simplify the addition of one kind of object.
Examples <tt class="classname">PluggableMenu</tt>, 
<tt class="classname">PluggableNotation</tt>.
</p><p>
One Module can implement several <tt class="classname">Pluggable</tt> interfaces.
</p></li></ul></div><p>
</p><p>
This is essentially and implementation of the Dynamic Linkage pattern 
as described in
Patterns in Java Volume 1 by Mark Grand ISBN 0-471-25839-3.
The whole of ArgoUML Core is the Environment,
the classes inheriting <tt class="classname">Pluggable</tt> are the
AbstractLoadableClass.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="modules"></a>6.2.2.&nbsp;Modules</h3></div></div><div></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="architecture_modules"></a>6.2.2.1.&nbsp;Module Architecture</h4></div></div><div></div></div><p>
The controlling class of the module/plugin extension
is <tt class="classname">org.argouml.application.modules.ModuleLoader</tt>.
<tt class="classname">ModuleLoader</tt> is a singleton
created in the ArgoUML main initialization routine.

</p><p>
<tt class="classname">ModuleLoader</tt> will:

</p><div class="itemizedlist"><ul type="disc"><li><p>read in the property file</p></li><li><p>for each of the classes found</p><div class="orderedlist"><ol type="1"><li><p>create the specified classes</p></li><li><p>call <tt class="methodname">initializeModule</tt> on this class</p></li><li><p>place the class object into the
internal list of modules</p></li></ol></div></li></ul></div><p>
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="argomodule_interface"></a>6.2.2.2.&nbsp;The ArgoModule interface</h4></div></div><div></div></div><p>
Each class must derive from the <tt class="classname">ArgoModule</tt> interface.
This interface provides the following methods:
</p><div class="itemizedlist"><ul type="disc"><li><div class="funcsynopsis"><p></p><p><code class="funcdef">
String <b class="fsfunc">getModuleName</b>
(</code><code>void)</code>;</p><p></p></div><div class="funcsynopsis"><p></p><p><code class="funcdef">
String <b class="fsfunc">getModuleDescription</b>
(</code><code>void)</code>;</p><p></p></div><div class="funcsynopsis"><p></p><p><code class="funcdef">
String <b class="fsfunc">getModuleVersion</b>
(</code><code>void)</code>;</p><p></p></div><div class="funcsynopsis"><p></p><p><code class="funcdef">
String <b class="fsfunc">getModuleAuthor</b>
(</code><code>void)</code>;</p><p></p></div><p>provides information about the ArgoUML module.  
</p></li><li><div class="funcsynopsis"><p></p><p><code class="funcdef">
boolean <b class="fsfunc">initializeModule</b>
(</code><code>void)</code>;</p><p></p></div><p><tt class="function">initializeModule</tt> is called
when the class loader has created the module,
and before it is added into the modules list.
<tt class="function">initializeModule</tt> should
initialize any required data
and/or attach itself as a listener to ArgoUML actions.
<tt class="classname">initializeModule</tt> for all modules is invoked
after the rest of ArgoUML has been initialized and loaded.
Any menu modifications or system level resources
should already be available
when the module initialization process is called.  
</p><p>
<tt class="function">initializeModule</tt>
should return <span class="returnvalue">true</span>
if the initialization is successful
(or if no initialization is necessary).
</p><p>
The only available mechanism for handling dependencies between
modules is the order in which they are read from the file.
</p></li><li><div class="funcsynopsis"><p></p><p><code class="funcdef">
void <b class="fsfunc">shutdownModule</b>
(</code><code>void)</code>;</p><p></p></div><p>
The <tt class="function">shutdownModule</tt> method is called
when the module is removed.
It provides each module the capability
to clean up or save any required information
before being cleared from memory.  
</p></li><li><div class="funcsynopsis"><p></p><p><code class="funcdef">
void <b class="fsfunc">setModuleEnabled</b>
(</code>boolean <var class="pdparam">tf</var><code>)</code>;</p><p></p></div><div class="funcsynopsis"><p></p><p><code class="funcdef">
boolean <b class="fsfunc">isModuleEnabled</b>
(</code><code>void)</code>;</p><p></p></div><p>
	Reserved for future implementation.
</p></li><li><div class="funcsynopsis"><p></p><p><code class="funcdef">
Vector <b class="fsfunc">getModulePopUpActions</b>
(</code><code>void)</code>;</p><p></p></div><p>
	Reserved for future implementation.
</p><p>
The plan is to have this called for each module when
the module should add its entries in PopUpActions.
</p></li><li><div class="funcsynopsis"><p></p><p><code class="funcdef">
String <b class="fsfunc">getModuleKey</b>
(</code><code>void)</code>;</p><p></p></div><p>Returns a string that identifies the module.
</p></li></ul></div><p>
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="using_modules"></a>6.2.2.3.&nbsp;Using Modules</h4></div></div><div></div></div><p>
When modules are used they can't be distinguished from the
rest of the ArgoUML environment.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="howdoi_modules"></a>6.2.2.4.&nbsp;How do I ...?</h4></div></div><div></div></div><p>
</p><div class="itemizedlist"><ul type="disc"><li><p>...create a module?</p><p>
</p></li><li><p>...tell when a module is loaded?</p><p>
</p></li></ul></div><p>
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="plugins"></a>6.2.3.&nbsp;Plugins</h3></div></div><div></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="architecture_plugins"></a>6.2.3.1.&nbsp;Plugin Architecture</h4></div></div><div></div></div><p>
Each class must derive from the <tt class="classname">Pluggable</tt> interface.
In addition to the methods declared in <tt class="classname">ArgoModule</tt>,
which <tt class="classname">Pluggable</tt> extends
(see <a href="#argomodule_interface" title="6.2.2.2.&nbsp;The ArgoModule interface">Section&nbsp;6.2.2.2, &#8220;The ArgoModule interface&#8221;</a>),
the interface provides the following method:

</p><div class="itemizedlist"><ul type="disc"><li><div class="funcsynopsis"><p></p><p><code class="funcdef">
boolean <b class="fsfunc">inContext</b>
(</code>Object[] <var class="pdparam">context</var><code>)</code>;</p><p></p></div><p>
<tt class="function">inContext</tt> allows a plug-in to decide
if it is available under a specific context. 
</p></li></ul></div><p>
</p><p>
One example of a plugin with multiple criteria is the PluggableMenu.
PluggableMenu requires the first context to be a JMenuItem
which wants the PluggableMenu attached to as the context,
so that it can determine that it would attach to a menu.  The
second context is an internal (non-localized) description 
of the menu such as "File" or "View"
so that the plugin can further decide.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="howdoi_plugins"></a>6.2.3.2.&nbsp;How do I ...?</h4></div></div><div></div></div><p>

</p><div class="itemizedlist"><ul type="disc"><li><p>...create a pluggable settings tab?</p><p>...</p></li><li><p>...create a pluggable menu item?</p><p>
Look at the modules junit and menutest for examples of how to add to
menus using the PluggableMenu interface.
</p><p>
The implementation of inContext() that you provide should be similar to: 
</p><pre class="programlisting">
    public boolean inContext(Object[] o) { 
        if (o.length &lt; 2) return false; 
        if ((o[0] instanceof JMenuItem) &amp;&amp; 
                ("Create Diagrams".equals(o[1]))) { 
            return true; 
        } 
        return false; 
    }
</pre><p>
</p><p>
The string "Create Diagrams" is a non-localized key string passed in
ProjectLoader at about line 440 in the statement
</p><pre class="programlisting">
    appendPluggableMenus(_createDiagrams, "Create Diagrams"); 
</pre><p>

There is no restriction on a single class implementing multiple
plugins - quite the contrary, that is one of the reasons for providing
the generic Pluggable interface that PluggableThings extend.
</p></li><li><p>...create a pluggable notation?</p><p>...</p></li><li><p>...create a pluggable diagram?</p><p>
Let's say we want to enable a new diagram type as a plug-in.
We use the interface PluggableDiagram that uses a
method that returns an JMenuItem object:

</p><pre class="programlisting">
    public JMenuItem getDiagramMenuItem();
</pre><p>

The returned menu item will be added to the diagrams menu
to allow to open a new diagram of this type.
</p><p>
In this example we do this by creating a helper class in the package
org.argouml.application.helpers that implements the created
plug-in interface PluggableDiagram, and call it DiagramHelper:

</p><pre class="programlisting">
public abstract class DiagramHelper extends ArgoDiagram
implements PluggableDiagram {

    /** Default localization key for diagrams
     */
    public final static String DIAGRAM_BUNDLE = "DiagramType";

    /** String naming the resource bundle to use for localization.
     */
    protected String _bundle = "";

    public DiagramHelper() {
        _bundle = getDiagramResourceBundleKey();
    }

    public void setModuleEnabled(boolean v) { }

    public boolean initializeModule() { return true; }

    public boolean inContext(Object[] o) { return true; }

    public boolean isModuleEnabled() { return true; }

    public Vector getModulePopUpActions(Vector v, Object o) { return null; }

    public boolean shutdownModule() { return true; }

    public JMenuItem getDiagramMenuItem()
    {
        return new JMenuItem(Argo.localize(_bundle,"diagram_type"));
    }

    public String getDiagramResourceBundleKey() {
        return DIAGRAM_BUNDLE;
    }
}

</pre><p>
The extension of ArgoDiagram is specific to this example;
the plug-in will provide a new ArgoUML diagram.

</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left">Important</th></tr><tr><td colspan="2" align="left" valign="top"><p>
Don't forget to do the localization stuff, because the
plug-in might be used in all languages ArgoUML offers!
</p></td></tr></table></div><p>

</p></li><li><p>
...do the localization stuff (not plug-in specific, but important)?
</p><p>...</p></li><li><p>...create a pluggable resource bundle?</p><p>...</p></li><li><p>...create a new pluggable type?</p><p>
</p><div class="orderedlist"><ol type="1"><li><p>
Create the plug-ins interface
</p><p>

In the package org.argouml.application.api, create an
interface that extends <tt class="classname">Pluggable</tt> (in the same package).
The class name must begin with 'Pluggable'.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
One of the main purposes of a plugin is
to provide the capability to add an externally defined class
that will be used by ArgoUML in the same way as a similar internal class.
This means that modifications are needed all over ArgoUML
in order to call the pluggable interface.
Therefore this must be done in ArgoUML itself and 
cannot be done in any module.
</p></td></tr></table></div><p>
</p><p>
It now inherits from <tt class="classname">ArgoModule</tt> the methods
</p><pre class="programlisting">
    public boolean initializeModule();
    
    public boolean shutdownModule();

    public void setModuleEnabled(boolean tf);
    
    public boolean isModuleEnabled();

    public String getModuleName();

    public String getModuleDescription(); 
    
    public String getModuleVersion(); 
    
    public String getModuleAuthor(); 
    
    public Vector getModulePopUpActions(Vector popUpActions, Object context);

    public String getModuleKey();
</pre><p>

and from <tt class="classname">Pluggable</tt> the methods

</p><pre class="programlisting">

    public boolean inContext(Object[] context);

</pre><p>

and thus provides the basic mechanism that plug-ins need.
</p></li><li><p>
Decide in what context this is to be enabled and add calls there
</p><p>
It is useful for those plugins which actually use context
to provide a helper method

</p><div class="funcsynopsis"><p></p><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0"><tr><td><code class="funcdef">
Object[] <b class="fsfunc">buildContext</b>
(</code></td><td>classtype1 &nbsp;</td><td><var class="pdparam">parameter1</var>, </td></tr><tr><td>&nbsp;</td><td>classtype2 &nbsp;</td><td><var class="pdparam">parameter2</var><code>)</code>;</td></tr></table><p></p></div><p>
which will serve two purposes.
</p><p>
First, it will provide a simple way of creating the Object[] parameter.
</p><p>
Second, it helps to document the context parameters within the class itself.
</p><p>
Again using <tt class="classname">PluggableMenu</tt> as an example,
it contains the function

</p><pre class="programlisting">

    public Object[] buildContext(JMenuItem parentMenuItem, String menuType);

</pre><p>

which is used as follows:

</p><pre class="programlisting">
    if (module.inContext(module.buildContext(_help, "Help"))) {
        _help.add(module.getMenuItem(_help, "Help"));
    }
</pre><p>
</p></li></ol></div><p>

</p></li></ul></div><p>

</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5997"></a>6.2.4.&nbsp;Tip for creating new modules (from Florent de Lamotte)</h3></div></div><div></div></div><a class="indexterm" name="d0e6000"></a><p>Florent wrote a small tutorial for creating modules. It can be found on the <a href="http://argopno.tigris.org/documentation/argouml.html" target="_top">ArgoPNO website</a>.
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6011"></a>6.3.&nbsp;How are modules organized in in the java code</h2></div></div><div></div></div><p>
This section is not yet updated to discuss layers.
</p><p>
The previous section describes how modules and plugins are 
connected on the java level totally independant of how they
are actually linked into ArgoUML.
</p><p>
Within the ArgoUML project some parts of the code are for
different reasons developed and kept separate from the main
ArgoUML source code.
These parts can be modules or plugins on the java level but
on the source code level they are called modules.
This section describes how they are organized and how you 
create such source-code modules.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="howdoi_source_code_modules"></a>6.3.1.&nbsp;How do I ...?</h3></div></div><div></div></div><p>
	  </p><div class="itemizedlist"><ul type="disc"><li><p>
...create a new source-code module.
</p><p>
Suggestion, copy from the 
<tt class="filename">junit</tt>
module as described here.
</p><p>
Make a copy of
<tt class="filename">argouml/modules/junit</tt>
into 
<tt class="filename">argouml/modules/<i class="replaceable"><tt>yourname</tt></i></tt>.
</p><p>
Remove <tt class="filename">junit.jar</tt>
from
<tt class="filename">argouml/modules/<i class="replaceable"><tt>yourname</tt></i>/lib</tt>.
</p><p>
Add any jar you need to 
<tt class="filename">argouml/modules/<i class="replaceable"><tt>yourname</tt></i>/lib</tt>.
</p><p>
Edit
<tt class="filename">argouml/modules/<i class="replaceable"><tt>yourname</tt></i>/module.properties</tt>
</p><p>
Edit references to
<tt class="filename">junit.jar</tt> in
<tt class="filename">argouml/modules/<i class="replaceable"><tt>yourname</tt></i>/build.xml</tt>
to any new jars you need.
</p><p>
Edit <tt class="filename">argouml/modules/yourname/src/org/manifest.mf</tt>.
</p><p>
Reorganize the source files as necessary.
Something like org.argouml.<i class="replaceable"><tt>yourname</tt></i>
as the package root.
</p></li><li><p>
...get Argo to use a plugin?
</p><p>
    Once you've created a jar file with a plugin in it,
    you need to make sure that Argo can find the jar
    to be able to execute it.
</p><p>
    If you are using a "standard" ArgoUML source structure,
    then you should be able to execute <b class="command">build install</b>
    or <b class="command">ant install</b>
    in the source directory of the plugin.
    This will copy the jar file to the proper directory in the
    main ArgoUML build target.
    You can test your plugin by running <b class="command">build run</b>
    in the <tt class="filename">src_new</tt> directory.
</p><p>
    If you need to install the jar "the hard way",
    try the following steps.
    </p><div class="itemizedlist"><ul type="circle"><li>
         Start up ArgoUML.
      </li><li>
         Go to the menu <b class="command">Edit-&gt;Settings</b>
	 and look at the <b class="command">Environment</b> tab.
	 Find the entry labelled <tt class="literal">${argo.ext.dir}</tt>.
         Create that directory if it does not already exist.
      </li><li>
         Copy the plugin jar
	 and any other jars required by it
	 into that directory.
      </li><li>
         Start up ArgoUML again,
	 and you should see the plugin's startup banner
	 (if it has one, of course).
      </li></ul></div><p>

</p></li></ul></div><p>
</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e6133"></a>Chapter&nbsp;7.&nbsp;CVS repository contents</h2></div></div><div></div></div><p>
This chapter describes what parts of the CVS repository is used for
what purpose.
This is a rather terse collection.
Further details on specific parts can sometimes be found elsewhere in
this document.
</p><p>
This chapter is organized as the CVS repository itself and
everything is in alphabetical order.
</p><p>
</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="filename">build</tt></p><p>Directory where the built things end up.</p><p>
There is actually no real need to keep this in CVS.
It is there just as a place holder.
</p></li><li><p><tt class="filename">conf</tt></p><p>Not used. Empty.</p></li><li><p><tt class="filename">documentation</tt></p><p>Directory where the source of the documentation is.</p><p>
</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="filename">cookbook</tt></p><p>XML-source code for this cookbook.</p></li><li><p><tt class="filename">docbook-setup</tt></p><p>
XML Tools and configuration files used for the formatting of
the documentation from the XML-source to HTML and PDF.
</p></li><li><p><tt class="filename">images</tt></p><p>Pictures for all documents are collected here.</p></li><li><p><tt class="filename">javahelp</tt></p><p>Not used. Empty.</p></li><li><p><tt class="filename">manual</tt></p><p>XML-source code for the User Manual.</p></li><li><p><tt class="filename">quick-guide</tt></p><p>XML-source code for the Quick Guide.</p></li></ul></div><p>
</p></li><li><p><tt class="filename">extra</tt></p><p>Not used. Empty.</p></li><li><p><tt class="filename">lib</tt></p><p>A set of jar files.</p><p>
This directory contains the jar files of products used
by the ArgoUML
(such as log4j, nsuml).
</p><p>
These are distributed with argouml and have licenses that allow this.
For clarity the README files and licenses and other distribution
details of each used jar will also be stored in this directory.
(Quick summary: BSD License, Apache License, LGPL are OK, GPL is not.)
Don't forget to arrange for the modules version and license information
to appear when starting ArgoUML and in the About box.
</p><p>
Take care also to make the versions of these libraries explicit,
so as to allow people building from sources to figure out
exact dependencies. Easiest way is to rename the files to
include versioning informations, the same way as shared
libraries in Unix world: foo-x.y.z.jar, bar-x.y.z.jar,
etc...
</p></li><li><p><tt class="filename">modules</tt></p><p>Contains source level modules of ArgoUML.</p><p>
Source level modules are modules that can be compiled and deployed
independantly (after) the rest of ArgoUML.
Each module is located in its own subdirectory.
This is the list as it looks now (March 2003).
</p><p>
</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="filename">jscheme</tt></p><p>
Module that allows to extend ArgoUML using scheme.
</p></li><li><p><tt class="filename">junit</tt></p><p>
Old directory with JUnit tests.
These should be migrated to and all new JUnit tests should be created in
the directory <tt class="filename">tests</tt>.
</p></li><li><p><tt class="filename">menutest</tt></p><p>
Test module that tests the plugin interface for the menus.
</p></li><li><p><tt class="filename">php</tt></p><p>
Language generating, Notation and reverse engineering for PHP.
</p></li><li><p><tt class="filename">cpp</tt></p><p>
Code generation for C++.
</p></li><li><p><tt class="filename">csharp</tt></p><p>
Code generation for C#.
</p></li></ul></div><p>
</p></li><li><p><tt class="filename">src</tt></p><p>
Source code.
</p><p>
This will contain one directory for each component within
ArgoUML.
They will all compile and be tested with controlled dependencies
to other components.
</p></li><li><p><tt class="filename">src_new</tt></p><p>
All source code for ArgoUML including pictures of icons.
</p></li><li><p><tt class="filename">tests</tt></p><p>
All source code for JUnit tests of everything that is in the src_new
directory.
See <a href="#junittests" title="2.4.&nbsp;The JUnit test cases">Section&nbsp;2.4, &#8220;The JUnit test cases&#8221;</a>.
</p></li><li><p><tt class="filename">tools</tt></p><p>
All tools used during the build process.
</p><p>
Tools also have the readme files, licenses and other distribution files
stored in this directory in much the same way as the libraries in
<tt class="filename">lib</tt>.
However the requirement on the license is different.
The tools are never distributed with argouml but merely used in the
development of argouml so it is enough to have a license that does not
allow distribution.
(Quick summary: BSD License, Apache license, LGPL, GPL, Freeware are OK.)
</p></li><li><p><tt class="filename">www</tt></p><p>
This is all the static contents of the web site.
See <a href="#how_the_web_site_works" title="2.3.2.1.&nbsp;How the ArgoUML web site works">Section&nbsp;2.3.2.1, &#8220;How the ArgoUML web site works&#8221;</a>.
</p></li></ul></div><p>
</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="documentation_what_goes_where"></a>Chapter&nbsp;8.&nbsp;Organization of ArgoUML documentation</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Linus</span> <span class="surname">Tolke</span></h3></div></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>
This chapter contains written down ideas on what goes into what
part of the documentation. These ideas are formulated by Linus Tolke.
</p></div></div></div><div></div></div><p>
There are seven significantly different bits of documentation in the
ArgoUML project.
By documentation I mean some information of the product that is
developed alongside the product and that has a persistant value.
</p><div class="orderedlist"><ol type="1"><li><p>The code, variablenames, class names</p></li><li><p>The javadoc</p></li><li><p>The cookbook</p></li><li><p>The web site in CVS</p></li><li><p>The manual and quick-guide</p></li><li><p>Help texts within the running ArgoUML</p></li><li><p>The FAQ</p></li></ol></div><p>
These different bits have all different purpose and audience and
the purpose of this chapter is to try to define that.
</p><div class="table"><a name="d0e6356"></a><p class="title"><b>Table&nbsp;8.1.&nbsp;Bits of documentation</b></p><table summary="Bits of documentation" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>Bit</th><th>Audience</th><th>Main purpose</th><th>Contains</th></tr></thead><tbody><tr><td>The code</td><td><div class="orderedlist"><ol type="1"><li><p>
Other developers that will maintain and improve on the code.
</p></li><li><p>
The compiler.
</p></li></ol></div></td><td>
Implement ArgoUML in a maintainable and understandable way.
</td><td>
See <a href="#standards" title="Chapter&nbsp;10.&nbsp;Standards for coding in ArgoUML">Chapter&nbsp;10, <i>Standards for coding in ArgoUML</i></a> for more information.
</td></tr><tr><td>The javadoc</td><td>
Developers writing code that communicates or in other ways interact
with this class.
</td><td>
Make it easy to see what the functions of every class are and how
to use them.
</td><td>
Description of the functions of all classes,
all public and protected methods, variables, and constants.
</td></tr><tr><td>The cookbook</td><td>
Developers writing code, maintaining the documentation or the web site.
</td><td>
Make it easy to learn how ArgoUML works and how to extend it.
Be a collection of knowledge around how everything is set up.
Be a store of the agreed solution around fundamental design decisions
i.e. design decisions that are so big that it is meaningless to
store them in the javadoc.
Be a collection of knowledge around how and why the project makes
certain decisions.
</td><td>
Instructions on how to add new functions and behavior.
Instructions on how to do the chores around maintenance
(build a release, publish a release,
build the documentation part of the release,
test ArgoUML, test the documentation, ...).
Agreed project rules like what level of quality is aimed for and
description of processes that achieves that level.
</td></tr><tr><td>The web site in CVS</td><td>
Everyone, i.e. developers in the project, users of the product,
people searching for UML tools for the purpose of trying, testing,
evaluating, and using the tools.
</td><td>
Be an entry point for the other parts of the documentation.
Be the main download area for the ArgoUML product.
Be the central point of the ArgoUML user community.
Be the central point of the ArgoUML development project.
</td><td>
References to all the other parts of the documentation.
Current project information like the contents of the upcoming releases
and the plan for the nearest future.
Easy access illustration for users to be.
Some illustrations that do not work well in the other 
parts of the documentation. 
This is done as a complement to the other parts. 
Examples, tours.
</td></tr><tr><td>The manual and quick-guide</td><td>
Users of ArgoUML.
Persons that want to evaluate ArgoUML for the purpose of starting to use it.
Persons that are training to use UML and ArgoUML.
</td><td>
Describe how ArgoUML is installed and used.
Describe how UML is used with ArgoUML.
</td><td>
Complete installation instructions for all supported installation schemes.
Complete description on how to use ArgoUML in your project.
Complete reference on how to use ArgoUML.
</td></tr><tr><td>Help texts within the running ArgoUML</td><td>
Users of ArgoUML.
</td><td>
Give a quick help with a specific feature or button.
Give short explanations of all commands and actions.
</td><td>
A complete set of quick help and explanations.
</td></tr><tr><td>The FAQ</td><td>
Users of ArgoUML.
Members of the users mailing list.
</td><td>
Cope for shortcomings in ArgoUML, the help text, 
the Manual and quick-guide and the web site.
</td><td>
A list of issues that are not addressed in the other part of the documentation.
It is written in questions-answers-format and the contents is governed by
the issues discussed recently in the user community.
</td></tr></tbody></table><p></p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="cvs"></a>Chapter&nbsp;9.&nbsp;How to work with CVS</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>9.1. <a href="#groundrules">Ground rules</a></dt><dt>9.2. <a href="#branches">Creating and using branches</a></dt><dd><dl><dt>9.2.1. <a href="#howdoi_cvs">How do I ...?</a></dt></dl></dd><dt>9.3. <a href="#d0e6829">Other CVS comments</a></dt></dl></div><a class="indexterm" name="d0e6474"></a><a class="indexterm" name="d0e6479"></a><a class="indexterm" name="d0e6484"></a><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="groundrules"></a>9.1.&nbsp;Ground rules</h2></div></div><div></div></div><p>
When you have done all the work, and all the testing and
are about to commit something please do:
</p><div class="orderedlist"><ol type="1"><li><p>
Compile argouml 
(<b class="command">build run</b> or <b class="command">build package</b>).
</p><p>
This goes for all changes, even changes in comments.
</p></li><li><p>
If your changes include removing files make a clean compile.
(<b class="command">build clean</b> followed by
<b class="command">build run</b> or <b class="command">build package</b>).
</p></li><li><p>
If your changes include removing public or protected operations and
attributes make a clean compile
(<b class="command">build clean</b> followed by
<b class="command">build run</b> or <b class="command">build package</b>).
</p><p>
The build mechanism does not yet have reliable 
dependancy checker enabled so this is the best way to make sure.
</p></li><li><p>
If your changes include adding abstract operations make a clean compile
(<b class="command">build clean</b> followed by
<b class="command">build run</b> or <b class="command">build package</b>).
</p><p>
The build mechanism does not yet have reliable 
dependancy checker enabled so this is the best way to make sure.
</p></li><li><p>
If you have changed anything that has the potential of affecting
something in a totally different part of the code like internal
data structure, handling of exceptions, 
run all JUnit test cases
and start the tool and do some more testing.
</p><p>
If in doubt, run all JUnit test cases.
</p></li><li><p>
Do a <b class="command">cvs update</b> in src_new to make sure that 
you do not forget to commit any file and to make sure that no one 
else has commited anything in the mean time.
</p><p>
Remember that if you do not commit all the files from src_new
that <b class="command">cvs update</b> found (marked A, R, and M)
in the same commit then you would better remove those file
from the checked out copy, update to get the original version
from the repository and start over with the compilation.
</p><p>
If someone else have updated a file 
(<b class="command">cvs update </b> shown U, or no longer pertinent)
please compile again.
</p></li><li><p>
Commit all files that are included in a change at the same time.
</p><p>
This reduces the chance of anyone getting an inconsistant set of files
by updating in the middle of your commit.
</p></li><li><p>
Commit often.
</p><p>
Remember that the repository is also a backup copy of your work.
</p><p>
If your change is so big and involves so many files that you would
like to commit it for backup reasons but it doesn't compile or
doesn't work or for some other reason should not confuse the main 
branch in cvs, create a branch to work in.
Then when your work is complete, you merge the branch into 
the main branch.
</p></li></ol></div><p>
</p><p>
<span class="emphasis"><em>Rationale:</em></span>
These ground rules is for the purpose of not stopping or hindering
the work for anyone.
Remember that there might be several developers working with
different agendas and different efficiency (slower or faster)
and the commits is the melting point of this.
</p><p>
<span class="emphasis"><em>Perspective:</em></span>
If this will take you an extra two minutes before every commit
remember that if you commit something that will not work this
will take everyone else (guess 10 persons) the extra time of
looking at the compilation error or see the tool crash (1 minute),
wonder why (1 minute),
search for the error in his own changes (3 minutes),
search for the error somewhere else (1 minute),
glance at the mailing list to see if someone else has noticed this 
and send a mail (1 minute),
wait for some response (1 hour wait),
update (1 minute),
compile (1 minute).
This amounts to 10 hours wait and 1,5 hours extra work for
all developers in the project.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="branches"></a>9.2.&nbsp;Creating and using branches</h2></div></div><div></div></div><a class="indexterm" name="d0e6593"></a><p>We use the following standards in ArgoUML:
</p><div class="itemizedlist"><ul type="disc"><li><p>Released versions get the tag <span class="emphasis"><em>VERSION_X_X_X</em></span></p></li><li><p>
Developers working on code, with an unspecified due date are requested
to put the code into a branch if it is deemed useful that the code can
be shared. Developer branches follow the scheme:
<span class="emphasis"><em>work_<i class="replaceable"><tt>explanation</tt></i>_<i class="replaceable"><tt>owner</tt></i></em></span>, where
            </p><div class="itemizedlist"><ul type="circle"><li><p>work is a literal</p></li><li><p>
<i class="replaceable"><tt>explanation</tt></i> is something like javahelp,
propertypanel, cppcodegeneration
</p></li><li><p>
<i class="replaceable"><tt>owner</tt></i> is a self explaining code for the
owner of the branch, 
e.g. tlach (Thierry Lach) or mklink (Markus Klink).
</p></li></ul></div><p>
</p></li></ul></div><p>
</p><p>Merging branches together is causing some work. So please use them sparingly and announce your intentions before on the mailing list.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="howdoi_cvs"></a>9.2.1.&nbsp;How do I ...?</h3></div></div><div></div></div><p>
	  </p><div class="itemizedlist"><ul type="disc"><li><p>
...commit stuff?
</p><p>
You have made, the change, tested it and are satisfied with it.
</p><p>
Do a <b class="command">cvs update -d</b> and see that only the files 
you have changed are marked as modified.
If files are updated or patched by this command, 
please recompile and test again.
</p><p>
Do a <b class="command">cvs diff</b> on each of the files and verify that
only the lines you have changed are modified.
</p><p>
Do a single <b class="command">cvs commit</b> for all the files included
in the change.
This reduces the risk that someone else updates in the middle of your 
work and also reduces the amount of notifications of commits sent out.
Include changes to documentation and JUnit tests if applicable.
</p><p>
Don't forget to update the corresponding issue (if any) in Issuezilla 
i.e. set it to RESOLVED/FIXED.
</p></li><li><p>
...get my update or patch into CVS if I don't have CVS write rights?
</p><p>
Contact any of the active developers on the list and send them your
updates. They're very nice about it the first few times.
</p><p>
Supposing that you have checked out CVS as guest, then after you have
mailed a diff or file to an active developer, and he has entered it in CVS
your checked out copy contains the change but is not in sync and
the next <b class="command">cvs update</b> will result in an merge error.
The simplest way to solve this is to do remove all files modified by you
before doing the <b class="command">cvs update</b>. 
The <b class="command">cvs update</b> will restore all the files from the 
CVS repository and you can start with the next update.
</p></li><li><p>...get a list of the currently active working branches?</p><p>
You can't from CVS. You need to follow the announcements of created
and discontinued branches on the mailing list to know what branches are
interesting.
	      </p></li><li><p>
...create a branch for my work on <i class="replaceable"><tt>xxxyyy</tt></i> 
and start work on that branch?</p><p>
This assumes that you have a checked out copy of argouml
	      </p><div class="orderedlist"><ol type="1"><li><p>Change directory to the directory where argouml is checked out.</p></li><li><p>
Enter the argouml directory:
<b class="command">cd argouml</b> or <b class="command">chdir argouml</b>
		  </p></li><li><p>
Create your branch: 
<b class="command">cvs tag -b <i class="replaceable"><tt>work_xxxyyy_myname</tt></i></b>
		  </p><p>
<i class="replaceable"><tt>myname</tt></i> is is a self explaining code for you
(your Tigris login).
		  </p></li><li><p>
Change your checked out copy to be on the branch:
<b class="command">cvs update -r <i class="replaceable"><tt>work_xxxyyy_myname</tt></i></b>
		  </p></li><li><p>Do your work!</p></li><li><p>
Check in your changes in the branch:
<b class="command">cvs commit -m'<i class="replaceable"><tt>Blablabla</tt></i>' [<span class="optional">file</span>]</b>
		  </p></li><li><p>Continue working and checking in!</p></li></ol></div></li><li><p>...move my work from my working branch into the release?</p><p>
This is done when your work with the feature xxxyyy is finished and you have
decided/received clearance to enter it in the main branch.
	      </p><div class="orderedlist"><ol type="1"><li><p>
Change directory to the directory where argouml is checked out.
		  </p><p>
If you are just working on one feature at a time this is the place where you
have a checked out copy on the branch in question. If not, this could be any
checked out copy of the source that does not contain any uncommited changes.
		  </p></li><li><p>
Enter the argouml directory:
<b class="command">cd argouml</b> or <b class="command">chdir argouml</b>
		  </p></li><li><p>
Move the checked out copy that you are working on to the main branch:
<b class="command">cvs update -A</b>
		  </p></li><li><p>
Merge the changes from the branch into your checked out copy:
<b class="command">cvs update -j <i class="replaceable"><tt>work_xxxyyy_myname</tt></i></b>
		  </p></li><li><p>
Compile and run all your tests again.
		  </p><p>
This is to verify that the merge was all right, no one else had done any changes
that in the meantime that has in any way modified the work made in the branch.
		  </p></li><li><p>
Commit your changes in the main branch:
<b class="command">cvs commit -m'<i class="replaceable"><tt>xxxyyy entered in the main branch</tt></i></b>
		  </p></li><li><p>
Discontinue your branch!
		  </p><p>
From this point on it is important that you do not reuse your branch for 
any work. Only check it out for the purpose of examining how things were
in the branch. Make sure that all other developers that have been looking
at your branch also knows that it is discontinued.
		  </p></li></ol></div></li><li><p>...look at someone else's work in a branch?</p><p>
You need the name of the branch, i.e. the 
<i class="replaceable"><tt>work_xxxyyy_hisname</tt></i>.
	      </p><p>
There are two alternatives:
		</p><div class="itemizedlist"><ul type="circle"><li><p>
Check out argouml or part of it on that branch:
<b class="command">cvs co -r <i class="replaceable"><tt>work_xxxyyy_hisname</tt></i> argouml</b>
		    </p></li><li><p>
Update your copy of argouml to be on that branch:
<b class="command">cvs update -r <i class="replaceable"><tt>work_xxxyyy_hisname</tt></i></b>
		    </p><p>
Make sure that your copy does not have any uncommited code or else your
uncommited code will be present in your checked out copy on the branch.
This could, on the other hand, be useful if you want to test if your uncommited
code works also with the additions on that branch.
		    </p></li></ul></div><p>
	      </p></li></ul></div><p>
	</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6829"></a>9.3.&nbsp;Other CVS comments</h2></div></div><div></div></div><p>
This is included in the cookbook because it seems that there are
persons within the project that don't have the in-depth knowledge
of CVS nor the interest or need to acquire it.
For that reason some simple questions are answered here 
for use of CVS in the project.
</p><div class="itemizedlist"><ul type="disc"><li><p>
Why do I get double lines?
Why do I get ^M at the end of each line?
Why do I get the whole checked out file on a single line?
</p><p>
CVS is line oriented.
It stores in the repository the concept of a new line
after each line.
It is the CVS clients (the program you have installed on you machine) 
responsibility to convert the conceptual new line to the correct new
line character on your system.
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td colspan="2" align="left" valign="top"><p>
This is only so for normal files (not marked with -kb in cvs).
</p></td></tr></table></div><p>
</p><p>
If files are moved from one system to another or for that matter
checked out on one system and used and edited on another (NFS, SMB, ...)
this is not done correctly.
There could also be CVS clients out there, not doing this correctly. 
</p><p>
Systems known to the author (Linus Tolke) 
are Unix uses LF, DOS/Windows uses CR-LF,
Mac uses CR.
</p><p>
Most of the time this really doesn't matter because the editors and
java compiler on all systems are very forgiving.
</p><p>
There are however some cases when this is cumbersome.
</p><div class="orderedlist"><ol type="1"><li><p>When an editor (or developer) decides to "fix-it".</p><p>
This means that the editor (or the developer) goes through the file and
removes ^M on every line or something else that touches every line 
in the file.
</p><p>
This is a problem because the subsequent commit will also touch every
line in the file making that file unmergeable.
This means that every developer that had it modified in a branch or in
a checked out copy will have no help from cvs when doing his merging.
</p><p>
Remember that you never know what other developers are working with.
</p><p>
This is fixed by not doing any such fixes and doing a 
<b class="command">cvs diff</b> before
each check in so that your editor has not done this for you.
</p></li><li><p>When cvs clients and file systems are not in sync</p><p>
This could result in one of several things. 
Either each line gets an extra empty line when commited,
or the whole file turns out to be on the same line.
</p><p>
This is the case on several files in the repository at the moment
(August 2002, Linus) and can be cumbersome for the developers.
</p><p>
These cases should be fixed because the files are no longer
readable.
For the first case, removing every other line (the empty ones)
can in some cases be done without cvs having problems with
merging later on.
For the second case, with a single long line, this will be very
problematic so even though it might cause problems for other
developers it is better to do this as soon as possible.
</p><p>
When this is fixed, let the fix be the only thing done in that commit.
</p><p>
To avoid this in the future, always do a 
<b class="command">cvs diff</b> before doing your
change to make sure that only the lines that you have actually
modified will be changed by cvs and not the whole file.
</p></li></ol></div><p>
Files that are binary that shall be stored in cvs shall be marked
as binary.
They are marked with the admin flag -kb.
This means that the line ending conversion mechanism will not be applied
on those files and they will be exactly the same on all systems.
This is good for jars, gifs, and other such files.
</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="standards"></a>Chapter&nbsp;10.&nbsp;Standards for coding in ArgoUML</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>10.1. <a href="#d0e6969">Settings for Eclipse</a></dt><dt>10.2. <a href="#d0e7002">Settings for NetBeans</a></dt><dt>10.3. <a href="#d0e7021">Settings for Emacs</a></dt></dl></div><a class="indexterm" name="d0e6890"></a><a class="indexterm" name="d0e6895"></a><p>
The coding style for ArgoUML is the following
</p><div class="itemizedlist"><ul type="disc"><li><p>
Each file starts with some header info: 
file, 
version info, 
copyright notice,
classes in this file (if more than one),
original author (if you want).
Like this:
</p><pre class="programlisting">
// $Id$
// Copyright (c) 2003 The Regents of the University of California. All
// ...

// Classes: blabla, blabla (all classes of interest in this file)
// Original Author: who ever
</pre><p>
</p></li><li><p>
All instance variables are private and their names begin with an underscore.
If the variable should be accessible then add public or protected
accessor methods with the same name as the variable without the
underscore with "get" or "set" prepended.
For example:
<tt class="varname">_lineWidth</tt>, 
<tt class="methodname">setLineWidth()</tt>, and 
<tt class="methodname">getLineWidth()</tt>.
</p></li><li><p>
In general, write short code.
If a method will fit comfortably on one line, then put it on one line.
</p></li><li><p>
Use javadoc for each class, instance variable, and method. 
In general do not put comments in the body of a method. 
If you are doing something complex enough to need a comment, consider
breaking it out into its own private commented method.
</p></li><li><p>
Indicate places of future modifications with 
</p><pre class="programlisting">
// TODO: reason
</pre><p>
</p></li><li><p>
Name all classes with an initial uppercase letter, and all variables
and methods with a lowercase one. 
I use the <tt class="varname">allTogetherWithCaps</tt> naming style.
Name static variables with an underscore and an inital capital letter,
e.g., <tt class="varname">_PossibleLanguages</tt>.
Name constants with all upper case and underscores, e.g., 
<tt class="constant">GRIP_MARGIN</tt>.
</p></li><li><p>
To emphasize clusters of classes we are using what we call the binomial
naming style (I am sure others have thought of this also): 
The root class of the cluster has a short name (e.g., Layer), 
other members of the cluster use that name as a prefix (e.g., LayerGrid).
This makes many of the class name longer than they might be normally (e.g., Grid would be shorter).
But this provides a lot of context without
having to look at a class inheritance diagram.
It is also very nice when you have to look at an alphabetical list
of classes. I try to name class clusters so that they are not lexigraphically close others (e.g., the Net cluster
used to be named Model, but that lexigraphically overlapped the Mode cluster).
</p></li><li><p>
Four spaces should be used as the unit of indentation.
Tabs must be set exactly every 8 spaces (not 4) and represent 2 indents.
</p><p>
This is exactly as it is stated in the Sun Code Conventions.
It is here just for the emphasis.
</p></li><li><p>
If possible use lines shorter than 80 charaters wide.
</p><p>
This is exactly as it is stated in the Sun Code Conventions.
It is here just for the emphasis.
</p></li><li><p>
Open brace on same line (at end).
Both for if/while/for and for class and functions definitions.
</p><p>
This is exactly as it is stated in the Sun Code Conventions.
It is here just for the emphasis.
</p></li><li><p>
For everything else follow
<a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html" target="_top">
Code Conventions for the Java Programming Language
</a>!
</p></li></ul></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6969"></a>10.1.&nbsp;Settings for Eclipse</h2></div></div><div></div></div><span class="author"></span><p>
These style guides correspond to the following settings in Eclipse:
        </p><div class="itemizedlist"><ul type="disc"><li><p>In Preferences =&gt; Java =&gt; Code Formatter =&gt; New Lines</p><p>
None of the boxes 
"Insert a new line before opening brace",
"Insert new lines in control statements",
"Clear all blank lines",
"Insert new line between 'else if'",
or
"Insert a new line inside an empty block"
are checked.
</p></li><li><p>
In Preferences =&gt; Java =&gt; Code Formatter =&gt; Line Splitting
</p><p>
Maximum line length is 80.
</p></li><li><p>In Preferences =&gt; Java =&gt; Code Formatter =&gt; Style</p><p>
None of the boxes
"Compact assignment"
or
"Indentation is represented by a tab"
are checked.
</p><p>
Number of spaces representing a tab: 4.
This should probably be read as Number of spaces representing a 
level of indentation.
</p></li><li><p>In Preferences =&gt; Java =&gt; Java Editor =&gt; Appearance</p><p>
Displayed tab width: 8
</p><p>
"Insert space for tabs (see Formatting preferences)" checked.
There seems to be no way of having tabs set at width 8 and the
indentation level set at 4 at the same time so we must let
Eclipse generate code without tabs to obey the Sun Coding standard.
</p></li></ul></div><p>
      </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7002"></a>10.2.&nbsp;Settings for NetBeans</h2></div></div><div></div></div><span class="author"></span><p>
These style guides correspond to the following settings in NetBeans:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
In (Tools =&gt;) Options =&gt; Editing =&gt; Editor Settings =&gt; Java Editor
</p><p>
Tab Size = 8
</p></li><li><p>
In (Tools =&gt;) Options =&gt; Editing =&gt; 
Indentation Engines =&gt; Java Indentation Engine
</p><p>
Add Newline Before Brace: False,
Add Space Before Parenthesis: False,
Expand Tabs to Spaces: False,
Number of Spaces per Tab: 4 (Should probably be read as
Number of Spaces per indentation level).
</p></li></ul></div><p>
      </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7021"></a>10.3.&nbsp;Settings for Emacs</h2></div></div><div></div></div><span class="author"></span><p>
These style guides correspond to the default java settings in Emacs:
</p><pre class="programlisting">
 ("java"
  (c-basic-offset . 4)
  (c-comment-only-line-offset 0 . 0)
  (c-offsets-alist
   (inline-open . 0)
   (topmost-intro-cont . +)
   (statement-block-intro . +)
   (knr-argdecl-intro . 5)
   (substatement-open . +)
   (label . +)
   (statement-case-open . +)
   (statement-cont . +)
   (arglist-intro . c-lineup-arglist-intro-after-paren)
   (arglist-close . c-lineup-arglist)
   (access-label . 0)
   (inher-cont . c-lineup-java-inher)
   (func-decl-cont . c-lineup-java-throws)))
</pre><p>
</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="further_reading"></a>Chapter&nbsp;11.&nbsp;Further Reading</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>11.1. <a href="#robbins">Jason Robbins Dissertation</a></dt><dd><dl><dt>11.1.1. <a href="#d0e7050">Abstract</a></dt><dt>11.1.2. <a href="#d0e7057">Where to find it</a></dt></dl></dd><dt>11.2. <a href="#skinner">Martin Skinners Dissertation</a></dt><dd><dl><dt>11.2.1. <a href="#d0e7075">Abstract</a></dt><dt>11.2.2. <a href="#d0e7082">Where to find it</a></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="robbins"></a>11.1.&nbsp;Jason Robbins Dissertation</h2></div></div><div></div></div><a class="indexterm" name="d0e7038"></a><p>
Cognitive Support Features for Software Development Tools
</p><p>
The dissertation of Jason Robbins is a <span class="emphasis"><em>MUST READ</em></span> for everyone concerned about ArgoUML. Be careful though, since it is based on an old version of ArgoUML, but many of the concepts remain intact.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7050"></a>11.1.1.&nbsp;Abstract</h3></div></div><div></div></div><p>
Software design is a cognitively challenging task. Most software
design tools provide support for editing, viewing, storing, sharing,
and transforming designs, but lack support for the essential and
difficult cognitive tasks facing designers. These cognitive tasks
include decision making, decision ordering, and task-specific design
understanding. To date, software design tools have not included
features that specifically address key cognitive needs of designers,
in part, because there has been no practical method for developing and
evaluating these features.
</p><p>
This dissertation contributes a practical description of several
cognitive theories relevant to software design, a method for devising
cognitive support features based on these theories, a basket of
cognitive support features that are demonstrated in the context of a
usable software design tool called ArgoUML, and a reusable
infrastructure for building similar features into other design tools.
ArgoUML is an object-oriented design tool that includes several novel
features that address the identified cognitive needs of software
designers. Each feature is explained with respect to the cognitive
theories that inspired it and the set of features is evaluated with a
combination of heuristic and empirical techniques.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7057"></a>11.1.2.&nbsp;Where to find it</h3></div></div><div></div></div><p>LINK: <a href="http://argouml.tigris.org/docs/robbins_dissertation/" target="_top">Robbins Dissertation</a>
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="skinner"></a>11.2.&nbsp;Martin Skinners Dissertation</h2></div></div><div></div></div><a class="indexterm" name="d0e7068"></a><p>
Enhancing an UML Modelling Tool with Context-Based Constraints for Components
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7075"></a>11.2.1.&nbsp;Abstract</h3></div></div><div></div></div><p>
Noch vor der Erstellung eines detaillierten Entwurfs hilft ein
Spezifikationsmodell eines komponenten-basierten Systems dabei, Probleme
so fr&uuml;h im Entwicklungsprozess wie m&ouml;glich zu entdecken. Die Sprache
CCL ('Component Constraint Language') wurde bei CIS entwickelt und
erlaubt den Entwickler 'Contextbased Constraints' dem
Spezifikationsmodell hinzuzuf&uuml;gen. Dadurch entsteht ein Modell, das
&uuml;ber die Beschreibung der statische Struktur des Systems
hinausgeht. Zur Zeit existiert allerdings kein Werkzeug, dass das
Komponentenspezifikationsmodell in den Entwicklungsprozess
integriert. Ziel dieser Diplomarbeit war der Entwurf eines solchen
Werkzeugs, um die Philosophie des Continuous Software Engineering
(CSE) zu unterst&uuml;tzten.

</p><p>
Before starting a detailed design, a specification model of the
component-based system assists the software developer in early problem
detection as soon as possible in the development process. The
Component Constraint Language (CCL) developed at CIS enables the
developer to add context-based constraints (CoCons) to a component
specification model. This produces a model which goes beyond the
simple description of the system's static structure. At this time,
there is no tool to integrate the component specification model into
the development process. The goal of this master's thesis was to
design such a tool, thereby supporting the Continuous Software
Engineering (CSE) philosophy.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7082"></a>11.2.2.&nbsp;Where to find it</h3></div></div><div></div></div><p>
LINK: <a href="http://www.cocons.org/publications/CCL_plugin_for_ArgoUML.pdf" target="_top">Martin Skinners dissertation</a>
</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="processes"></a>Chapter&nbsp;12.&nbsp;Processes for the ArgoUML project</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>12.1. <a href="#d0e7104">The big picture for Issues</a></dt><dd><dl><dt>12.1.1. <a href="#d0e7115">Priorities</a></dt><dt>12.1.2. <a href="#d0e7157">Resolutions</a></dt></dl></dd><dt>12.2. <a href="#resolve_issue">How to resolve an Issue</a></dt><dt>12.3. <a href="#verify_resolved_fixed">How to verify an Issue that is FIXED</a></dt><dt>12.4. <a href="#verify_resolved_invalid">How to verify an Issue that is rejected</a></dt><dt>12.5. <a href="#close_verified_issue">How to Close an Issue</a></dt><dt>12.6. <a href="#d0e7401">How to relate issues to problems in subproducts</a></dt></dl></div><a class="indexterm" name="d0e7094"></a><p>
This chapter contains processes used when working with the 
ArgoUML project.
</p><p>
These processes are provided with the hope of being helpful for
the members of the project and if they feel too complicated,
ambitious or overworked, please raise the issue of simplifying
them on the 
<a href="mailto:dev@argouml.tigris.org" target="_top">developers' mailing list</a>.
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7104"></a>12.1.&nbsp;The big picture for Issues</h2></div></div><div></div></div><a class="indexterm" name="d0e7107"></a><p>
Here is the big picture of the life of an Issue.
</p><div class="mediaobject"><img src="images/cookbook/IssueBigPicture.gif"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7115"></a>12.1.1.&nbsp;Priorities</h3></div></div><div></div></div><a class="indexterm" name="d0e7118"></a><a class="indexterm" name="d0e7123"></a><p>
The priorities are used in the following manner in ArgoUML:
</p><div class="itemizedlist"><ul type="disc"><li><p>P1 - Fatal error</p><p>
ArgoUML cannot start.
Crashes program, jvm or computer.
</p></li><li><p>P2 - Serious error</p><p>
Information lost.
</p></li><li><p>P3 - Not so serious error</p><p>
Functions not working.
Strange behavior.
Exceptions logged.
</p></li><li><p>P4 - Confusing behavior</p><p>
Incorrect help texts and documentation.
Inconsistant behavior.
UI not updated.
</p></li><li><p>P5 - Small problems</p><p>
Spelling errors.
Ugly icons.
Excessive logging.
</p></li></ul></div><p>
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7157"></a>12.1.2.&nbsp;Resolutions</h3></div></div><div></div></div><a class="indexterm" name="d0e7160"></a><a class="indexterm" name="d0e7165"></a><p>
This is what the different resolutions mean and how they are used when
an issue is resolved in the ArgoUML project.
This is to be read as an addendum to the 
<a href="http://argouml.tigris.org/project/www/docs/issue_lifecycle.html" target="_top">
Tigris definition of the resolutions
</a>.
</p><div class="itemizedlist"><ul type="disc"><li><p>LATER and REMIND</p><p>
Not used.
</p></li><li><p>WORKSFORME</p><p>
This means that it works in a released version of ArgoUML.
State the version in the comment.
</p><p>
If the version stated by the reporter in the issue is not
the same as the version in the comment then this probably 
means that problem was fixed in some release without anyone
noticing that this problem was fixed.
</p></li></ul></div><p>
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="resolve_issue"></a>12.2.&nbsp;How to resolve an Issue</h2></div></div><div></div></div><a class="indexterm" name="d0e7192"></a><p>
This can be performed by persons that have the Developer role 
in the project.
Persons without the Developer role can do most of the work but they
need a person with the the role to actually commit the work.
There might be special skills involved but it differs widely depending
on the nature of the Issue.
</p><p>
Do the following:
</p><div class="orderedlist"><ol type="1"><li><p><a name="resolve_issue_start"></a>
Pick any Issue that is NEW or REOPENED
that you from the description think that you are able to solve.
Best result if you also find some Issue that you really feel 
needs to be solved.
<a href="http://argouml.tigris.org/issues/buglist.cgi?component=argouml&amp;issue_status=NEW&amp;issue_status=REOPENED" target="_top">The list of all of them</a>.
</p></li><li><p>
Look at your personal schedule and how much time you have during the
next couple of weeks and compare that to the amount of time you think
you will need to spend for solving the issue.
Compare this to the release plan to see what release your contribution
will fit in.
</p></li><li><p>
Accept the Issue (setting it to Status STARTED), 
setting Target Milestone to the release you have
chosen.
You should also assign the issue to yourself.
</p></li><li><p>
Make sure you have a checked out copy of ArgoUML or else check out 
a new one.
</p><p>
How this is done is described in
<a href="#buildingandtools" title="Chapter&nbsp;2.&nbsp;Building from source">Chapter&nbsp;2, <i>Building from source</i></a>.
</p></li><li><p>
Change the code to solve the problem.
</p></li><li><p>
Compile and test your new code.
</p><p>
Optionally this could include developing a JUnit test case to
verify that the problem is solved.
You could also develop the JUnit test case before actually solving
the problem.
</p><p>
If your solution did not work as intended, continue changing it
until it does.
</p><p>
If you feel that your estimation of the complexity of the problem
and your own abilities and time available was incorrect,
then change the Target Milestone of the Issue to another one
that fits your new estimation.
This is just a change of plan.
</p><p>
If you, at this point, feel that your personal plans have changed
so that you won't have time to pursue the work,
change the Issue back to "NEW" with your experiences sofar
stated in the comment. Remember not to commit your changes.
This means that you are giving up and giving the Issue back to
anyone.
You should also assign it back to issues@argouml or if you know
someone else in the ArgoUML team that will continue the work,
assign it to him.
</p></li><li><p>
Commit your changes (and the JUnit test case if any) stating
the number of the Issue in the comment.
</p></li><li><p>
"Resolve" the Issue with the resolution "FIXED".
</p></li><li><p>
Sit back and feel the personal satisfaction of having completed a
something that will be part of the ArgoUML product.
</p></li><li><p>
If you during this, have discovered other problems,
create new Issues stating those new problems
according to the rule for creating Issues.
</p></li></ol></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="verify_resolved_fixed"></a>12.3.&nbsp;How to verify an Issue that is FIXED</h2></div></div><div></div></div><a class="indexterm" name="d0e7250"></a><a class="indexterm" name="d0e7257"></a><a class="indexterm" name="d0e7264"></a><p>
This can be performed by anyone.
There might be special skills involved but it differs widely depending
on the nature of the Issue.
</p><p>
Do the following:
</p><div class="orderedlist"><ol type="1"><li><p><a name="verify_resolved_fixed_start"></a>
Pick any Issue that is RESOLVED/FIXED or WORKSFORME and that you have
not raised, nor solved.
<a href="http://argouml.tigris.org/issues/buglist.cgi?component=argouml&amp;issue_status=RESOLVED&amp;resolution=FIXED&amp;resolution=WORKSFORME" target="_top">The list of all RESOLVED/FIXED and RESOLVED/WORKSFORME issues</a>.
</p></li><li><p>
Run the specified release of ArgoUML as provided for downloads or 
through Java Web Start.
</p></li><li><p>
Test the problem in the issue and verify that the problem is no longer
there or the feature is provided.
</p></li><li><p>
Do one of the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
If the problem is gone, the feature is present put the Issue in
Status VERIFIED.
</p><p>
If you are allowed to do this directly in Issuezilla or not
depends on your current role in the project.
If you are not, then get in contact with someone who is
and let him do the actual resetting of status.
</p></li><li><p>
If the problem is still there, the feature does not work, put the
Issue in Status REOPENED with a description of what is still there, is
still missing.
</p></li></ul></div></li><li><p>
If you during this, have discovered other problems than the ones that
are stated in the Issue, create new Issues stating those new problems
according to the rule for creating Issues.
</p></li><li><p>
Do this as many times as you like until there are no Issues left.
</p></li></ol></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="verify_resolved_invalid"></a>12.4.&nbsp;How to verify an Issue that is rejected</h2></div></div><div></div></div><a class="indexterm" name="d0e7309"></a><a class="indexterm" name="d0e7316"></a><a class="indexterm" name="d0e7323"></a><a class="indexterm" name="d0e7330"></a><p>
This can be performed by anyone.
There might be special skills involved but it differs widely depending
on the nature of the Issue.
</p><p>
Do the following:
</p><div class="orderedlist"><ol type="1"><li><p><a name="verify_resolved_invalid_start"></a>
Pick any issue that is RESOLVED/(INVALID, WONTFIX, or DUPLICATE) that
you have not raised nor solved.
<a href="http://argouml.tigris.org/issues/buglist.cgi?component=argouml&amp;issue_status=RESOLVED&amp;resolution=INVALID&amp;resolution=WONTFIX&amp;resolution=DUPLICATE" target="_top">The list of all RESOLVED/INVALID, RESOLVED/WONTFIX and RESOLVED/DUPLICATED issues</a>.
</p></li><li><p>
Read through the description provided.
</p></li><li><p>
Do one of the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
If you agree with the statement and feel that the Resolution is correct
put the Issue in Status VERIFIED.
</p><p>
If you are allowed to do this directly in Issuezilla or not
depends on your current role in the project.
If you are not, then get in contact with someone who is
and convince him to do the actual resetting of status.
</p></li><li><p>
If you don't agree, put the Issue in status REOPENED and give a
description as to why you don't agree.
</p></li></ul></div></li><li><p>
Do this as many times as you like until there are no Issues left.
</p></li></ol></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="close_verified_issue"></a>12.5.&nbsp;How to Close an Issue</h2></div></div><div></div></div><a class="indexterm" name="d0e7369"></a><p>
This is performed by the person that originally raised the Issue
or by the QA responsible for that area.
This can also be done by someone who would raise the issue but
did not because it was already present in Issuesilla.
</p><div class="orderedlist"><ol type="1"><li><p>
Pick any Issue that is Verified and that you have raised or that you
have found and refrained from raising because somebody else already
had written it. 
<a href="http://argouml.tigris.org/issues/buglist.cgi?component=argouml&amp;issue_status=VERIFIED" target="_top">The list of all VERIFIED issues.</a>.
</p></li><li><p>
See that you are satisfied with the solution.
This could involve reading through the resolution and 
starting the tool to verify it.
</p></li><li><p>
Do one of the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
If you are satisfied, put the Issue in Status CLOSED.
</p><p>
If you are allowed to do this directly in Issuezilla or not
depends on your current role in the project.
If you are not, then get in contact with someone who is
and let him do the actual resetting of status.
</p></li><li><p>
If you are not satisfied but the problem is solved as it is written in
the Issue, put the Issue in Status CLOSED and open a new Issue with
the rest of the problem.
</p></li><li><p>
If you are not satisfied and the problem is not solved, put the Issue
in status REOPENED with a description on what you are not satisfied
with.
</p></li></ul></div></li></ol></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7401"></a>12.6.&nbsp;How to relate issues to problems in subproducts</h2></div></div><div></div></div><a class="indexterm" name="d0e7404"></a><p>
ArgoUML uses some product internally and is to some respect very 
dependant on the well functioning of these products.
This are products like GEF, NS-UML, ocl, log4j, xerces, jre, ...
</p><p>
Occasionally a bug found in ArgoUML is found to be a problem in one
of these subproducts and cannot or is extremely complicated to fix
within ArgoUML.
</p><p>
If this happens this is the way to register that Issue in Issuezilla.
</p><p>
This can be performed by anyone.
There might be special skills involved depending on the nature of the Issue.
</p><p>
Do the following:
</p><div class="orderedlist"><ol type="1"><li><p>
During your examination of an issue you find that it is a problem
in one of the ArgoUML subproducts (GEF, NS-UML, ocl, jre, ...).
</p></li><li><p>
Write a comment in the issue stating which one of the subprojects
that is the problem (and what the problem is).
</p></li><li><p>
Post a bug in that subproducts bug reporting tool (or find the bug
already registered).
</p><p>
I am assuming that there is such a tool for all the subproducts.
If there isn't for the product in question, then explain the problem
to the responsible person for this product so that we are sure
that the problem is communicated.
</p></li><li><p>
Set the Issue in Issuezilla to RESOLVED/WONTFIX and
enter the reference from the subproducts bug reporting tool and
if possible the URL to the bug reporting tool or to the bug in question.
</p></li></ol></div><p>
The person responsible for the sourceing of the subtool in question
(Currently (December 2002) the subproduct responsible role 
is not explicitly pointed out 
but could be anyone that feels that something must be done.)
does the following for each new release of a subproduct.
</p><div class="orderedlist"><ol type="1"><li><p>
Looks at the new release of that subproduct to see
if any of the outstanding issues against that subproduct are in fact
fixed in the release.
</p></li><li><p>
If any of the issues are fixed, then he weights together
the importance of the issues fixed,
the amount of work needed to fit the new version of the subproduct
instead of the old one,
the planned releases of the subproduct with other issues promised
to be fixed,
and
the current release plan of ArgoUML.
From this he decides wether it is time to do the update of 
the subproduct within ArgoUML or to wait.
</p></li><li><p>
If he decides that it is time to update,
he adds the new version of the subproduct,
does all the needed work within ArgoUML,
tests and commits everything,
puts the issues indeed fixed in VERIFIED/WONTFIX,
and also closes the bugs registered in the subproducts bug reporting tool.
</p></li></ol></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e7445"></a>Chapter&nbsp;13.&nbsp;Screen Grabs</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>13.1. <a href="#d0e7454">How to make Screen Grabs</a></dt><dd><dl><dt>13.1.1. <a href="#d0e7466">MS Windows</a></dt><dt>13.1.2. <a href="#d0e7479">Linux</a></dt></dl></dd><dt>13.2. <a href="#d0e7490">Argouml\application\api class diagram screen grab</a></dt><dt>13.3. <a href="#d0e7496">org\Argouml\application\configuration class diagram screen grab</a></dt><dt>13.4. <a href="#d0e7502">org\Argouml\application\configuration class diagram screen grab</a></dt><dt>13.5. <a href="#d0e7508">src_new\org\Argouml\kernel class diagram screen grab</a></dt><dt>13.6. <a href="#d0e7514">src_new\org\Argouml\ocl class diagram screen grab</a></dt></dl></div><p>
The following chapters are moved here from the User FAQ. They need rework.
</p><p>
The current goal in this rework for this, the Screen Grabs chapter is to
join or move each section into the
<a href="#inside_components" title="Chapter&nbsp;5.&nbsp;Inside the components">Chapter&nbsp;5, <i>Inside the components</i></a>.
</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7454"></a>13.1.&nbsp;How to make Screen Grabs</h2></div></div><div></div></div><a class="indexterm" name="d0e7457"></a><p>There's nothing like show and tell when using software! Everyone likes screen grabs...here's how you can help out!</p><p>Make screen grabs as you go! And here's how...</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7466"></a>13.1.1.&nbsp;MS Windows</h3></div></div><div></div></div><p>You can use the PrintScreen key to copy the screen to the clipboard (as a bitmap), and then you can paste it into another application (such as MS Word, PowerPoint, etc. (maybe Paint, too)) using the Paste function (ctrl-v). MS Word may (depending on your version) allow you to save the document as an HTML page, which creates an html source file and gif files for all the embedded images (i.e. your pasted screen shot).</p><p>To capture a single window instead of the entire screen, use Alt-PrintScreen.</p><p>Image resolution is determined by screen size, for best results: 256 colors by 800X600 is good for a full screen capture.</p><p>Thanks to Derek for that little tip!</p><p>Do a search on any of your favorite freeware sites for more elaborate applications. Snagit from techsmith has been recommended</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7479"></a>13.1.2.&nbsp;Linux</h3></div></div><div></div></div><p>There's a number of screen shots apps under Linux.
  In KDE you can use <b class="command">ksnapshot</b>. In Gnome use <b class="command">Take a Screenshot</b> from the "Action" menu.</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7490"></a>13.2.&nbsp;Argouml\application\api class diagram screen grab</h2></div></div><div></div></div><div class="mediaobject"><img src="images/screenshots/argoapi.png"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7496"></a>13.3.&nbsp;org\Argouml\application\configuration class diagram screen grab</h2></div></div><div></div></div><div class="mediaobject"><img src="images/screenshots/argoconfig.png"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7502"></a>13.4.&nbsp;org\Argouml\application\configuration class diagram screen grab</h2></div></div><div></div></div><div class="mediaobject"><img src="images/screenshots/argocogchklist.png"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7508"></a>13.5.&nbsp;src_new\org\Argouml\kernel class diagram screen grab</h2></div></div><div></div></div><div class="mediaobject"><img src="images/screenshots/argokernel.png"></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7514"></a>13.6.&nbsp;src_new\org\Argouml\ocl class diagram screen grab</h2></div></div><div></div></div><div class="mediaobject"><img src="images/screenshots/argoocl.png"></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="d0e7520"></a>Chapter&nbsp;14.&nbsp;Index</h2></div></div><div></div></div><p>
</p><div class="index"><div class="titlepage"><div><div><h2 class="title"><a name="d0e7525"></a>Index</h2></div></div><div></div></div><div class="index"><div class="indexdiv"><h3>A</h3><dl><dt>ANT, <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a>, <a href="#Build">Build Process</a></dt><dd><dl><dt>how it is used, <a href="#d0e512">How ANT is run from the ArgoUML development environment</a></dt></dl></dd><dt>ANTLR, <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt><dt>ArgoUML</dt><dd><dl><dt>Design, <a href="#components">ArgoUML Design, The Big Picture</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>build.xml, <a href="#Build">Build Process</a></dt><dt>Building</dt><dd><dl><dt>ArgoUML, <a href="#Build">Build Process</a></dt><dt>javadoc, <a href="#d0e722">Building javadoc</a></dt><dt>tools, <a href="#d0e256">Which tools do I need to build ArgoUML?</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>Check lists, <a href="#critics">Critics and other cognitive tools</a></dt><dt>Checking out from CVS, <a href="#cvs_checkout">Download from the CVS repository</a></dt><dt>checklists, <a href="#layer3">Layer 3 - Description of components</a></dt><dt>Code Generation, <a href="#layer2">Layer 2 - Description of components</a>, <a href="#codegeneration">Code Generation Component</a></dt><dt>Code generation</dt><dd><dl><dt>Java, <a href="#java">Java - Code generations and Reverse Engineering</a></dt></dl></dd><dt>Coding</dt><dd><dl><dt>Standards, <a href="#standards">Standards for coding in ArgoUML</a></dt></dl></dd><dt>Compiling</dt><dd><dl><dt>argouml.build.properties, <a href="#d0e687">Customizing and configuring your build</a></dt><dt>build.properties, <a href="#d0e687">Customizing and configuring your build</a></dt><dt>customized, <a href="#d0e687">Customizing and configuring your build</a></dt><dt>Cygwin, <a href="#d0e628">Compiling for Windows</a></dt><dt>Unix, <a href="#d0e571">Compiling for Unix</a></dt><dt>Windows, <a href="#d0e628">Compiling for Windows</a></dt></dl></dd><dt>Constraints, <a href="#ocl">OCL</a></dt><dt>Critics, <a href="#layer3">Layer 3 - Description of components</a>, <a href="#critics">Critics and other cognitive tools</a></dt><dt>CVS</dt><dd><dl><dt>branches, <a href="#branches">Creating and using branches</a></dt><dt>checking out from, <a href="#cvs_checkout">Download from the CVS repository</a></dt><dt>how to work with, <a href="#cvs">How to work with CVS</a></dt><dt>Mailing list, <a href="#mailing_lists">Mailing Lists</a></dt><dt>standards, <a href="#cvs">How to work with CVS</a></dt></dl></dd><dt>Cygwin</dt><dd><dl><dt>Compilation, <a href="#d0e628">Compiling for Windows</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>Details Panel, <a href="#guiframework">The GUI Framework</a></dt><dt>Developers' Mailing List, <a href="#mailing_lists">Mailing Lists</a></dt><dt>Diagrams, <a href="#layer2">Layer 2 - Description of components</a>, <a href="#diagrams">Diagrams</a></dt><dt>Docbook</dt><dd><dl><dt>XSL stylesheets, <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt></dl></dd><dt>Documentation, <a href="#d0e774">The ArgoUML documentation</a></dt><dd><dl><dt>work with, <a href="#d0e917">How developers work with documentation</a></dt></dl></dd><dt>Dresden OCL Toolkit, <a href="#ocl">OCL</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>fop, <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GEF, <a href="#d0e340">What libraries are needed and used by ArgoUML?</a></dt><dt>GUI Framework, <a href="#layer1">Layer 1 - Description of components</a>, <a href="#guiframework">The GUI Framework</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>Help system, <a href="#layer1">Layer 1 - Description of components</a>, <a href="#help">Help System</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>I18n, <a href="#layer0">Layer 0 - Description of components</a></dt><dt>i18n, <a href="#internationalization">Internationalization</a></dt><dt>Internationalization, <a href="#layer0">Layer 0 - Description of components</a>, <a href="#internationalization">Internationalization</a></dt><dt>Issue</dt><dd><dl><dt>Priority, <a href="#d0e7115">Priorities</a></dt><dt>Resolution, <a href="#d0e7157">Resolutions</a></dt></dl></dd><dt>Issues, <a href="#d0e7104">The big picture for Issues</a></dt><dd><dl><dt>Closing, <a href="#close_verified_issue">How to Close an Issue</a></dt><dt>Mailing list, <a href="#mailing_lists">Mailing Lists</a></dt><dt>Resolving, <a href="#resolve_issue">How to resolve an Issue</a></dt><dd><dl><dt>Duplicate, <a href="#verify_resolved_invalid">How to verify an Issue that is rejected</a></dt><dt>Invalid, <a href="#verify_resolved_invalid">How to verify an Issue that is rejected</a></dt><dt>Rejected, <a href="#verify_resolved_invalid">How to verify an Issue that is rejected</a></dt><dt>Wontfix, <a href="#verify_resolved_invalid">How to verify an Issue that is rejected</a></dt></dl></dd><dt>Verifying</dt><dd><dl><dt>Fixed, <a href="#verify_resolved_fixed">How to verify an Issue that is FIXED</a></dt><dt>Works for me, <a href="#verify_resolved_fixed">How to verify an Issue that is FIXED</a></dt><dt>WORKSFORME, <a href="#verify_resolved_fixed">How to verify an Issue that is FIXED</a></dt></dl></dd></dl></dd></dl></div><div class="indexdiv"><h3>J</h3><dl><dt>Jason Robbins</dt><dd><dl><dt>Dissertation, <a href="#robbins">Jason Robbins Dissertation</a></dt></dl></dd><dt>Java, <a href="#layer3">Layer 3 - Description of components</a>, <a href="#java">Java - Code generations and Reverse Engineering</a></dt><dt>Javadoc</dt><dd><dl><dt>building, <a href="#d0e722">Building javadoc</a></dt></dl></dd><dt>jdepend, <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt><dt>JRE, <a href="#layer0">Layer 0 - Description of components</a></dt><dt>JUnit, <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt><dt>JUnit testing, <a href="#junittests">The JUnit test cases</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>l10n, <a href="#internationalization">Internationalization</a></dt><dt>Language</dt><dd><dl><dt>teams, <a href="#d0e4700">Organizing translators</a></dt></dl></dd><dt>layer, <a href="#components">ArgoUML Design, The Big Picture</a></dt><dt>Localization, <a href="#internationalization">Internationalization</a></dt><dt>log4j, <a href="#d0e340">What libraries are needed and used by ArgoUML?</a></dt><dt>Logging, <a href="#layer0">Layer 0 - Description of components</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>Mailing lists, <a href="#mailing_lists">Mailing Lists</a></dt><dt>Making a release, <a href="#release_process">Making a release</a></dt><dt>Martin Skinner</dt><dd><dl><dt>Dissertation, <a href="#skinner">Martin Skinners Dissertation</a></dt></dl></dd><dt>Model, <a href="#layer1">Layer 1 - Description of components</a></dt><dt>Module loader, <a href="#layer2">Layer 2 - Description of components</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>Navigator Tree, <a href="#layer2">Layer 2 - Description of components</a></dt><dt>Notation, <a href="#layer2">Layer 2 - Description of components</a></dt><dt>NSUML, <a href="#d0e340">What libraries are needed and used by ArgoUML?</a></dt><dd><dl><dt>understanding, <a href="#d0e5997">Tip for creating new modules (from Florent de Lamotte)</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>OCL, <a href="#layer3">Layer 3 - Description of components</a>, <a href="#ocl">OCL</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>Pluggable interface, <a href="#layer2">Layer 2 - Description of components</a></dt><dt>Priorities</dt><dd><dl><dt>on Issues, <a href="#d0e7115">Priorities</a></dt></dl></dd><dt>Processes, <a href="#processes">Processes for the ArgoUML project</a></dt><dt>Property panels, <a href="#layer2">Layer 2 - Description of components</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Resolution</dt><dd><dl><dt>of Issues, <a href="#d0e7157">Resolutions</a></dt></dl></dd><dt>ResourceBundles, <a href="#internationalization">Internationalization</a></dt><dt>Reverse Engineering, <a href="#layer2">Layer 2 - Description of components</a>, <a href="#reverseengineering">Reverse Engineering Component</a></dt><dd><dl><dt>Java, <a href="#java">Java - Code generations and Reverse Engineering</a></dt></dl></dd><dt>Round-trip Engineering</dt><dd><dl><dt>Java, <a href="#java">Java - Code generations and Reverse Engineering</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>Screen Grabs</dt><dd><dl><dt>How to make them, <a href="#d0e7454">How to make Screen Grabs</a></dt></dl></dd><dt>Standards</dt><dd><dl><dt>Coding, <a href="#standards">Standards for coding in ArgoUML</a></dt><dt>CVS, <a href="#cvs">How to work with CVS</a></dt></dl></dd><dt>subproducts, <a href="#d0e7401">How to relate issues to problems in subproducts</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>Testcases</dt><dd><dl><dt>an example, <a href="#d0e1055">How to write a test case</a></dt><dt>writing, <a href="#d0e1055">How to write a test case</a></dt></dl></dd><dt>Testing ArgoUML, <a href="#junittests">The JUnit test cases</a>, <a href="#d0e1055">How to write a test case</a></dt><dt>To Do Items, <a href="#layer1">Layer 1 - Description of components</a>, <a href="#todoitems">To do items</a></dt><dt>Tools</dt><dd><dl><dt>needed for building, <a href="#d0e256">Which tools do I need to build ArgoUML?</a></dt><dt>used, <a href="#d0e283">
Which tools are part of the ArgoUML development environment?
</a></dt></dl></dd><dt>Translators, <a href="#d0e4700">Organizing translators</a></dt><dt>Troubleshooting</dt><dd><dl><dt>commiting changes, <a href="#d0e1001">Can't commit my changes?</a></dt><dt>development build, <a href="#d0e964">Troubleshooting the development build</a></dt><dt>during the release work, <a href="#release_process_test_failed">The release did not work</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>Unit testing of ArgoUML, <a href="#junittests">The JUnit test cases</a>, <a href="#d0e1055">How to write a test case</a></dt><dt>Unix</dt><dd><dl><dt>compilation, <a href="#d0e571">Compiling for Unix</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>Web Site</dt><dd><dl><dt>documentation, <a href="#d0e774">The ArgoUML documentation</a></dt><dt>maintaining, <a href="#how_the_web_site_works">How the ArgoUML web site works</a></dt></dl></dd><dt>Windows</dt><dd><dl><dt>Compilation, <a href="#d0e628">Compiling for Windows</a></dt></dl></dd><dt>Wizards, <a href="#critics">Critics and other cognitive tools</a></dt><dt>Writing</dt><dd><dl><dt>testcases, <a href="#d0e1055">How to write a test case</a></dt></dl></dd></dl></div></div></div></div></div></body></html>