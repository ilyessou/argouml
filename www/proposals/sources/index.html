<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>ArgoUML Source Directory Structure</title>
  </head>
  
  <body>
    <table cellpadding=0 cellspacing=0>
      <tr bgcolor="#CCCCCC">
        <td>
Proposed restructuring of ArgoUML sources.
<p/>
The purpose of the restructuring would be
to allow tight component building as a foundation for ArgoUML.
By separating source files into basic components,
we could minimize the possibility
that changes to source files have unexpected impact
on other areas of the application.
<hr align="center"/>
<p/>
The component directories shown below are for discussion only,
and do not attempt to show a final split to different components.
The comments also do not attempt to document a split proposal.
They simply provide suggestions of how to logically decide how to split.
Some other obvious components such as critics, reverse engineering,
and code generation are intentionally not included
to ensure that the split provided below
is not considered to be a solution but an example.
<p/>
<p/>
<pre>
     /argouml
             /build (Unchanged as part of this.)
             /documentation (Unchanged as part of this.)
             /lib (Unchanged as part of this.)
             /modules (Basically unchanged as part of this.  Some of the
	               test sources will be moved to the component test
		       directories.)
	     /src_new (all files removed after moving to src and src/appl.)
             /src
	             /core (component containing basic API definitions,
		            which would primarily be interfaces,
			    abstract classes, and factory classes.  
		            This would be the only set of classes required
			    to compile a pluggable module against.)

	                     /src
	                             /org
		                             /argouml
				                     /application
				                             /api
	                     /tests/org/argouml/????

	             /foundation (component containing the basic implementation
		                of the user interface, including menu handling,
				module and plugin loading, and look-and-feel.
				It would <b>not</b> include any UML specific
				code.)

	                     /src
	                             /org
		                             /argouml
		                                     /????? (whatever necessary)
	                     /tests/org/argouml/????

	             /uml_model (component containing the implementation
		                of the UML model.)

	                     /src
	                             /org
		                             /argouml
		                                     /model
						             /uml
	                     /tests/org/argouml/model/uml

	             /notation (component containing the basic implementation
		                of notation.  This component would include
				the implementation of UML notation.)

	                     /src
	                             /org
		                             /argouml
		                                     /????? (whatever necessary)
	                     /tests/org/argouml/????

	             /java (component which implements Java notation.
		            Notations must be completely pluggable
			    for this approach to work.)

	                     /src
	                             /org
		                             /argouml
		                                     /language
		                                             /java
	                     /tests/org/argouml/language/java

	             /appl (component which provides run-time necessities
		            such as a class which implements main()
			    or an ant task definition.)
	                     /src
	                             /org
		                             /argouml
		                                     /application

	                     /tests/org/argouml/application

             /tests (all files removed after moving to src/?????/tests)
             /tools (unchanged as part of this)
             /www (unchanged as part of this)
</pre>
<p/>
<ul>
  <li>
    Each component directory would contain its own build.xml file.
    The component build.xml would be only responsible for its own
    set of component sources and tests.
  </li>
  <li>
    Each component directory would be built separately,
    starting with the most basic component.
    This component would be built into a jar file.
    Dependent components would reference the jar file
    in their compile classpaths.
  </li>
  <li>
    Components would compile their classes
    into a <code>build/classes</code> within their component directory,
    and package those classes into a build directory in the src directory
    for easy sharing of components.
    This way, it would not be necessary
    to maintain all of the sources for lower-level components
    in every local sandbox
    when working on changes in a specific component.
  </li>
  <li>
    The src/appl component would build the argouml.jar file.
    This could either be a jar containing only the component classes,
    or it could be a complete argouml.jar which includes the content
    of all of the lower level components.
    The latter approach would provide a single jar file
    equivalent to the current build process.
  </li>
  <li>
    The src directory would contain a master build.xml
    with a reasonable subset of the current targets.
    The component build.xml files would, for example,
    not contain the <code>dist</code> target,
    as this would not be necessary at a component level.
    The master build.xml would not contain a <code>compile</code> target,
    as the only shared output of the components would be jar files.
    A target such as <code>package</code> in the master build.xml
    would simply execute the ant command <code>package</code>
    in each of the component directories,
    in the necessary sequence to ensure that dependencies are fulfilled.
    The targets <code>test</code> and <code>clean</code>
    would behave similarly.
    The target <code>javadoc</code> would <b>not</b> behave this way -
    it would be more reasonable for the component javadocs to build
    the javadocs for that component, but the master javadocs to
    build a consolidated javadoc directory.
  </li>
  <li>
    The master build.xml would build a consolidated argouml.jar file
    if necessary from the individual component jars.
  </li>
  <li>
    build.properties and default.properties would only exist in src,
    not in the component directories.
    The component build.xml files would refer to the those property files
    found in src.
  </li>
  <li>
    Initially, source would be migrated from src_new into src/appl.
    As ArgoUML sources become more modularized,
    they would be migrated into a component directory.
  </li>
</ul>

<p/>
       </td>
     </tr>
   </table>
   <hr align="CENTER">
   <p>
     <a href="../index.html">Proposals</a>
     |
     <a href="/index.html">ArgoUML Home</a>
     |
     <a href="/dev.html">Developer Zone</a>
   </p>
  </body>
</html>
