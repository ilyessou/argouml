<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>9.7.&nbsp;How to work with Eclipse 3</title><link rel="stylesheet" href="look-and-feel.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.66.1"><link rel="start" href="index.html" title="Cookbook for Developers of ArgoUML"><link rel="up" href="ch09.html" title="Chapter&nbsp;9.&nbsp;Standards for coding in ArgoUML"><link rel="prev" href="ch09s06.html" title="9.6.&nbsp;Settings for Emacs"><link rel="next" href="ch10.html" title="Chapter&nbsp;10.&nbsp;Standards For Documentation Writing"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">9.7.&nbsp;How to work with Eclipse 3</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch09s06.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;9.&nbsp;Standards for coding in ArgoUML</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch10.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="eclipse3"></a>9.7.&nbsp;How to work with Eclipse 3</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Linus</span> <span class="surname">Tolke</span></h3></div></div></div></div><p>
If you are running Eclipse 3
you can find information on how to set
the development environment fitting ArgoUML.
There are several sets of instructions here depending that you can apply
separately depending on how much of the ArgoUML knowledge you would
want to include in your Eclipse.
</p><p>
If any of these instructions don't work or could be improved in some way,
please help in making them better by contacting the editor of the Cookbook.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="eclipse-checkout"></a>9.7.1.&nbsp;Checking out through Eclipse</h3></div></div></div><p>
This instruction is if you want to use Eclipse to download the source
and it takes you up to where you can start ArgoUML from the source.
</p><div class="orderedlist"><ol type="1"><li><p>
Set up the CVS Repository.
</p><p>
Change to the CVS Repository perspective and select 
Add CVS Repository.
Then enter the following information.
</p><div class="itemizedlist"><ul type="disc"><li><p>Host:
cvs.tigris.org
</p></li><li><p>Repository path:
/cvs
</p></li><li><p>User:
<i class="replaceable"><tt>Your Tigris user name.</tt></i>
</p></li><li><p>Password:
<i class="replaceable"><tt>Your Tigris password.</tt></i>
</p></li><li><p>Connection type:
pserver
(default)
</p></li><li><p>Use Default Port. (default)</p></li></ul></div></li><li><p>
Check out.
</p><p>
In the CVS Repository Exploring perspective,
unfold the newly created repository 
(called something like
:pserver:<i class="replaceable"><tt>your user name</tt></i>@cvs.tigris.org:/cvs)
and within it, HEAD.
</p><p>
Select the argouml-mdr project, right-click on it, and to Check Out As.
Check out as a project configured using the New Project Wizard.
Press the button Finish.
Select Java Project, and press Next.
Type the new project name: argouml-mdr, and press Next.
Ignore the build path settings. We will come back to them later.
Press Finish, which starts the checking out process.
You are probably directed to the Java Perspective with a question if
you want or not.
At this point, you better press No, to be able to perform the next step.
</p><p>
Select the argouml project, right-click on it, and do Check Out As.
Check out as a project configured using the New Project Wizard.
Press the button Finish.
Select Java Project, and press Next.
Type the new project name: argouml, and press Next.
Ignore the build path settings. We will come back to them later.

Press Finish, which starts the checking out process.
You are probably directed to the Java Perspective with a question if
you want or not. At this point it doesn't matter. Just press Yes or No!
</p><p>
The download takes a while, since the download is around 60Meg.
</p><p>
Remark: 
If you are on a modem or other low bandwidth connection,
this is not recommended since you will download
all of the web site,
the source for the documentation, and
all modules,
things that you could do without unless you would want to work on them.
If you find a way to do this with less bandwidth use,
please help improving this description.
Theoretically we can come down to around 16Meg which would take around
two hours on a 56K modem.
</p></li><li><p>
Build using ant.
</p><p>
Browse to <tt class="filename">argouml/src_new/build.xml</tt>,
select the <tt class="filename">build.xml</tt>-file,
right-click on it, and do Run As - Ant Build...
This pops up the External Tools... pop up
with the Targets tab already selected.
Select compile (default target in the Targets tab),
deselect all other targets
and finally press Run.
</p><p>
Browse to <tt class="filename">argouml-mdr/build.xml</tt>,
select the <tt class="filename">build.xml</tt>-file,
right-click on it, and do Run As - Ant Build...
This pops up the External Tools... pop up
with the Targets tab already selected.
Select <span><b class="command">generate</b></span>,
deselect all other targets
and finally press Run.
</p><p>
There are some files that are built using rules in the
<tt class="filename">build.xml</tt> files.
This is
the antlr-generated files,
the file containing a version, and
the java interfaces generated from the mof description.
</p></li><li><p>
Refresh the projects.
</p><p>
This must be done after having built using ant to find the newly created
Java files.
</p><p>
Select the top resource of the argouml project
in the Navigator (on the left),
right click and select <span><b class="command">Refresh</b></span>.
</p></li><li><p>
Set build path for the argouml project.
</p><p>
      In the Java perspective, select the project argouml, 
      i.e. the icon at the top of the Package Explorer.
      Then, in the menu, select Project =&gt; Properties).
    </p><p>
Enter Java Build Path
</p><p>
Under Source:
Remove everything.
Add <tt class="filename">argouml/src_new</tt> and
<tt class="filename">argouml/src/model/src</tt>
(simply add a check mark in front of these folders).
Also add
<tt class="filename">argouml/tests</tt>,
<tt class="filename">argouml/modules/classfile/src</tt>,
and the src directories of all other modules.
The purpose of this is to have Eclipse recompile these and
find compilation errors
as soon as your changes to any API has affected them.
</p><p>
Under Libraries:
Press the Add JARs... button and add
all files in <tt class="filename">argouml/lib</tt>.
Press the Add JARs... button and add
the file <tt class="filename">argouml/tools/junit-3.7/junit.jar</tt>.
Every time any of these jars is updated in the project you will have to 
update this in your environment by entering this dialog,
removing the old ones, and
adding the new ones.
</p><p>
Under Order and Export:
Check that argouml/src/model/src is checked.
Check junit and log4j.
(If you also plan to work with the ArgoPrint subproject,
check gef and commons-logging.)
</p><p>
      Set the Default output folder to 
<tt class="filename">argouml/bin</tt>.
This will not confuse it with any of the ant-built things.
    </p><p>
Press OK.
You will be asked to accept that all resources previously built can
be removed. Press Yes.
Eclipse will rebuild.
    </p><p>
Verify that there are no errors in the argouml project,
just warnings left among the problems.
If there are errors in some of the modules you will be able to 
continue your work in spite of that but it is better if you stop here and
investigate the problem.
</p><p>
Some of the modules (cpp, idl, classfile, ???), contain ANTLR-generated code.
The rules to build these are in the ant files for each module.
Run the ant targets "generate" or "generateparser" in each of these
modules and then reload the source trees.
</p></li><li><p>
Set build path for the argouml-mdr project.
</p><p>
      In the Java perspective, select the project argouml-mdr, 
      i.e. the icon at the top of the Package Explorer.
      Then, in the menu, select Project =&gt; Properties).
    </p><p>
Enter Java Build Path
</p><p>
Under Source:
Remove everything.
Add <tt class="filename">argouml-mdr/src</tt> and
<tt class="filename">argouml-mdr/tests</tt>
(simply add a check mark in front of these folders).
</p><p>
Under Libraries:
Press the Add JARs... button and add
all files in <tt class="filename">argouml-mdr/lib</tt>.
Press the Add JARs... button and add
the file <tt class="filename">argouml-mdr/build/java-interfaces.jar</tt>.
</p><p>
Under Project:
Press the Add... button and add
the argouml project.
</p><p>
Under Order and Export:
Check 
<tt class="filename">java-interfaces.jar</tt>,
<tt class="filename">jmi.jar</tt>,
<tt class="filename">jmiutils.jar</tt>,
<tt class="filename">mdrapi.jar</tt>,
<tt class="filename">mof.jar</tt>,
<tt class="filename">nbmdr.jar</tt>, and
<tt class="filename">openide-util.jar</tt>,
(i.e. everything except the argouml project).
</p><p>
      Set the Default output folder to 
<tt class="filename">argouml-mdr/bin</tt>.
This will not confuse it with any of the ant-built things.
    </p><p>
Press OK.
You will be asked to accept that all resources previously built can
be removed. Press Yes.
Eclipse will rebuild.
    </p><p>
Verify that there are no errors
just warnings left among the problems.
</p></li><li><p>
Create a Run Configuration
</p><p>
      In the Java perspective, select the project argouml, 
      i.e. the icon at the top of the Package Explorer.
      Then, in the menu, select Run =&gt; Run...). 
      This will open the dialog for creating, managing 
      and running Run Configurations.
    </p><p>
      Select Java Application on the left and press the New button. 
      Name the configuration "Run ArgoUML".
In the Main tab press the Search... button in the Main class box.
      In the new dialog that appears (Choose Main Type), simply press OK.
    </p><p>
      This sets the Main class to: 
      <tt class="filename">org.argouml.application.Main</tt>.
    </p><p>
In the Classpath tab
select User Entries,
press Add Projects, and add the argouml-mdr project
with "Add exported entries of selected projects." checked and
"Add required projects of selected projects." not checked.
(The same needs to be done for all other configurations created
i.e. when running test cases from within Eclipse).
</p><p>
      Press the Run button.
      This will start ArgoUML. 
      From now on, you can start ArgoUML 
      by a single press on the Run icon in the toolbar.
    </p></li><li><p>
Verify that you can start ArgoUML from the debugger within Eclipse. 
You can do this by clicking on the Debug icon in the toolbar.
</p></li></ol></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10381"></a>9.7.2.&nbsp;Eclipse to help with the ArgoUML coding style</h3></div></div></div><p>
This instruction is to set up Eclipse to work according to
the ArgoUML Coding standards.
If this is not done correctly you will most likely find that you will have to
do a lot of manual edits every time Eclipse has
touched the code.
You have your tool working against you instead of for you.
On the other hand, these settings affect your Eclipse Workspace rather than
the ArgoUML project settings so if you have other projects in
the same Eclipse Workspace there might be conflicts.
For this reason, it might be a good idea to do the ArgoUML work in an
Eclipse Workspace separate from your other projects.
</p><div class="itemizedlist"><ul type="disc"><li><p>
Code conventions.
</p><p>See in the menu Window =&gt; Preferences. 
      Then select Java =&gt; Code Style =&gt; Formatter.
Set the Code Formatter to "Java conventions [built-in]".
</p></li><li><p>
TAB character width is 8.
</p><p>
	  This will only work correctly by default from Eclipse V3.2 onwards.
</p><p>
Solution for Eclipse 3.0:
See in the menu Window =&gt; Preferences.
Then select
Java =&gt; Editor. Then select the tab Appearance.
Set the Displayed tab width to 8.
</p><p>
Solution for Eclipse 3.1:
In Eclipse 3.1 the Tab size is part of the profile that the 
Code Formatter uses.
Alas, the "Java conventions [built-in]"-profile contains a bug at this point
(<a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=104765" target="_top">https://bugs.eclipse.org/bugs/show_bug.cgi?id=104765</a>)
so the best solution is to create and use a new profile with the fix.
In Window =&gt; Preferences =&gt; Java =&gt; Code Style =&gt; Code Formatter,
set the Code Formatter to "Java conventions [built-in]" (as above),
press "Show",
select the "Indentation"-tab,
change "Tab size" to 8,
press "Apply", and
give the name 
<i class="replaceable"><tt>Fixed Java conventions</tt></i>.
</p></li><li><p>
New file templates.
</p><p>
See in the menu Window =&gt; Preferences.
Then select
Java =&gt; Code Style =&gt; Code Templates.
At the right hand side, open the tree for Comments, and
set the Code Templates for Overriding methods to
</p><pre class="programlisting">
/**
 * ${see_to_overridden}
 */
</pre><p>
</p><p>
      In the same tree for Code Templates, 
      open the Code node and select New Java Files.
      Set it to
</p><pre class="programlisting">
// $$Id$$
// Copyright (c) 2006 The Regents of the University of California. All
// Rights Reserved. Permission to use, copy, modify, and distribute this
// software and its documentation without fee, and without a written
// agreement is hereby granted, provided that the above copyright notice
// and this paragraph appear in all copies.  This software program and
// documentation are copyrighted by The Regents of the University of
// California. The software program and documentation are supplied "AS
// IS", without any accompanying services from The Regents. The Regents
// does not warrant that the operation of the program will be
// uninterrupted or error-free. The end-user understands that the program
// was developed for research purposes and is advised not to rely
// exclusively on the program for any reason.  IN NO EVENT SHALL THE
// UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT,
// SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST PROFITS,
// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
// THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF
// SUCH DAMAGE. THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY
// WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
// PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF
// CALIFORNIA HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE, SUPPORT,
// UPDATES, ENHANCEMENTS, OR MODIFICATIONS.

${package_declaration}

${typecomment}
${type_declaration}
</pre><p>
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10419"></a>9.7.3.&nbsp;Eclipse to automatically find problems in the code</h3></div></div></div><p>
This instruction is to set up Eclipse to automatically find 
what, in the ArgoUML project, could be considered problems in the code.
</p><p>
You can apply these individually depending on what level of help you need
in your coding.
I (Linus Tolke) recommend that you set them all on the Warning level.
This makes them visible for you.
You can then decide to fix them or not depending on how you feel about
the code you are working with.
</p><div class="itemizedlist"><ul type="disc"><li><p>
Compiler compliance level.
</p><p>
      See in the menu Window =&gt; Preferences.
      Then select
      Java =&gt; Compiler.
      At the right hand side, select the tab
Compliance and classfiles =&gt; Compiler compliance level: 1.4.
</p><p>
In the ArgoUML project we have decided to keep source compliance to JDK 1.4.
(See <a href="ch03s03.html#REQ7" title="3.3.1.&nbsp;Choice of JRE:&#xA;ArgoUML will support any JRE compatible with a &#xA;Sun specification of any JRE from Sun that has not begun the Sun End of Life&#xA;(EOL) process.&#xA;">Section&nbsp;3.3.1, &#8220;Choice of JRE:
ArgoUML will support any JRE compatible with a 
Sun specification of any JRE from Sun that has not begun the Sun End of Life
(EOL) process.
&#8221;</a>).
This setting enables Eclipse to tell you where some
JDK 1.5
features have crept in.
</p></li><li><p>
Find forgotten and incorrect Javadoc comments.
</p><p>
In the menu select Window =&gt; Preferences.
Then select
Java =&gt; Compiler.
Suggested settings for these tabs
(Only things diverting from the Eclipse defaults are listed):
</p><div class="itemizedlist"><ul type="circle"><li><p>
Javadoc =&gt; Malformed javadoc comments: Warning, Private, Report errors in tags.
</p></li><li><p>
Javadoc =&gt; Missing javadoc tags: Warning, Protected,
Check overriding and implementing methods.
</p><p>
These problems are also found by Checkstyle so if you are
running checkclipse (See <a href="ch09s07.html#checkclipse" title="9.7.4.&nbsp;Settings for checkclipse">Section&nbsp;9.7.4, &#8220;Settings for checkclipse&#8221;</a>)
put this in Ignore instead.
</p></li></ul></div></li><li><p>
Code that hides other code.
</p><p>
In the menu select Window =&gt; Preferences.
Then select
Java =&gt; Compiler.
Suggested settings for these tabs
(Only things diverting from the Eclipse defaults are listed):
</p><div class="itemizedlist"><ul type="circle"><li><p>
Style =&gt; Possible accidental boolean assignment: Warning.
</p></li><li><p>
Advanced =&gt; Local variable declaration hides another field or variable:
Warning.
</p></li><li><p>
Advanced =&gt; Field declaration hides another field or variable: Warning.
</p></li></ul></div></li><li><p>
Find Code that shall be removed.
</p><p>
In the menu select Window =&gt; Preferences.
Then select
Java =&gt; Compiler.
Suggested settings for these tabs
(Only things diverting from the Eclipse defaults are listed):
</p><div class="itemizedlist"><ul type="circle"><li><p>
Unused code =&gt; Local variable is never read: Warning.
</p></li><li><p>
Unused code =&gt; Parameter is never read: Warning.
</p></li><li><p>
Unused code =&gt; Unused or unread private members: Warning.
</p></li><li><p>
Unused code =&gt; Unnecessary semicolon: Warning.
</p></li><li><p>
Unused code =&gt; Unnecessary cast or 'instanceof' operation: Warning.
</p></li><li><p>
Unused code =&gt; Unnecessary declaration of thrown checked exception: Warning.
</p></li></ul></div></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="checkclipse"></a>9.7.4.&nbsp;Settings for checkclipse</h3></div></div></div><p>
      Checkclipse is a plug in for Eclipse which needs to be installed separately.
      It enables style checking according the rules set for the ArgoUML project.
    </p><p>
      In the Java perspective, select the project argouml, 
      i.e. the icon at the top of the Package Explorer.
      Then, in the menu, select Project =&gt; Properties,
select Checkclipse (appears only if Checkclipse is correctly installed)
and then fill the fields like this:
</p><div class="itemizedlist"><ul type="disc"><li><p>Enable Checkstyle
Checked.
</p></li><li><p>Checkstyle Configuration File:
<tt class="filename">/argouml/tools/checkstyle/checkstyle_argouml.xml</tt>
</p></li><li><p>Checkstyle Properties File:
<tt class="filename">/argouml/tools/checkstyle/checkstyle.properties</tt>
</p></li><li><p>File Filter Definition:
<tt class="filename">/argouml/tools/checkstyle/checkclipse.filefilters</tt>
</p></li></ul></div><p>
Leave the two other fields empty.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10522"></a>9.7.5.&nbsp;Run the JUnit tests</h3></div></div></div><p>
The problem is that to run ArgoUML, you need to have jars from both
the argouml project and
the argouml-mdr project
available in the class path.
If you don't, then all tests that actually do something with the
model subsystem will fail with a 
<tt class="classname">java.lang.ExceptionInInitializerError</tt>
(if it is the first test) or
<tt class="classname">java.lang.NoClassDefFoundError</tt>.
</p><p>
The way the two projects are set up it is the argouml-mdr
project that depends on the argouml project.
This means that when running things from the argouml-mdr project
everything from the argouml project is available but not the other way around.
Since the tests are located in the argouml project,
the argouml-mdr things will be missing when running the tests as default.
</p><p>
Here is the simplest way to run a test, fixing this:
</p><div class="orderedlist"><ol type="1"><li><p>
Start the test in the normal way i.e.
Right click on the test case and select 
Run As =&gt; JUnit Test,
Debug As =&gt; JUnit Test or
some keyboard short cut.
</p></li><li><p>
Watch as the test fails with
<tt class="classname">java.lang.ExceptionInInitializerError</tt>
</p><p>
If the test happens to succeed, 
either you have chosen one of the rare tests that actually don't use the model,
or you have not set up the two projects according to the instructions...
</p></li><li><p>
From the Toolbar or from the Run menu select Debug... or Run...
A window will open with the Configuration to run the test.
</p></li><li><p>
Change the project to the argouml-mdr project (in the Test tab).
</p></li><li><p>
Press Debug (or Run).
</p></li><li><p>
The test now works.
</p></li></ol></div><p>
Eclipse will remember the Configuration for that test so you can run it from
the Debug or Run Toolbars,
the Run =&gt; Run History or Run =&gt; Debug History menu items,
Right clicking on the same test and selecting Run... or Debug....
But if you do Right click on the same test followed by
Run As... or 
Debug As...
a new Configuration will be created that has the default project once again.
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch09s06.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch09.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch10.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">9.6.&nbsp;Settings for Emacs&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;10.&nbsp;Standards For Documentation Writing</td></tr></table></div></body></html>